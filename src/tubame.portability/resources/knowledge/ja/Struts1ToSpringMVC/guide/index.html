<HTML xmlns:knowhow="http://generated.model.biz.knowhow.tubame/knowhow" xmlns:doc="http://docbook.org/ns/docbook">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Struts 1からSpring MVCへのマイグレーションナレッジ</title>
<link href="css/knowhow.css" type="text/css" rel="stylesheet">
<meta content="DocBook XSL Stylesheets V1.78.1" name="generator">
</HEAD>
<BODY>
<H1 class="title">Struts 1からSpring MVCへのマイグレーションナレッジ</H1>
<div class="toc">
<p>
<b>Index</b>
</p>
<dl class="toc">
<dt>
<span class="1."><a href="#tubame_1.">1.はじめに</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="1.1."><a href="#tubame_1.1.">1.1.本ドキュメントについて</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="1.2."><a href="#tubame_1.2.">1.2.代替フレームワークとの比較</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="1.3."><a href="#tubame_1.3.">1.3.代替フレームワークへの移植判断</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="2."><a href="#tubame_2.">2.機能概要</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="2.1."><a href="#tubame_2.1.">2.1.Struts1.3.xの機能概要</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="2.1.1."><a href="#tubame_2.1.1.">2.1.1.Struts1.3.xアプリケーションの構成</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.2."><a href="#tubame_2.1.2.">2.1.2.Struts1.3.xの設定</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="2.1.2.1."><a href="#tubame_2.1.2.1.">2.1.2.1.web.xml</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.2.2."><a href="#tubame_2.1.2.2.">2.1.2.2.struts-config.xml</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3."><a href="#tubame_2.1.3.">2.1.3.コンポーネント</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="2.1.3.1."><a href="#tubame_2.1.3.1.">2.1.3.1.Struts Taglib</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3.2."><a href="#tubame_2.1.3.2.">2.1.3.2.Struts EL</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3.3."><a href="#tubame_2.1.3.3.">2.1.3.3.Struts Extras</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3.4."><a href="#tubame_2.1.3.4.">2.1.3.4.Struts Faces</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3.5."><a href="#tubame_2.1.3.5.">2.1.3.5.Struts Scripting</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3.6."><a href="#tubame_2.1.3.6.">2.1.3.6.Struts Tiles</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.1.3.7."><a href="#tubame_2.1.3.7.">2.1.3.7.Struts Apps</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.2."><a href="#tubame_2.2.">2.2.SpringMVCの機能概要</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="2.2.1."><a href="#tubame_2.2.1.">2.2.1.SpringMVCアプリケーションの構成</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="2.2.2."><a href="#tubame_2.2.2.">2.2.2.カスタムタグ</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="3."><a href="#tubame_3.">3.移行戦略</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="3.1."><a href="#tubame_3.1.">3.1.Modelの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="3.2."><a href="#tubame_3.2.">3.2.Controllerの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="3.3."><a href="#tubame_3.3.">3.3.Viewの移行</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="4."><a href="#tubame_4.">4.Modelの移行</a></span>
</dt>
<dt>
<span class="5."><a href="#tubame_5.">5.Controllerの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.1."><a href="#tubame_5.1.">5.1.ActionServlet</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.2."><a href="#tubame_5.2.">5.2.ActionServletの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.3."><a href="#tubame_5.3.">5.3.ActionMapping</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.3.1."><a href="#tubame_5.3.1.">5.3.1.ActionMappingでのワイルドカード利用</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.3.2."><a href="#tubame_5.3.2.">5.3.2.ActionMappingの継承</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.4."><a href="#tubame_5.4.">5.4.RequestProcessor</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.5."><a href="#tubame_5.5.">5.5.RequestProcessorの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.6."><a href="#tubame_5.6.">5.6.ActionForm Bean</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.6.1."><a href="#tubame_5.6.1.">5.6.1.入力値の検証</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.6.1.1."><a href="#tubame_5.6.1.1.">5.6.1.1.struts validator（commons-validator）で検証</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.6.1.2."><a href="#tubame_5.6.1.2.">5.6.1.2.独自の検証ロジックで検証</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.6.2."><a href="#tubame_5.6.2.">5.6.2.ActionFormクラスのユーティリティメソッド</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.6.3."><a href="#tubame_5.6.3.">5.6.3.DynaActionForm</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.6.4."><a href="#tubame_5.6.4.">5.6.4.Lazy ActionForm</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.6.5."><a href="#tubame_5.6.5.">5.6.5.Map-backed ActionForm</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7."><a href="#tubame_5.7.">5.7.ActionForm Beanの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.7.1."><a href="#tubame_5.7.1.">5.7.1.XDocletによるActionForm定義</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.2."><a href="#tubame_5.7.2.">5.7.2.ActionFormクラスの提供するユーティリティメソッドの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.7.2.1."><a href="#tubame_5.7.2.1.">5.7.2.1.ActionFormユーティリティメソッドgetMultipartRequestHandler/setMultipartRequestHandlerの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.2.2."><a href="#tubame_5.7.2.2.">5.7.2.2.ActionFormユーティリティメソッドgetServletWrapperの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.2.3."><a href="#tubame_5.7.2.3.">5.7.2.3.ActionFormユーティリティメソッドresetの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.2.4."><a href="#tubame_5.7.2.4.">5.7.2.4.ActionFormユーティリティメソッドsetServletの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.2.5."><a href="#tubame_5.7.2.5.">5.7.2.5.ActionFormユーティリティメソッドvalidateの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.2.6."><a href="#tubame_5.7.2.6.">5.7.2.6.ActionFormユーティリティメソッドgetServletの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.7.3."><a href="#tubame_5.7.3.">5.7.3.Map-backed ActionFormの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8."><a href="#tubame_5.8.">5.8.Action</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.8.1."><a href="#tubame_5.8.1.">5.8.1.シンプルなAction</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.2."><a href="#tubame_5.8.2.">5.8.2.DispatchAction</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.3."><a href="#tubame_5.8.3.">5.8.3.MappingDispatchAction</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.4."><a href="#tubame_5.8.4.">5.8.4.LookupDispatchAction</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.5."><a href="#tubame_5.8.5.">5.8.5.EventDispatchAction</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.6."><a href="#tubame_5.8.6.">5.8.6.リクエストのフォワード/リダイレクト</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.7."><a href="#tubame_5.8.7.">5.8.7.モジュール</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.8.8."><a href="#tubame_5.8.8.">5.8.8.Actionクラスのユーティリティメソッド</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9."><a href="#tubame_5.9.">5.9.Actionの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.9.1."><a href="#tubame_5.9.1.">5.9.1.Actionの設定移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.2."><a href="#tubame_5.9.2.">5.9.2.シンプルなActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.3."><a href="#tubame_5.9.3.">5.9.3.DispatchActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.4."><a href="#tubame_5.9.4.">5.9.4.LookupDispatchActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.5."><a href="#tubame_5.9.5.">5.9.5.EventDispatchActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.6."><a href="#tubame_5.9.6.">5.9.6.Forwardの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.9.6.1."><a href="#tubame_5.9.6.1.">5.9.6.1.リクエストのフォワード/リダイレクト移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.7."><a href="#tubame_5.9.7.">5.9.7.モジュールの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8."><a href="#tubame_5.9.8.">5.9.8.Actionクラスの提供するユーティリティメソッドの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.9.8.1."><a href="#tubame_5.9.8.1.">5.9.8.1.ActionユーティリティメソッドgetServletの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.2."><a href="#tubame_5.9.8.2.">5.9.8.2.ActionユーティリティメソッドsetServletの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.3."><a href="#tubame_5.9.8.3.">5.9.8.3.Actionユーティリティメソッドexecuteの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.4."><a href="#tubame_5.9.8.4.">5.9.8.4.ActionユーティリティメソッドaddErrorsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.5."><a href="#tubame_5.9.8.5.">5.9.8.5.ActionユーティリティメソッドaddMessagesの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.6."><a href="#tubame_5.9.8.6.">5.9.8.6.ActionユーティリティメソッドToken管理機能の移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.7."><a href="#tubame_5.9.8.7.">5.9.8.7.ActionユーティリティメソッドgetErrorsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.8."><a href="#tubame_5.9.8.8.">5.9.8.8.ActionユーティリティメソッドLocaleの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.9."><a href="#tubame_5.9.8.9.">5.9.8.9.ActionユーティリティメソッドgetMessagesの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.10."><a href="#tubame_5.9.8.10.">5.9.8.10.ActionユーティリティメソッドgetResourcesの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.11."><a href="#tubame_5.9.8.11.">5.9.8.11.ActionユーティリティメソッドisCancelledの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.8.12."><a href="#tubame_5.9.8.12.">5.9.8.12.ActionユーティリティメソッドsaveErrors/saveMessagesの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.9."><a href="#tubame_5.9.9.">5.9.9.Struts Extrasの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.9.9.1."><a href="#tubame_5.9.9.1.">5.9.9.1.DispatcherAction系の移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.9.2."><a href="#tubame_5.9.9.2.">5.9.9.2.DownloadActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.9.3."><a href="#tubame_5.9.9.3.">5.9.9.3.ForwardActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.9.4."><a href="#tubame_5.9.9.4.">5.9.9.4.IncludeActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.9.5."><a href="#tubame_5.9.9.5.">5.9.9.5.LocaleActionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.9.9.6."><a href="#tubame_5.9.9.6.">5.9.9.6.SwitchActionの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.10."><a href="#tubame_5.10.">5.10.例外処理</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.10.1."><a href="#tubame_5.10.1.">5.10.1.Action単位の例外処理</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.10.2."><a href="#tubame_5.10.2.">5.10.2.モジュール単位の例外処理</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.10.3."><a href="#tubame_5.10.3.">5.10.3.ModuleExceptionの利用</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.10.4."><a href="#tubame_5.10.4.">5.10.4.&lt;exception&gt;タグに指定可能な属性</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.11."><a href="#tubame_5.11.">5.11.例外処理の移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.11.1."><a href="#tubame_5.11.1.">5.11.1.Action単位の例外処理の移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.11.2."><a href="#tubame_5.11.2.">5.11.2.モジュール単位の例外処理の移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="5.11.2.1."><a href="#tubame_5.11.2.1.">5.11.2.1.モジュール単位の例外処理設定</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.11.2.2."><a href="#tubame_5.11.2.2.">5.11.2.2.XDocletによる例外処理設定</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.11.3."><a href="#tubame_5.11.3.">5.11.3.ModuleException処理の移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="5.11.4."><a href="#tubame_5.11.4.">5.11.4.独自のExceptionHandlerクラスの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="6."><a href="#tubame_6.">6.Viewの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1."><a href="#tubame_6.1.">6.1.Struts独自タグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.1."><a href="#tubame_6.1.1.">6.1.1.Struts独自タグの宣言の移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2."><a href="#tubame_6.1.2.">6.1.2.beanタグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.2.1."><a href="#tubame_6.1.2.1.">6.1.2.1.Struts独自タグbean:cookieの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.2."><a href="#tubame_6.1.2.2.">6.1.2.2.Struts独自タグbean:defineの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.3."><a href="#tubame_6.1.2.3.">6.1.2.3.Struts独自タグbean:headerの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.4."><a href="#tubame_6.1.2.4.">6.1.2.4.Struts独自タグbean:includeの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.5."><a href="#tubame_6.1.2.5.">6.1.2.5.Struts独自タグbean:messageの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.6."><a href="#tubame_6.1.2.6.">6.1.2.6.Struts独自タグbean:pageの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.7."><a href="#tubame_6.1.2.7.">6.1.2.7.Struts独自タグbean:parameterの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.8."><a href="#tubame_6.1.2.8.">6.1.2.8.Struts独自タグbean:resourceの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.9."><a href="#tubame_6.1.2.9.">6.1.2.9.Struts独自タグbean:sizeの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.10."><a href="#tubame_6.1.2.10.">6.1.2.10.Struts独自タグbean:strutsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.2.11."><a href="#tubame_6.1.2.11.">6.1.2.11.Struts独自タグbean:writeの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.3."><a href="#tubame_6.1.3.">6.1.3.bean-elタグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.3.1."><a href="#tubame_6.1.3.1.">6.1.3.1.Struts独自タグbean-el:includeの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.3.2."><a href="#tubame_6.1.3.2.">6.1.3.2.Struts独自タグbean-el:messageの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.3.3."><a href="#tubame_6.1.3.3.">6.1.3.3.Struts独自タグbean-el:pageの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.3.4."><a href="#tubame_6.1.3.4.">6.1.3.4.Struts独自タグbean-el:resourceの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.3.5."><a href="#tubame_6.1.3.5.">6.1.3.5.Struts独自タグbean-el:sizeの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.3.6."><a href="#tubame_6.1.3.6.">6.1.3.6.Struts独自タグbean-el:strutsの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4."><a href="#tubame_6.1.4.">6.1.4.htmlタグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.4.1."><a href="#tubame_6.1.4.1.">6.1.4.1.Struts独自タグhtml:baseの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.2."><a href="#tubame_6.1.4.2.">6.1.4.2.Struts独自タグhtml:buttonの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.3."><a href="#tubame_6.1.4.3.">6.1.4.3.Struts独自タグhtml:cancelの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.4."><a href="#tubame_6.1.4.4.">6.1.4.4.Struts独自タグhtml:checkboxの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.5."><a href="#tubame_6.1.4.5.">6.1.4.5.Struts独自タグhtml:errorsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.6."><a href="#tubame_6.1.4.6.">6.1.4.6.Struts独自タグhtml:fileの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.7."><a href="#tubame_6.1.4.7.">6.1.4.7.Struts独自タグhtml:formの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.8."><a href="#tubame_6.1.4.8.">6.1.4.8.Struts独自タグhtml:frameの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.9."><a href="#tubame_6.1.4.9.">6.1.4.9.Struts独自タグhtml:hiddenの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.10."><a href="#tubame_6.1.4.10.">6.1.4.10.Struts独自タグhtml:htmlの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.11."><a href="#tubame_6.1.4.11.">6.1.4.11.Struts独自タグhtml:imageの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.12."><a href="#tubame_6.1.4.12.">6.1.4.12.Struts独自タグhtml:imgの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.13."><a href="#tubame_6.1.4.13.">6.1.4.13.Struts独自タグhtml:javascriptの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.14."><a href="#tubame_6.1.4.14.">6.1.4.14.Struts独自タグhtml:linkの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.15."><a href="#tubame_6.1.4.15.">6.1.4.15.Struts独自タグhtml:messagesの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.16."><a href="#tubame_6.1.4.16.">6.1.4.16.Struts独自タグhtml:multiboxの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.17."><a href="#tubame_6.1.4.17.">6.1.4.17.Struts独自タグhtml:optionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.18."><a href="#tubame_6.1.4.18.">6.1.4.18.Struts独自タグhtml:optionsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.19."><a href="#tubame_6.1.4.19.">6.1.4.19.Struts独自タグhtml:optionsCollectionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.20."><a href="#tubame_6.1.4.20.">6.1.4.20.Struts独自タグhtml:paramの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.21."><a href="#tubame_6.1.4.21.">6.1.4.21.Struts独自タグhtml:passwordの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.22."><a href="#tubame_6.1.4.22.">6.1.4.22.Struts独自タグhtml:radioの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.23."><a href="#tubame_6.1.4.23.">6.1.4.23.Struts独自タグhtml:resetの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.24."><a href="#tubame_6.1.4.24.">6.1.4.24.Struts独自タグhtml:rewriteの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.25."><a href="#tubame_6.1.4.25.">6.1.4.25.Struts独自タグhtml:selectの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.26."><a href="#tubame_6.1.4.26.">6.1.4.26.Struts独自タグhtml:submitの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.27."><a href="#tubame_6.1.4.27.">6.1.4.27.Struts独自タグhtml:textの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.28."><a href="#tubame_6.1.4.28.">6.1.4.28.Struts独自タグhtml:textareaの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.4.29."><a href="#tubame_6.1.4.29.">6.1.4.29.Struts独自タグhtml:xhtmlの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5."><a href="#tubame_6.1.5.">6.1.5.html-elタグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.5.1."><a href="#tubame_6.1.5.1.">6.1.5.1.Struts独自タグhtml-el:baseの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.2."><a href="#tubame_6.1.5.2.">6.1.5.2.Struts独自タグhtml-el:buttonの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.3."><a href="#tubame_6.1.5.3.">6.1.5.3.Struts独自タグhtml-el:cancelの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.4."><a href="#tubame_6.1.5.4.">6.1.5.4.Struts独自タグhtml-el:checkboxの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.5."><a href="#tubame_6.1.5.5.">6.1.5.5.Struts独自タグhtml-el:errorsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.6."><a href="#tubame_6.1.5.6.">6.1.5.6.Struts独自タグhtml-el:fileの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.7."><a href="#tubame_6.1.5.7.">6.1.5.7.Struts独自タグhtml-el:formの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.8."><a href="#tubame_6.1.5.8.">6.1.5.8.Struts独自タグhtml-el:frameの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.9."><a href="#tubame_6.1.5.9.">6.1.5.9.Struts独自タグhtml-el:hiddenの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.10."><a href="#tubame_6.1.5.10.">6.1.5.10.Struts独自タグhtml-el:htmlの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.11."><a href="#tubame_6.1.5.11.">6.1.5.11.Struts独自タグhtml-el:imageの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.12."><a href="#tubame_6.1.5.12.">6.1.5.12.Struts独自タグhtml-el:imgの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.13."><a href="#tubame_6.1.5.13.">6.1.5.13.Struts独自タグhtml-el:javascriptの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.14."><a href="#tubame_6.1.5.14.">6.1.5.14.Struts独自タグhtml-el:linkの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.15."><a href="#tubame_6.1.5.15.">6.1.5.15.Struts独自タグhtml-el:messagesの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.16."><a href="#tubame_6.1.5.16.">6.1.5.16.Struts独自タグhtml-el:multiboxの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.17."><a href="#tubame_6.1.5.17.">6.1.5.17.Struts独自タグhtml-el:optionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.18."><a href="#tubame_6.1.5.18.">6.1.5.18.Struts独自タグhtml-el:optionsの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.19."><a href="#tubame_6.1.5.19.">6.1.5.19.Struts独自タグhtml-el:optionsCollectionの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.20."><a href="#tubame_6.1.5.20.">6.1.5.20.Struts独自タグhtml-el:paramの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.21."><a href="#tubame_6.1.5.21.">6.1.5.21.Struts独自タグhtml-el:passwordの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.22."><a href="#tubame_6.1.5.22.">6.1.5.22.Struts独自タグhtml-el:radioの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.23."><a href="#tubame_6.1.5.23.">6.1.5.23.Struts独自タグhtml-el:resetの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.24."><a href="#tubame_6.1.5.24.">6.1.5.24.Struts独自タグhtml-el:rewriteの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.25."><a href="#tubame_6.1.5.25.">6.1.5.25.Struts独自タグhtml-el:selectの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.26."><a href="#tubame_6.1.5.26.">6.1.5.26.Struts独自タグhtml-el:submitの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.27."><a href="#tubame_6.1.5.27.">6.1.5.27.Struts独自タグhtml-el:textの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.28."><a href="#tubame_6.1.5.28.">6.1.5.28.Struts独自タグhtml-el:textareaの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.5.29."><a href="#tubame_6.1.5.29.">6.1.5.29.Struts独自タグhtml-el:xhtmlの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6."><a href="#tubame_6.1.6.">6.1.6.logicタグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.6.1."><a href="#tubame_6.1.6.1.">6.1.6.1.Struts独自タグlogic:emptyの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.2."><a href="#tubame_6.1.6.2.">6.1.6.2.Struts独自タグlogic:equalの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.3."><a href="#tubame_6.1.6.3.">6.1.6.3.Struts独自タグlogic:forwardの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.4."><a href="#tubame_6.1.6.4.">6.1.6.4.Struts独自タグlogic:greaterEqualの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.5."><a href="#tubame_6.1.6.5.">6.1.6.5.Struts独自タグlogic:greaterThanの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.6."><a href="#tubame_6.1.6.6.">6.1.6.6.Struts独自タグlogic:iterateの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.7."><a href="#tubame_6.1.6.7.">6.1.6.7.Struts独自タグlogic:lessEqualの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.8."><a href="#tubame_6.1.6.8.">6.1.6.8.Struts独自タグlogic:lessThanの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.9."><a href="#tubame_6.1.6.9.">6.1.6.9.Struts独自タグlogic:matchの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.10."><a href="#tubame_6.1.6.10.">6.1.6.10.Struts独自タグlogic:messagesNotPresentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.11."><a href="#tubame_6.1.6.11.">6.1.6.11.Struts独自タグlogic:messagesPresentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.12."><a href="#tubame_6.1.6.12.">6.1.6.12.Struts独自タグlogic:notEmptyの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.13."><a href="#tubame_6.1.6.13.">6.1.6.13.Struts独自タグlogic:notEqualの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.14."><a href="#tubame_6.1.6.14.">6.1.6.14.Struts独自タグlogic:notMatchの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.15."><a href="#tubame_6.1.6.15.">6.1.6.15.Struts独自タグlogic:notPresentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.16."><a href="#tubame_6.1.6.16.">6.1.6.16.Struts独自タグlogic:presentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.6.17."><a href="#tubame_6.1.6.17.">6.1.6.17.Struts独自タグlogic:redirectの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7."><a href="#tubame_6.1.7.">6.1.7.logic-leタグ</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.1.7.1."><a href="#tubame_6.1.7.1.">6.1.7.1.Struts独自タグlogic-el:forwardの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.2."><a href="#tubame_6.1.7.2.">6.1.7.2.Struts独自タグlogic-el:iterateの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.3."><a href="#tubame_6.1.7.3.">6.1.7.3.Struts独自タグlogic-el:matchの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.4."><a href="#tubame_6.1.7.4.">6.1.7.4.Struts独自タグlogic-el:messagesNotPresentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.5."><a href="#tubame_6.1.7.5.">6.1.7.5.Struts独自タグlogic-el:messagesPresentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.6."><a href="#tubame_6.1.7.6.">6.1.7.6.Struts独自タグlogic-el:notMatchの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.7."><a href="#tubame_6.1.7.7.">6.1.7.7.Struts独自タグlogic-el:notPresentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.8."><a href="#tubame_6.1.7.8.">6.1.7.8.Struts独自タグlogic-el:presentの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.7.9."><a href="#tubame_6.1.7.9.">6.1.7.9.Struts独自タグlogic-el:redirectの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.1.8."><a href="#tubame_6.1.8.">6.1.8.Struts独自タグnestedタグの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.2."><a href="#tubame_6.2.">6.2.入力値検証機能の移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.2.1."><a href="#tubame_6.2.1.">6.2.1.Struts Validator</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.2.1.1."><a href="#tubame_6.2.1.1.">6.2.1.1.Struts Validatorの設定移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.2.1.2."><a href="#tubame_6.2.1.2.">6.2.1.2.XDocletによるStruts Validatorの設定移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.2.2."><a href="#tubame_6.2.2.">6.2.2.クライアントサイドの入力値検証機能移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.3."><a href="#tubame_6.3.">6.3.テンプレートエンジンの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.3.1."><a href="#tubame_6.3.1.">6.3.1.テンプレートエンジンStruts-Tilesの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.3.2."><a href="#tubame_6.3.2.">6.3.2.テンプレートエンジンVelocityの移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="6.3.2.1."><a href="#tubame_6.3.2.1.">6.3.2.1.VelocityTools</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.3.3."><a href="#tubame_6.3.3.">6.3.3.テンプレートエンジンFreeMarkerの移行</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="6.4."><a href="#tubame_6.4.">6.4.その他</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="7."><a href="#tubame_7.">7.Struts1固有機能の移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="7.1."><a href="#tubame_7.1.">7.1.Struts1固有機能の移行</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="7.1.1."><a href="#tubame_7.1.1.">7.1.1.メッセージリソース設定の移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="7.1.2."><a href="#tubame_7.1.2.">7.1.2.DynaActionForm/Lazy ActionFormの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="7.1.3."><a href="#tubame_7.1.3.">7.1.3.Commandの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="7.1.4."><a href="#tubame_7.1.4.">7.1.4.プラグインの移行</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="7.1.5."><a href="#tubame_7.1.5.">7.1.5.Strutsのセッション IDの払い出し</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="8."><a href="#tubame_8.">8.付録</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.1."><a href="#tubame_8.1.">8.1.Struts1.x間の差分</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.1.1."><a href="#tubame_8.1.1.">8.1.1.Struts1.1.xと1.2.xとの主な差分</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.1.2."><a href="#tubame_8.1.2.">8.1.2.Struts1.2.xと1.3.xとの主な差分</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.2."><a href="#tubame_8.2.">8.2.Actionクラスのメソッド一覧</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.3."><a href="#tubame_8.3.">8.3.Validator比較</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.4."><a href="#tubame_8.4.">8.4.Struts1.xとSpringMVCのクラス対応</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.5."><a href="#tubame_8.5.">8.5.自画面遷移</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.6."><a href="#tubame_8.6.">8.6.認可処理</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7."><a href="#tubame_8.7.">8.7.Struts1のhtmlタグ移行サンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.1."><a href="#tubame_8.7.1.">8.7.1.html:options</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2."><a href="#tubame_8.7.2.">8.7.2.html:checkbox及びhtml:multibox</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.2.1."><a href="#tubame_8.7.2.1.">8.7.2.1.strutsサンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.2.1.1."><a href="#tubame_8.7.2.1.1.">8.7.2.1.1.JSPサンプル(html:multiboxで複数のチェックボックスを表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.1.2."><a href="#tubame_8.7.2.1.2.">8.7.2.1.2.JSPサンプル(html:checkboxで複数のチェックボックスを表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.1.3."><a href="#tubame_8.7.2.1.3.">8.7.2.1.3.JSPサンプル(html:checkboxでon/off用チェックボックスを表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.1.4."><a href="#tubame_8.7.2.1.4.">8.7.2.1.4.JSPサンプル(html:checkboxでon/off用チェックボックスを複数表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.1.5."><a href="#tubame_8.7.2.1.5.">8.7.2.1.5.JSPサンプル(html:checkboxでListでデータを授受。List-backed ActionFormのサンプル）</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.2."><a href="#tubame_8.7.2.2.">8.7.2.2.SpringMVCサンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.2.2.1."><a href="#tubame_8.7.2.2.1.">8.7.2.2.1.JSPサンプル(html:multiboxで複数のチェックボックスを表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.2.2."><a href="#tubame_8.7.2.2.2.">8.7.2.2.2.JSPサンプル(html:checkboxでon/off用チェックボックスを表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.2.3."><a href="#tubame_8.7.2.2.3.">8.7.2.2.3.JSPサンプル(html:checkboxでon/off用チェックボックスを複数表示）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.2.2.4."><a href="#tubame_8.7.2.2.4.">8.7.2.2.4.JSPサンプル(html:checkboxでListでデータを授受。List-backed ActionFormのサンプル）</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.3."><a href="#tubame_8.7.3.">8.7.3.html:radio</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.3.1."><a href="#tubame_8.7.3.1.">8.7.3.1.strutsサンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.3.1.1."><a href="#tubame_8.7.3.1.1.">8.7.3.1.1.JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.3.1.2."><a href="#tubame_8.7.3.1.2.">8.7.3.1.2.JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.3.1.3."><a href="#tubame_8.7.3.1.3.">8.7.3.1.3.JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.3.2."><a href="#tubame_8.7.3.2.">8.7.3.2.SpringMVCサンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.3.2.1."><a href="#tubame_8.7.3.2.1.">8.7.3.2.1.JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.3.2.2."><a href="#tubame_8.7.3.2.2.">8.7.3.2.2.JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.3.2.3."><a href="#tubame_8.7.3.2.3.">8.7.3.2.3.JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4."><a href="#tubame_8.7.4.">8.7.4.html:messages</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.4.1."><a href="#tubame_8.7.4.1.">8.7.4.1.strutsサンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.4.1.1."><a href="#tubame_8.7.4.1.1.">8.7.4.1.1.JSPサンプル-Action#saveMessagesで保存したメッセージを表示する場合</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.1.2."><a href="#tubame_8.7.4.1.2.">8.7.4.1.2.JSPサンプル-OverrideしたsaveMessagesで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.1.3."><a href="#tubame_8.7.4.1.3.">8.7.4.1.3.JSPサンプル-Action#saveErrorsで保存したメッセージを表示する場合</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.1.4."><a href="#tubame_8.7.4.1.4.">8.7.4.1.4.JSPサンプル-OverrideしたsaveErrorsで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.1.5."><a href="#tubame_8.7.4.1.5.">8.7.4.1.5.JSPサンプル-Action#saveMessagesで保存したメッセージキーに対応するメッセージを表示する</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.1.6."><a href="#tubame_8.7.4.1.6.">8.7.4.1.6.JSPサンプル-メッセージの存在チェック</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.1.7."><a href="#tubame_8.7.4.1.7.">8.7.4.1.7.JSPサンプル-struts-validator使用時にメッセージを出力する</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.2."><a href="#tubame_8.7.4.2.">8.7.4.2.SpringMVCサンプル</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="8.7.4.2.1."><a href="#tubame_8.7.4.2.1.">8.7.4.2.1.JSPサンプル-リクエストスコープにメッセージを格納（その１）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.2.2."><a href="#tubame_8.7.4.2.2.">8.7.4.2.2.JSPサンプル-リクエストスコープにメッセージを格納（その２）</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.2.3."><a href="#tubame_8.7.4.2.3.">8.7.4.2.3.JSPサンプル-リクエストスコープに保存されたメッセージキーに対応するメッセージを表示する場合</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.2.4."><a href="#tubame_8.7.4.2.4.">8.7.4.2.4.JSPサンプル-リクエストスコープに保存されたメッセージキーが引数を取る場合</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.2.5."><a href="#tubame_8.7.4.2.5.">8.7.4.2.5.JSPサンプル-メッセージの存在チェック</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.7.4.2.6."><a href="#tubame_8.7.4.2.6.">8.7.4.2.6.Bean Validation使用時にメッセージを出力する</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.8."><a href="#tubame_8.8.">8.8.Struts1のDownloadAction</a></span>
</dt>
</dl>
</dd>
<dd>
<dl>
<dt>
<span class="8.9."><a href="#tubame_8.9.">8.9.フレームワーク比較【参考】</a></span>
</dt>
</dl>
</dd>
</dl>
</div>
<HR>
<a name="tubame_1."></a>
<h2 class="title">1.はじめに</h2>
<br>
<a name="tubame_1.1." id="category_176"></a>
<h3 class="title">1.1.本ドキュメントについて</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>本ドキュメントはJava WebフレームワークであるStruts 1からSpring
			MVCへのマイグレーションに関する情報を整理したものである。Modelの移行については本ガイドでは対象外とする。
		</p>
<p>本ドキュメントで対象とするStrutsバージョンはStruts 1.3.xとする。</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>

			
				Struts 1バージョン間（例：Struts 1.2.x～Struts1.3.x）の差分情報については
				<span class="command"><strong><a class="command" href="#struts1_diff">「Struts1.x間の差分」</a></strong></span>
				を参照のこと
			</p>
</td>
</tr>
</table>
</div>
</div>
<br>
<br>
<a name="tubame_1.2." id="category_177"></a>
<h3 class="title">1.2.代替フレームワークとの比較</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts 1の代替フレームワークとして、OSS製品のフレームワークを挙げ比較を行い、代替として適切と思われるフレームワークを選択する。
</p>
<p>Java Webフレームワークは、主にコンポーネントベース（JSFやApache
Wicketなど）とアクションベース（Struts 1/2、Spring MVCなど）に分類することができる。Strutsはアクションベースであるため、移行対象としてはアクションベースのJava Webフレームワークに限定する。
</p>
<p>本資料では、Struts 1xからの移行候補としてはSpring MVCを第一候補として挙げる。第二候補としては、Struts 2、Grailsがあるが、移行ノウハウの充実度からStruts2を候補として挙げる。
</p>
<p>
比較検討詳細については
<span class="command"><strong><a class="command" href="#frameworkList">「フレームワーク比較【参考】」</a></strong></span>
参照
</p>
</div>
<br>
<br>
<a name="tubame_1.3." id="category_178"></a>
<h3 class="title">1.3.代替フレームワークへの移植判断</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts 1、Spring MVC、ともにフレームワークごとに特徴があり、内部実装方法、アプリケーションの実装方法は違いがある。しかしながら、アクションベースであること（パスとメソッドの対応づけ）、Servlet/JSPをベースとしていることから、根本的な違いというところまでは至っていない。したがって、難易度の高低はあれどマイグレーション自体は可能と考えられる。
以下では個別の状況について、判断する。
</p>
<p>Spring MVCでは、アノテーションの利用により大幅に設定ファイルへの記述が削減され、コード中への設定の記述が多くなるが、機能としてはStruts 1をほとんどカバーできている。Viewについては、Struts 1に比べて提供される独自タグが少ないが、JSTLやELの利用によりカバーできると考えられる。したがって、Spring MVCへのマイグレーションは可能と考えられる。</p>
<p>Struts 2については、Struts1 Pluginの利用によりStruts 1のAction/ActionFormをそのまま利用できる。ただし、ViewについてはPluginの対象外であること、また、Struts 1が持つセキュリティ脆弱性も引き継いでしまうことから利用は推奨しない。しかしながら、機能面ではStruts 1をほとんどカバーできていることから、Action/ActionFormのマイグレーションは可能と考えられる。またViewについても、Struts 1に比べて提供される独自タグが少ないが、主要な機能は提供されており、マイグレーション自体は可能と考えられる。したがって、Struts 2へのマイグレーションも可能と考えられる。</p>
</div>
<br>
<br>
<a name="tubame_2."></a>
<h2 class="title">2.機能概要</h2>
<br>
<a name="tubame_2.1." id="category_180"></a>
<h3 class="title">2.1.Struts1.3.xの機能概要</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1.3.xは、以下の緑枠部分の機能を提供している。Struts1.3.xはMVC2モデルに基づく構成を取っており、下図において、ActionServletやRequestProcessor、ActionはController、JSPはViewとなる。Modelである業務ロジック部分は、アプリケーション開発者が任意のプロダクトを利用して作成する（Strutsとして何かしらの機能は提供していない）。
緑の箱で示されているActionServletやActionMapping、RequestProcessorはStrutsが提供するものを使用するか、もしくは、ユーザが各クラスを拡張して作成したものを使用する。
青の箱で示されているものは、ユーザが作成する必要がある。
</p>
<div class="figure">
<a name="N13B97"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts機能概要</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="60%">
<tr>
<td><img src="images/image2.png" width="100%" alt="This image does not a meaning in the image"></td>
</tr>
</table>
</div>
</div>
</div>
<br class="figure-break">
<div class="table">
<a name="N13BA4"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Strutsの各種Bean一覧</b>
</p>
<div class="table-contents">
<table summary="Strutsの各種Bean一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>カテゴリ</th><th>クラス</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="3">provided by Struts</td><td>org.apache.struts.action.ActionServlet</td><td>ActionServletは、MVC2モデルにおいてコントローラの役割を担うものである。ActionServletは設定ファイル（struts-config.xml）を読み込み、どのモジュールに処理を振り分けるかを判断する
</td>
</tr>
<tr>
<td>org.apache.struts.action.ActionMapping</td><td>ActionMappingクラスは、struts-config.xmlのaction-mappingsに定義された各actionタグに設定された情報を保持するクラスである
</td>
</tr>
<tr>
<td>org.apache.struts.action.RequestProcessor</td><td>RequestProcessorは、リクエスト処理の中核をなすクラスであり、リクエストに対応するActionの選定やActionから返却されたActionForwardオブジェクトに設定された遷移先への遷移など、リクエストの前処理から後処理までを行う。
</td>
</tr>
<tr>
<td rowspan="2">implemtented by developers
</td><td>org.apache.struts.action.ActionForm</td><td>ActionForm
Beanはフォーム画面から送られてくるデータの受け渡し、Modelとのデータ受け渡しなどに利用する。
ActionFormクラスを拡張したクラスを実装する
</td>
</tr>
<tr>
<td>org.apache.struts.action.Action</td><td>Actionクラスでは、Formから渡されたデータ処理やビジネスロジックの呼び出し（もしくはビジネスロジックそのものをActionクラスに記述）を行い、結果としてActionForwardオブジェクト（JSPやTile定義、Velocityテンプレート、他のActionなど）を返却する。
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Viewについて</p>
<p>Viewについては、Struts EL、Struts Faces、Struts Taglib、Struts
Tilesなどを利用して作成する（標準タグライブラリであるJSTLやVelocityなど、ほかのテンプレートシステムを利用しても良い）。
</p>
</li>
<li class="listitem">
<p>入力値の検証について</p>
<p>
以下の方法より可能となっている

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>struts validatorを利用する</p>
</li>
<li class="listitem">
<p>org.apache.struts.action.ActionFormを拡張したActionFormを作成し、オーバーライドしたvalidate()メソッド内で独自の検証ロジックを実装する
</p>
</li>
</ul>
</div>
<p>

</p>
</li>
<li class="listitem">
<p>Strutsが提供するタグライブラリにういて</p>
<p>Struts
Taglib（html,bean,logic,nestタグを提供)及びそのコンポーネントによりに多くのタグが利用可能となる。
</p>
</li>
</ul>
</div>
<p>



</p>
</td>
</tr>
</table>
</div>
</div>
<br>
<br>
<a name="tubame_2.1.1." id="category_192"></a>
<h3 class="title">2.1.1.Struts1.3.xアプリケーションの構成</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1.3.xのアプリケーションは、おおよそ以下のようなファイル構成となる。
</p>
<div class="figure">
<a name="N13BFA"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts1アプリケーション構成</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="60%">
<tr>
<td><img src="images/image1.png" width="100%" alt="This image does not a meaning in the image"></td>
</tr>
</table>
</div>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_2.1.2." id="category_195"></a>
<h3 class="title">2.1.2.Struts1.3.xの設定</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Struts1.3.xでは、設定ファイルとして主に以下の二つのファイルを用いる。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>web.xml</p>
</li>
<li class="listitem">
<p>struts-config.xml</p>
</li>
</ul>
</div>
<p>
以下では、それぞれについて解説する。
</p>
</div>
<br>
<br>
<a name="tubame_2.1.2.1." id="category_196"></a>
<h3 class="title">2.1.2.1.web.xml</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>web.xmlでは、以下の設定を行う。</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>ActionServletの定義と初期化パラメータの設定</p>
<p>
マッピングの設定は、Prefixマッチング、もしくは、Extensionマッチングのどちらかで設定する。
Prefixマッチング、Extensionマッチングの例をそれぞれ以下に示す。
</p>
<div class="figure">
<a name="N13C2E"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;例1) Prefixマッチング</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/do/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
<li class="listitem">
<p>ActionServletのマッピング</p>
<p>

</p>
<div class="figure">
<a name="N13C3E"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;例2) Extensionマッチング</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
</ol>
</div>
</div>
<br>
<br>
<a name="tubame_2.1.2.2." id="category_544"></a>
<h3 class="title">2.1.2.2.struts-config.xml</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
struts-config.xmlで設定する設定項目について以下に示す。
</p>
<div class="table">
<a name="N15BC4"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>設定項目名</th><th>タグ</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ActionForm Bean</td><td>form-beans</td><td>このセクションでは、利用するActionForm Beanの定義を行う。ActionForm Beanの詳細については、<span class="command"><strong><a class="command" href="#actionFormBean">「ActionForm Bean」</a></strong></span>を参照</td>
</tr>
<tr>
<td>グローバル例外</td><td>global-exceptions</td><td>このセクションでは、例外発生時の動作について設定する。詳細については、<span class="command"><strong><a class="command" href="#exception">「例外処理」</a></strong></span>を参照</td>
</tr>
<tr>
<td>グローバルフォワード</td><td>global-forwards</td><td>このセクションでは、JSPやActionからフォワードする先の情報を登録する。フォワード先は、JSP（/xxx.jsp）やAction（/yyy.do）などを指定する。グローバルフォワードとして定義すると、当該モジュールすべてで利用することができる（アクションマッピング定義中で、Actionごとにフォワード先を登録することも可能）</td>
</tr>
<tr>
<td>アクションマッピング</td><td>action-mappings</td><td>このセクションでは、ActionMappingに関する情報を登録する。詳細については、<span class="command"><strong><a class="command" href="#actionMapping">「ActionMapping」</a></strong></span>を参照 </td>
</tr>
<tr>
<td>コントローラ</td><td>controller</td><td>このセクションでは、当該モジュールで利用するControllerに関する情報を定義する。Controller自体や、Controllerの動作を変更する（ComposableRequestProcessorで利用するCommand Chainの設定を変更する）場合に、このセクションで設定する</td>
</tr>
<tr>
<td>メッセージリソース</td><td>message-resources</td><td>このセクションでは、ActionやJSP、例外ハンドラなどで利用するメッセージリソースを定義する</td>
</tr>
<tr>
<td>プラグイン</td><td>plug-in</td><td>このセクションでは、当該モジュールで利用するプラグインを定義する</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_2.1.3." id="category_197"></a>
<h3 class="title">2.1.3.コンポーネント</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1.3.x本体（struts-core）以外で提供される機能について、以下に記載する。</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.1." id="category_198"></a>
<h3 class="title">2.1.3.1.Struts Taglib</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Strutsが提供する独自のカスタムタグライブラリ。以下のタグが利用可能。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Beanタグ</p>
</li>
<li class="listitem">
<p>HTMLタグ</p>
</li>
<li class="listitem">
<p>Logicタグ</p>
</li>
<li class="listitem">
<p>Nestedタグ</p>
</li>
</ul>
</div>
<p>

詳細は<span class="command"><strong><a class="command" href="#portingStrutsDependsTag">「Struts独自タグ」</a></strong></span>を参照
</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.2." id="category_199"></a>
<h3 class="title">2.1.3.2.Struts EL</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Struts Taglib（の一部）、Struts Tilesを拡張し、EL（Expression
Language）に対応させたカスタムタグライブラリ。以下の4つが提供されている。詳細はStruts Taglibと同じため、省略。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>HTML EL</p>
</li>
<li class="listitem">
<p>Bean EL</p>
</li>
<li class="listitem">
<p>Logic EL</p>
</li>
<li class="listitem">
<p>Tiles EL</p>
</li>
</ul>
</div>
<p>


</p>
<p>
Struts ELタグライブラリでは、すべてのStruts
Taglibタグを実装していない。実装していないタグの一覧については、下記ファイルを参照。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-1.3.10/docs/struts-el/index.html#Tag_Mapping</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.3." id="category_200"></a>
<h3 class="title">2.1.3.3.Struts Extras</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
有用なクラスを提供するライブラリ。提供されるクラスの一覧は、以下参照。


</p>
<div class="table">
<a name="tableStrutsExtras"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts Extras提供クラス一覧</b>
</p>
<div class="table-contents">
<table summary="Struts Extras提供クラス一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>ActionDispatcher</td><td>通常のActionクラスにDispatchAction相当の機能を提供するヘルパクラス</td>
</tr>
<tr>
<td>BaseAction</td><td>本表に含まれる各Actionクラス（ActionDispatcherやEventActionDispatcherを除く）のベースとなるクラス</td>
</tr>
<tr>
<td>DispatchAction</td><td>DispatchActionでは、actionタグのparameter属性に指定したパラメータ名とその値として指定されたメソッド名を利用する</td>
</tr>
<tr>
<td>DownloadAction</td><td>ファイルダウンロード機能を提供するActionクラス</td>
</tr>
<tr>
<td>EventActionDispatcher</td><td>通常のActionクラスにEventDispatchAction相当の機能を提供するヘルパクラス</td>
</tr>
<tr>
<td>EventDispatchAction</td><td>EventDispatchActionでは、actionタグのparameter属性に指定したメソッドのリストをリクエストパラメータ名として指定することで、実行するメソッドを決定する</td>
</tr>
<tr>
<td>ForwardAction</td><td>リクエストをフォワードする。モジュールを使用している場合、paramterに指定したパスはアプリケーション名からの相対パスとして扱われる（foward属性を使うと、モジュール名が省かれる）</td>
</tr>
<tr>
<td>IncludeAction</td><td>指定されたパスからのレスポンスをインクルードする</td>
</tr>
<tr>
<td>LocaleAction</td><td>formに指定された、languagとcountryからロケール情報を構築する。構築したロケール情報は、"org.apache.struts.action.LOCALE"をキーとして、指定されたロケール情報を設定してセッション情報に格納し、リクエストをフォワードする</td>
</tr>
<tr>
<td>LookupDispatchAction</td><td>LookupDispatchActionでは、これを拡張したクラスでgetKeyMethodMap()をオーバーライドし、プロパティキーとメソッド名のマップを作成する</td>
</tr>
<tr>
<td>MappingDispatchAction</td><td>MappingDispatchActionでは、複数のリクエストを一つのActionクラスにまとめる場合に利用する</td>
</tr>
<tr>
<td>SwitchAction</td><td>異なるモジュールのアクションを呼び出す</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">



</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.4." id="category_201"></a>
<h3 class="title">2.1.3.4.Struts Faces</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>JSFをサポートするためのアドオンライブラリ。サポートするJSFのバージョンは1.0以降（このライブラリ自体はJSF1.1でテストされている）。</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.5." id="category_202"></a>
<h3 class="title">2.1.3.5.Struts Scripting</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>JavaScript、Groovy、Ruby、Perl等のスクリプト言語でアクションを記載することを可能とするコンポーネント。Apache Commons BSF（Bean Scripting Framework） 2.xを利用している。</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.6." id="category_203"></a>
<h3 class="title">2.1.3.6.Struts Tiles</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>WebアプリケーションのViewを作成するためのタグライブラリ。単独でも利用可能となっている。
提供されるタグの一覧は、以下を参照。

</p>
<div class="table">
<a name="N13D09"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts Tilesタグ一覧</b>
</p>
<div class="table-contents">
<table summary="Struts Tilesタグ一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>add</td><td>Tiles設定ファイルの&lt;add&gt;に相当する</td>
</tr>
<tr>
<td>definition</td><td>Tiles設定ファイルの&lt;definition&gt;に相当する</td>
</tr>
<tr>
<td>get</td><td>putタグで設定されたコンテンツを取得する</td>
</tr>
<tr>
<td>getAsString</td><td>指定したオブジェクトの値を文字列として出力する</td>
</tr>
<tr>
<td>importAttribute</td><td>読み込んだオブジェクトを指定したスコープに登録する</td>
</tr>
<tr>
<td>initComponentDefinitions</td><td>タイル/コンポーネント定義を初期化する</td>
</tr>
<tr>
<td>insert</td><td>タイル/コンポーネント/テンプレートをページに挿入する</td>
</tr>
<tr>
<td>put</td><td>Tiles設定ファイルの&lt;put&gt;に相当する</td>
</tr>
<tr>
<td>putList</td><td>Tiles設定ファイルの&lt;putList&gt;に相当する</td>
</tr>
<tr>
<td>useAttribute</td><td>読み込んだオブジェクトを指定したスコープに登録し、IDで指定された名前をJSP内で利用可能にする</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">
　　　　　
</p>
</div>
<br>
<br>
<a name="tubame_2.1.3.7." id="category_204"></a>
<h3 class="title">2.1.3.7.Struts Apps</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Strutsのサンプルアプリケーション群。</p>
</div>
<br>
<br>
<a name="tubame_2.2." id="category_205"></a>
<h3 class="title">2.2.SpringMVCの機能概要</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCの概要については、下記URLを参照。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="https://terasolunaorg.github.io/guideline/public_review/Overview/SpringMVCOverview.html" target="_top">https://terasolunaorg.github.io/guideline/public_review/Overview/SpringMVCOverview.html
</a></strong></span>

</p>
</li>
</ul>
</div>
<p>


</p>
<div class="table">
<a name="N1653E"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;SpringMVCの各種Bean一覧</b>
</p>
<div class="table-contents">
<table summary="SpringMVCの各種Bean一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>カテゴリ</th><th>クラス</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="4">provided by Spring Source</td><td>org.springframework.web.servlet.DispacherServlet</td><td>ActionServletに相当するSpringMVCのクラス</td>
</tr>
<tr>
<td>org.springframework.web.servlet.HandlerMapping</td><td>URLリクエストとリクエストハンドラーとのマッピングロジックを定義する</td>
</tr>
<tr>
<td>org.springframework.web.servlet.HandlerAdapter</td><td>リクエストハンドラーを特定のインタフェースに適合させる</td>
</tr>
<tr>
<td>org.springframework.web.servlet.ViewResolver</td><td>Viewの論理名からViewのインスタンスを探すロジックを定義する</td>
</tr>
<tr>
<td>provided by Spring Source</td><td>org.springframework.ui.Model</td><td>-</td>
</tr>
<tr>
<td>implemtented by developers</td><td>Controller</td><td>org.springframework.stereotype.Controllerアノテーションを付与して,コントローラクラスを作成する
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Viewについて</p>
<p>springMVC3.2.ｘまでは、Struts-Tiles、Tiles2/3がサポートされていた（Struts-Tilesはspring-strutsパッケージに含まれている）が、SpringMVC4.0ではStruts関連パッケージが削除されたためStruts-Tilesのサポートもなくなっている。このため、SpringMVC4.0ではStruts-Tilesをそのまま利用することはできない
</p>
</li>
<li class="listitem">
<p>入力値の検証について</p>
<p>
以下の方法より可能となっている

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>org.springframework.validation.Validator を実装した独自Validator
</p>
</li>
<li class="listitem">
<p>Bean Validation（JSR-303/349。JSR-349対応はSpringMVC 4.0以降）
</p>
</li>
</ul>
</div>
<p>

</p>
</li>
<li class="listitem">
<p>SpringMVCが提供するタグライブラリについて</p>
<p>SpringMVC提供のタグライブラリより、2つのタグ(formとspringタグ)が利用可能となっている。


</p>
</li>
</ul>
</div>
<p>



</p>
</td>
</tr>
</table>
</div>
</div>
<br>
<br>
<a name="tubame_2.2.1." id="category_661"></a>
<h3 class="title">2.2.1.SpringMVCアプリケーションの構成</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCのアプリケーションは、おおよそ以下のようなファイル構成となる。

</p>
<div class="figure">
<a name="N1651B"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;SpringMVCアプリケーションの構成</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="60%">
<tr>
<td><img src="images/image4.png" width="100%" alt="SpringMVCアプリケーションの構成"></td>
</tr>
</table>
</div>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_2.2.2." id="category_208"></a>
<h3 class="title">2.2.2.カスタムタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Spring MVCで提供されているタグライブラリは以下の2つが存在する。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>formタグ</p>
</li>
<li class="listitem">
<p>springタグ</p>
</li>
</ul>
</div>
<p>


</p>
<div class="figure">
<a name="N13D63"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;タグ宣言例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %&gt;
&lt;%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
<div class="table">
<a name="N13D6E"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;springタグ一覧</b>
</p>
<div class="table-contents">
<table summary="springタグ一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>タグ名</th><th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>bind</td><td>Formの各フィールドと、Controllerに渡すCommandの項目をバインド設定するために使用。
通常は&lt;form:XXX&gt;のカスタムタグを使用する
</td>
</tr>
<tr>
<td>escapeBody</td><td>タグで囲んだ中身をHTMLエスケープし出力する</td>
</tr>
<tr>
<td>hasBindErrors</td><td>Commandに対してバインドエラーがある場合、タグのボディを評価（実行）する</td>
</tr>
<tr>
<td>htmlEscape</td><td>Spring MVC他のカスタムタグの属性「htmlEscape」のページ内でのデフォルト値を設定する
</td>
</tr>
<tr>
<td>message</td><td>Spring
Beanの「messageSource」からメッセージを取得。入力値検証結果のメッセージ（org.springframework.validation.Errors）を処理することもできる
</td>
</tr>
<tr>
<td>nestedPath</td><td>FormとCommandをバインドする際の現在のパスの位置を変更する</td>
</tr>
<tr>
<td>theme</td><td>テーマごとの設定値を出力する</td>
</tr>
<tr>
<td>transform</td><td>指定した値の型を文字列に変換する</td>
</tr>
<tr>
<td>url</td><td>指定したURLを、アプリケーションのURLに変換する</td>
</tr>
<tr>
<td>eval</td><td>SpELの式を評価する</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">



</p>
<div class="table">
<a name="N13DAE"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;formタグ一覧</b>
</p>
<div class="table-contents">
<table summary="formタグ一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>タグ名</th><th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>form</td><td>HTMLのタグ&lt;form&gt;に相当し、Commandと関連づける
</td>
</tr>
<tr>
<td>errors</td><td>フィールドエラーのメッセージを出力する</td>
</tr>
<tr>
<td>label</td><td>HTMLのタグ&lt;label&gt;に相当し、フィールドごとに設定する</td>
</tr>
<tr>
<td>input</td><td>HTMLのタグ&lt;input type="text"&gt;を出力する
</td>
</tr>
<tr>
<td>hidden</td><td>HTMLのタグ&lt;input type="hidden"&gt;を出力する
</td>
</tr>
<tr>
<td>textarea</td><td>HTMLのタグ&lt;textarea&gt;を出力する</td>
</tr>
<tr>
<td>password</td><td>HTMLのタグ&lt;input type="password"&gt;を出力する</td>
</tr>
<tr>
<td>checkbox</td><td>指定した値の型を文字列に変換する</td>
</tr>
<tr>
<td>checkboxes</td><td>HTMLのタグ&lt;input type="checkbox"&gt;を出力する</td>
</tr>
<tr>
<td>radiobutton</td><td>HTMLのタグ&lt;input type="radio"&gt;を出力する</td>
</tr>
<tr>
<td>radiobuttons</td><td>Collectionなどから、タグ&lt;input type="radio"&gt;を出力する</td>
</tr>
<tr>
<td>select</td><td>HTMLのタグ&lt;select&gt;を出力する</td>
</tr>
<tr>
<td>option</td><td>HTMLのタグ&lt;option&gt;を出力する</td>
</tr>
<tr>
<td>options</td><td>Collectionなどから、タグ&lt;option"&gt;を出力する</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
</div>
<br>
<br>
<a name="tubame_3."></a>
<h2 class="title">3.移行戦略</h2>
<br>
<a name="tubame_3.1." id="category_211"></a>
<h3 class="title">3.1.Modelの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>移行元のアプリケーションにおいて、Modelがどのように実装されているか、特にActionFormをそのままビジネスロジックに渡していないか等を調査する。ActionFormは、org.apache.struts.action.ActionFormを拡張しているため、Model側でStruts1に依存していることとなる。したがって、これを解消する方式を検討する必要がある。</p>
<p>また、移行元で利用していた製品・ライブラリ等は古いことが予想されるため、バージョンアップも念頭に置いて検討する。</p>
<p>ActionFormをそのまま渡していない、移行元で利用していたビジネスロジック層の製品・ライブラリの仕様に問題が無い場合は、基本的にそのまま利用する。</p>
</div>
<br>
<br>
<a name="tubame_3.2." id="category_332"></a>
<h3 class="title">3.2.Controllerの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>ActionServlet、ActionMapping、RequestProcessorなどについて、Strutsが提供するものをそのまま利用している場合はそのまま移行先のフレームワークで相当する機能に置き換える。</p>
<p>Strutsが提供するものを拡張している場合は、その拡張が移行先のフレームワークでも必要か、また実装が可能かを検討する。</p>
</div>
<br>
<br>
<a name="tubame_3.3." id="category_212"></a>
<h3 class="title">3.3.Viewの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>移行元のアプリケーションにおいて、Viewがどのように実装されているかを調査する。確実に移行しなければならないStruts
TaglibやStruts EL、Struts
Tilesの利用状況、その他に利用しているテンプレートライブラリと移行先における利用可否について十分に調査を行う。
</p>
<p>
Viewの移行方針としては、アプリケーションの規模・複雑さなどにも依るが、以下の順番での移行を標準として考える。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>テンプレートエンジンの利用</p>
</li>
<li class="listitem">
<p>移行先フレームワーク独自のタグの利用</p>
</li>
<li class="listitem">
<p>JSTLの利用</p>
</li>
</ul>
</div>
<p>

上記の理由としては、テンプレートエンジンを利用することでViewとMVCフレームワークを分離し、今後も発生すると思われる移行時にもViewの独立性を高めることができると考えられる。そのため、極力独自タグの利用は控える。レイアウトが単純である、同じような画面がないなど簡単なViewしかもたないものであれば、あえてテンプレートエンジンを利用せず、開発生産性を考慮して独自タグも積極的に利用していくことも考える。
</p>
</div>
<br>
<br>
<a name="tubame_4."></a>
<h2 class="title">4.Modelの移行</h2>
<br>
<a name="tubame_5."></a>
<h2 class="title">5.Controllerの移行</h2>
<br>
<a name="tubame_5.1." id="category_508"></a>
<h3 class="title">5.1.ActionServlet</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>ActionServletは、MVC2モデルにおいてコントローラの役割を担うものである。ActionServletは設定ファイル（struts-config.xml）を読み込み、どのモジュールに処理を振り分けるかを判断する。</p>
</div>
<br>
<br>
<a name="tubame_5.2." id="category_455"></a>
<h3 class="title">5.2.ActionServletの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1のActionServletに相当するSpringMVCのクラスはorg.sprintframework.web.servlet.DispatcherServletとなる。</p>
<p>ActionServletを独自に拡張している場合は、その拡張の必要性、DispatchServletでの実装可否について十分検討を行う。</p>
</div>
<br>
<br>
<a name="tubame_5.3." id="category_509"></a>
<h3 class="title">5.3.ActionMapping</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="actionMapping"></a>
ActionMappingクラスは、struts-config.xmlのaction-mappingsタグに定義された各actionタグに設定された情報を保持するクラスである。ActionServletの初期化時にstruts-config.xmlから読み込まれ、リクエスト処理時にActionServletからRequestProcessorに渡され、RequestProcessor内でリクエストパスから該当するactionの情報を保持するActionMappingクラスのインスタンスが取得される。
ActionMappingクラスでは、主に以下の情報を保持している。
</p>
<div class="table">
<a name="tableActionMaping"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;ActionMappingが保持する情報（一部抜粋）</b>
</p>
<div class="table-contents">
<table summary="ActionMappingが保持する情報（一部抜粋）" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>forward</td><td>RequestDispatcher.forward()によって呼び出され、モジュール相対URIを指定する。この属性が設定されている場合、type属性で指定したActionクラスの生成や呼び出しは実行されない。 forward属性、include属性、type属性のうち、いずれか一つは必ず設定する必要がある</td>
</tr>
<tr>
<td>include</td><td>RequestDispatcher.include()によって呼び出され、リクエストを処理するサーブレットやJSPのコンテキスト相対パスを指定する。その他の説明はforwardと同様</td>
</tr>
<tr>
<td>input</td><td>入力値検証機能でエラーが発生した時に、遷移するJSPのパスをモジュール相対URIで指定する</td>
</tr>
<tr>
<td>name</td><td>ActioForm beanの名前。form-beanタグのname属性に対応する</td>
</tr>
<tr>
<td>parameter</td><td>このActionに特定のリクエストパラメータを渡したい時に使用する</td>
</tr>
<tr>
<td>path</td><td>/で始まるこの設定のActionのパスを、 モジュール相対URIで指定する</td>
</tr>
<tr>
<td>scope</td><td>ActionFormを取り出すスコープを「request」または「session」で指定する。デフォルトは「session」</td>
</tr>
<tr>
<td>type</td><td>この設定で呼び出されるActionクラスを指定する</td>
</tr>
<tr>
<td>unknown</td><td>このアクションをモジュールのデフォルトアクションとする場合、trueを設定。リクエストにマッチするpathが定義されていない場合、このマッピングが利用される</td>
</tr>
<tr>
<td>validate</td><td>入力値検証機能を使用する（validate()メソッドを実行する）場合はtrueを指定する。デフォルトはtrue</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_5.3.1." id="category_510"></a>
<h3 class="title">5.3.1.ActionMappingでのワイルドカード利用</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Struts1.2以降では、pathに以下の特殊文字を利用可能となっている。

</p>
<div class="table">
<a name="N156DF"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;pathで利用可能な特殊文字</b>
</p>
<div class="table-contents">
<table summary="pathで利用可能な特殊文字" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>特殊文字</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td><td>/（スラッシュ）を除く0以上の文字にマッチ</td>
</tr>
<tr>
<td>**</td><td>/（スラッシュ）を含む0以上の文字にマッチ</td>
</tr>
<tr>
<td>\（バックスラッシュ）</td><td>エスケープシーケンスとして利用。\*は「*」、\\は「\」にマッチ</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
<div class="figure">
<a name="N156FC"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;ワイルドカード利用例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
path="/edit*"
</pre>
</div>
</div>
<p>
<br class="figure-break">
と書かれている場合は、/editSubscriptionや/editRegistrationなどにマッチする。しかし、/editSubscription/addにはマッチしない。また、「*」でマッチした文字列は{N}で取り出すことができる。上記例では、{1}により「Subscription」や「Registration」を取り出すことができる。「*」を複数記述している場合は、順番に{1}、{2}として取り出すことができる。
</p>
<p>
この{N}記法は、actionタグの以下の属性で利用することができる。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>attribute</p>
</li>
<li class="listitem">
<p>catalog</p>
</li>
<li class="listitem">
<p>command</p>
</li>
<li class="listitem">
<p>forward</p>
</li>
<li class="listitem">
<p>include</p>
</li>
<li class="listitem">
<p>input</p>
</li>
<li class="listitem">
<p>multipartClass</p>
</li>
<li class="listitem">
<p>name</p>
</li>
<li class="listitem">
<p>parameter</p>
</li>
<li class="listitem">
<p>prefix</p>
</li>
<li class="listitem">
<p>roles</p>
</li>
<li class="listitem">
<p>suffix</p>
</li>
<li class="listitem">
<p>type</p>
</li>
</ul>
</div>
<p>

actionタグにネストしたforwardタグでは、以下の属性で利用することができる。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>catalog</p>
</li>
<li class="listitem">
<p>command</p>
</li>
<li class="listitem">
<p>path</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.3.2." id="category_511"></a>
<h3 class="title">5.3.2.ActionMappingの継承</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1.3以降では、actionタグのextends属性に、別のactionタグのpath属性値を指定することで、指定されたpath属性値を含むactionタグの属性値を継承することができる。例えば、ベースとなるactionタグとしてpath="//base"のようにアクセスできないパスを指定しておき、これをextendsに指定して利用する（Struts
Appsに含まれるMailReaderサンプルアプリケーションを参照）。
</p>
</div>
<br>
<br>
<a name="tubame_5.4." id="category_512"></a>
<h3 class="title">5.4.RequestProcessor</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>RequestProcessorは、リクエスト処理の中核をなすクラスであり、リクエストに対応するActionの選定やActionから返却されたActionForwardオブジェクトに設定された遷移先への遷移など、リクエストの前処理から後処理までを行う。
</p>
<p>
Struts1.3.xではChain of Responsibility（CoR）を実装したCommons
Chainを使用するComposableRequestProcessorがデフォルトとなっている。ComposableRequestProcessorでは、設定ファイル（chain-config.xml）に使用するCommandを指定することで、リクエスト処理をカスタマイズすることができる。提供されるCommandの一覧は、以下を参照
</p>
<div class="table">
<a name="N15757"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;標準Command一覧</b>
</p>
<div class="table-contents">
<table summary="標準Command一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Command名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SelectLocale</td><td>リクエストのロケールを選択する</td>
</tr>
<tr>
<td>SetOriginalURI</td><td>オリジナルリクエストのURIを格納する</td>
</tr>
<tr>
<td>RequestNoCache</td><td>必要に応じて、"Pragma", "Cache-Control", "Expire"ヘッダを設定する</td>
</tr>
<tr>
<td>RemoveCachedMessages</td><td>セッションに格納されたメッセージを削除する</td>
</tr>
<tr>
<td>SetContentType</td><td>デフォルトのコンテンツタイプを設定する</td>
</tr>
<tr>
<td>SelectAction</td><td>パスに関連したActionMappingを決定する</td>
</tr>
<tr>
<td>AuthorizeAction</td><td>指定されたロールを持つユーザからのアクセスのみ受け付ける</td>
</tr>
<tr>
<td>CreateActionForm</td><td>マッピングに関連するActionFormをインスタンス化して、適切なスコープに配置する</td>
</tr>
<tr>
<td>PopulateActionForm</td><td>このリクエストに関連したActionFormを取り込む</td>
</tr>
<tr>
<td>ValidateActionForm</td><td>このリクエストに関連したActionFormのバリデーションを実行する</td>
</tr>
<tr>
<td>SelectInput</td><td>バリデーションが失敗したとき、入力ページに返るために適切なForwardConfigを選択する</td>
</tr>
<tr>
<td>ExecuteCommand</td><td>ActionConfigに設定がある場合、指定されたCommandを実行する</td>
</tr>
<tr>
<td>SelectForward</td><td>forwardする</td>
</tr>
<tr>
<td>SelectInclude</td><td>インクルードするuriを選択する</td>
</tr>
<tr>
<td>PerformInclude</td><td>選択されたuriをインクルードする</td>
</tr>
<tr>
<td>CreateAction</td><td>ActionMappingに指定されたクラスをインスタンス化する</td>
</tr>
<tr>
<td>ExecuteAction</td><td>Actionのexecuteメソッドを実行する</td>
</tr>
<tr>
<td>ExecuteForwardCommand</td><td>ForwardConfigに設定がある場合、指定されたCommandを実行する</td>
</tr>
<tr>
<td>PerformForward</td><td>指定されたForwardConfigに基づき、forwardもしくはredirectする</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">
RequestProcessorを変更する場合は、struts-config.xmlのcontrollerタグのprocessorClass属性に利用するクラスを設定する。
</p>
<p>
Struts1.2でTilesを処理する場合は、RequestProcessorのサブクラスであるTilesRequestProcessorを使用する必要があったが、Struts1.3.xではCommandを指定するだけで良い。Tilesで提供されるCommandの一覧は、以下参照。

</p>
<div class="table">
<a name="N157C6"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;Tiles Command一覧</b>
</p>
<div class="table-contents">
<table summary="Tiles Command一覧" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Command名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>TilesPreProcessor</td><td>Struts 1.3.xでTilesRequestProcessorの役割を担うCommandクラス</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
<p>
RequestProcessorで行われていた処理とCommandの対比は、以下のファイルを参照。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-1.3.10/docs/userGuide/building_controller.html#a4.2.2_Where_did_they_go
</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.5." id="category_456"></a>
<h3 class="title">5.5.RequestProcessorの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>RequestProcessorについては、特に移行については考慮せず、SpringMVCのデフォルトの設定をそのまま用いれば良いと考えられる。ただし、RequestProcessorを独自に拡張している場合は、移行後の環境でも、同等な機能が必要かどうかを検討し、
必要な場合は、同等な機能をSpringMVCで実装可能か検討する必要がある。
</p>
<p>

SpringMVCにおいてRequestProcessorに相当するViewResolver（Controllerから返却されたView名に対応する実際の遷移先を決定）/
HandlerMapping（リクエストURLとControllerのマッピングを管理）での実装の可否や必要性について、十分検討を行う。以下では、ViewResolver/HandlerMappingについて説明する。


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
<a name="viewResolver"></a>ViewResolver</p>
<p>
Struts1のRequestProcessorはモジュールにつき１つ定義できたが、SpringMVCのViewResolverは複数定義することが可能で、優先度を設定することもできる。通常はInternalResourceViewResolverを設定するのみで十分と考えられる。
以下にservlet-context.xmlへの複数ViewResolver設定例を示す。ViewResolver設定でpropertyのname属性の値で優先度を設定可能.

</p>
<div class="figure">
<a name="N15289"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;ViewResolver設定例(抜粋)</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;property name="order" value="0" /&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N15294"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;ViewResolver設定例(全体)</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;beans ...&gt;
    &lt;bean class="org.springframework.web.servlet.view.XmlViewResolver"&gt;
        &lt;property name="location"&gt;
            &lt;value&gt;/WEB-INF/spring-views.xml&lt;/value&gt;
        &lt;/property&gt;
        &lt;property name="order" value="0" /&gt;
    &lt;/bean&gt;
 
    &lt;bean class="org.springframework.web.servlet.view.ResourceBundleViewResolver"&gt;
        &lt;property name="basename" value="spring-views" /&gt;
        &lt;property name="order" value="1" /&gt;
    &lt;/bean&gt;
 
    &lt;bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" &gt;
        &lt;property name="prefix"&gt;
            &lt;value&gt;/WEB-INF/pages/&lt;/value&gt;
        &lt;/property&gt;
        &lt;property name="suffix"&gt;
            &lt;value&gt;.jsp&lt;/value&gt;
        &lt;/property&gt;
	&lt;property name="order" value="2" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

JSPファイルの置き場所は、Struts1で「Webアプリケーションのルートディレクトリ/モジュールディレクトリ」がベースとなるが、SpringMVCではViewResolverの実装・設定によって配置場所が変わる。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>（ <span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-viewresolver-resolver" target="_top">http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-viewresolver-resolver</a></strong></span>）。
</p>
</li>
</ul>
</div>
<p>


</p>
</li>
<li class="listitem">
<p>HandlerMapping</p>
<p>HandlerMappingは、通常はRequestMappingHandlerMappingを利用する。その他のHandlerMapping実装には、SimpleUrlHandlerMapping（設定ファイルにマッピングを記述する）、ControllerClassNameHandlerMapping（Controllerのクラス名からマッピングを生成する）などがある。通常は、RequestMappingHandlerMappingを使用（servlet-context.xmlに&lt;mvc:annotation-driven/&gt;を指定）すれば十分と考えられる。</p>
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.6." id="category_513"></a>
<h3 class="title">5.6.ActionForm Bean</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="actionFormBean"></a>ActionForm Beanはフォーム画面から送られてくるデータの受け渡し、Modelとのデータ受け渡しなどに利用する。ActionForm Beanには、org.apache.struts.action.ActionFormクラスを拡張したクラスで、フォーム画面の要素に対応するフィールド、フィールドのsetter/getter、「入力値の検証」で説明されているvalidate()メソッドなどを実装する。

</p>
<p>ActionForm Beanは、struts-config.xmlのform-beansタグの子要素としてform-beanタグで定義し、action-mappingsタグの子要素であるactionタグによりActionクラスと結びつけられる。</p>
</div>
<br>
<br>
<a name="tubame_5.6.1." id="category_560"></a>
<h3 class="title">5.6.1.入力値の検証</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
入力値の検証の詳細については、以下のURLを参照。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-1.3.10/docs/faqs/validator.html</p>
</li>
</ul>
</div>
<p>
以下では、struts validatorを使う場合と独自の検証ロジックを使う場合について説明する。
</p>
</div>
<br>
<br>
<a name="tubame_5.6.1.1." id="category_561"></a>
<h3 class="title">5.6.1.1.struts validator（commons-validator）で検証</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>struts validatorを使用する場合は、通常ValidatorFormを拡張したActionFormクラスを作成する。
ValidatorFormにはorg.apache.struts.validator.ValidatorActionFormというサブクラスが存在する。
</p>
<p>
親クラスであるValidatorFormを使用する場合、validation.xmlのformタグに設定するname属性にはstruts-config.xmlのform-beanタグのname属性と同じ値を設定する。
これに対してValidatorActionFormの場合は、validation.xmlのformタグのname属性には、struts-config.xmlのactionタグのpath属性と同じ値を設定するため、パスごとに異なる検証ルールを適用したい場合に利用する。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>DynaActionFormで入力値を検証する場合</p>
<p>
DynaValidatorForm（ValitatorFormに相当）、もしくはDynaValidatorActionForm（ValidatorActionFormに相当）を利用する
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://www.techscore.com/tech/Java/ApacheJakarta/Struts/16/" target="_top">http://www.techscore.com/tech/Java/ApacheJakarta/Struts/16/</a></strong></span>

</p>
</li>
</ul>
</div>
<p>

</p>
</li>
<li class="listitem">
<p>Lazy ActionFormで入力値を検証する場合</p>
<p>LazyValidatorForm（ValidatorFormに相当）を利用する</p>
</li>
</ul>
</div>
<p>
以下ではstruts validatorで検証を行う場合は、設定手順を示す。

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>org.apache.struts.validator.ValidatorFormを拡張したActionForm
Beanを作成する
</p>
<div class="figure">
<a name="N15C39"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Form Bean</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class UserInfo extends ValidatorForm {
    private String username;
    private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
<div class="figure">
<a name="N15C43"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Actionクラス</b>
</p>
<div class="figure-contents">
<pre class="programlisting">

public class ExtraTest2 extends Action{
    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("success");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSPを作成する</p>
<p>&lt;html:errors&gt;もしくは、&lt;html:messages&gt;を利用して、検証結果のメッセージを表示する。
</p>
<p>&lt;html:errors&gt;を利用する場合（&lt;html:errors/&gt;とのみ記述した場合）、propertyを記述しないと検証でエラーとなった項目に関するすべてのエラーが表示される（2件エラーが発生していた場合は、その2件に関するエラーが出力される）。したがって、複数項目の検証を行っている場合で項目ごとにエラーメッセージを出力する場合は、下記サンプルのように&lt;html:errors&gt;にproperty属性を指定してメッセージを出力する。
もしくは、&lt;html:messages&gt;を用いてメッセージを取得し、&lt;bean:write&gt;で出力することもできる。</p>
<div class="figure">
<a name="N15C54"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;JSPファイル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;
&lt;html&gt;
&lt;body&gt;
&lt;h1&gt;Struts 1 localization example&lt;/h1&gt;
&lt;html:form action="/validateUser.do"&gt;
    &lt;html:errors property="username"/&gt;&lt;p&gt;
    &lt;bean:message key="global.username"/&gt;
    &lt;html:text property="username"/&gt;&lt;p&gt;
    &lt;html:errors property="password"/&gt;&lt;p&gt;
    &lt;bean:message key="global.password"/&gt;
    &lt;html:password property="password"/&gt;&lt;p&gt;
    &lt;html:submit&gt;&lt;bean:message key="global.submit"/&gt;&lt;/html:submit&gt;
&lt;/html:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
<p>
&lt;html:messages&gt;を使った場合のエラーメッセージ表示例
</p>
<div class="figure">
<a name="N15C60"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;&lt;html:messages&gt;サンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:messages id="msg2" property="password"&gt;
    &lt;bean:write name="msg2"/&gt;&lt;p&gt;
&lt;/html:messages&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

クライアントで入力値の検証を行う場合は、formのJSPに&lt;html:javascript&gt;タグを含め、&lt;html:form&gt;にonsubmit属性を設定する。

</p>
<div class="figure">
<a name="htmlJavaScript"></a>
<p class="title">
<b>Figure&nbsp;5.&nbsp;javascriptタグサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;head&gt;
&lt;html:javascript formName="userinfo "/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Struts 1 localization example&lt;/h1&gt;
&lt;html:form action="/validateUser.do" onsubmit="return validateUserinfo(this)"&gt;
    &lt;html:errors property="username"/&gt;&lt;p&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

上記の例では、&lt;html:javascript&gt;のformNameに3.で作成するvalidation.xmlの&lt;form&gt;のname属性に設定した値を指定し、&lt;html:form&gt;のonsubmitに指定した関数名は「validate」＋「&lt;struts-config.xmlの&lt;form-bean&gt;のname属性値（ただし先頭を大文字にする）」となる。7.では&lt;form-bean&gt;のname属性値を「userinfo」としているので、onsubmitに指定する関数名が「vaidateUserinfo」となっている。
</p>
</li>
<li class="listitem">
<p>検証ルールを定義する（ファイルは/WEB-INF/validation.xmlとする）

</p>
<div class="figure">
<a name="N15C7A"></a>
<p class="title">
<b>Figure&nbsp;6.&nbsp;検証ルールサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form-validation&gt;
    &lt;formset&gt;
        &lt;form name="userinfo"&gt;
            &lt;field property="username" depends="required"&gt;
                &lt;msg name="required" key="username.required" bundle="validate"/&gt;
            &lt;/field&gt;
            &lt;field property="password" depends="required"&gt;
                &lt;msg name="required" key="password.required" bundle="validate"/&gt;
            &lt;/field&gt;
        &lt;/form&gt;
    &lt;/formset&gt;
&lt;/form-validation&gt;
</pre>
</div>
</div>
<br class="figure-break">
<p>&lt;msg&gt;はエラーメッセージを生成するときに使用するメッセージリソースのキーを指す。
また、&lt;msg&gt;にbundle属性を追加することで、異なるメッセージリソースからメッセージを取得することができる。
</p>
</li>
<li class="listitem">
<p>ValidatorPluginを有効にする(struts-config.xmlに設定を追加する）</p>
<p>
「3.検証ルールを定義する」で作成したvalidation.xmlをValidatorPluginに登録する

</p>
<div class="figure">
<a name="N15C8B"></a>
<p class="title">
<b>Figure&nbsp;7.&nbsp;ValidatorPluginルール適用サンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;plug-in className="org.apache.struts.validator.ValidatorPlugIn"&gt;
  &lt;set-property property="pathnames" 
   value="/org/apache/struts/validator/validator-rules.xml,
   /WEB-INF/validation.xml"/&gt;
&lt;/plug-in&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
<li class="listitem">
<p>&lt;controller&gt;設定を変更する（struts-config.xmlに設定を追加する）</p>
<div class="figure">
<a name="N15C99"></a>
<p class="title">
<b>Figure&nbsp;8.&nbsp;controller設定サンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;controller inputForward="true" /&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>&lt;action&gt;を設定する</p>
<div class="figure">
<a name="N15CA6"></a>
<p class="title">
<b>Figure&nbsp;9.&nbsp;action設定サンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/validateUser" name="userinfo" type="org.sample.struts1.extra.ExtraTest2" input="input"&gt;
    &lt;forward name="input" path="/login.do"/&gt;
    &lt;forward name="success" module="/" path="/WEB-INF/welcome.jsp"/&gt;
&lt;/action&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>&lt;form-bean&gt;を設定する</p>
<div class="figure">
<a name="N15CB3"></a>
<p class="title">
<b>Figure&nbsp;10.&nbsp;form-bean設定サンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form-beans&gt;
    &lt;form-bean name="userinfo" type="org.sample.struts1.extra.UserInfo"/&gt;
&lt;/form-beans&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>メッセージリソースを作成する</p>
<p>
「3.検証ルールを定義する」で
作成したvalidation.xmlでkeyに設定したキーを持つメッセージリソースファイルを作成する。
</p>
<div class="figure">
<a name="N15CC2"></a>
<p class="title">
<b>Figure&nbsp;11.&nbsp;メッセージリソースファイルサンプル（org/sample/struts1/extra/ExtraTest2.properties）
</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form-beans&gt;
    &lt;form-bean name="userinfo" type="org.sample.struts1.extra.UserInfo"/&gt;
&lt;/form-beans&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</li>
<li class="listitem">
<p>メッセージリソースの設定を行う</p>
<p>struts-config.xmlに、メッセージリソースファイルを登録する（太字部分を参照）。validation.xmlで&lt;msg&gt;のbundle属性に指定された値を&lt;message-resources&gt;のkey属性に登録する。

</p>
<div class="figure">
<a name="N15CD2"></a>
<p class="title">
<b>Figure&nbsp;12.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
username.required = Username is required
password.required = Password is required
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
</ol>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.6.1.2." id="category_562"></a>
<h3 class="title">5.6.1.2.独自の検証ロジックで検証</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>複数項目間のチェックは、Struts
Validatorのvalidwhenを使用しても実現することはできるが、より柔軟な検証を行いたい場合は、以下の手順により独自の検証ロジックを作成する。
</p>
<p>
入力値の検証を独自のロジックで行う場合は、org.apache.struts.action.ActionFormを拡張したActionFormを作成し、オーバーライドしたvalidate()メソッド内で独自の検証ロジックを実装する。
上記のstruts validator（commons-validator）で利用したサンプルを以下のように修正する。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>ActionFormクラス（validateメソッドを追加）

</p>
<div class="figure">
<a name="N15CFF"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;ActionFormクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Override
public ActionErrors validate(ActionMapping mapping,
        javax.servlet.http.HttpServletRequest request) {
    ActionErrors errors = new ActionErrors();
    if("".equals(getUsername())) {
        errors.add("username", new ActionMessage("username.required"));
    }
    if("".equals(getPassword())) {
        errors.add("password", new ActionMessage("password.required"));           
    }
    return errors;
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
<li class="listitem">
<p>JSPファイル

</p>
<div class="figure">
<a name="N15D0D"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;JSPファイル（login.jsp）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/validateUser.do"&gt;
    &lt;html:errors property="username" bundle="validate"/&gt;&lt;p&gt;
    &lt;bean:message key="global.username"/&gt;
    &lt;html:text property="username"/&gt;&lt;p&gt;
    &lt;html:errors property=" password" bundle="validate"/&gt;&lt;p&gt;
    &lt;bean:message key="global.password"/&gt;
    &lt;html:password property="password"/&gt;&lt;p&gt;
    &lt;html:submit&gt;&lt;bean:message key="global.submit"/&gt;&lt;/html:submit&gt;
&lt;/html:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

&lt;message-resources&gt;のkey属性が「validate」として設定されているため、上記のstruts validator（commons-validator）で利用したサンプルのlogin.jspに以下の太字部分を追記する（struts validatorを使用する場合は、validation.xmlの&lt;msg&gt;でbundleを指定しているが、独自の検証ロジックを使用する場合はJSPファイル内でbundleを指定する必要がある）。
</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.6.2." id="category_514"></a>
<h3 class="title">5.6.2.ActionFormクラスのユーティリティメソッド</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
ActionFormクラスには、以下の 「ActionFormクラスのメソッド一覧（publicメソッド）」と
「ActionFormクラスのメソッド一覧（protectedメソッド）」に示すユーティリティメソッドが定義されている。

</p>
<div class="table">
<a name="N157FB"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;ActionFormクラスのメソッド一覧（publicメソッド）</b>
</p>
<div class="table-contents">
<table summary="ActionFormクラスのメソッド一覧（publicメソッド）" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>メソッド名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>getMultipartRequestHandler()</td><td>このフォームのMultipartRequestHandlerを返す</td>
</tr>
<tr>
<td>getServletWrapper()y</td><td>関連づけられているサーブレットのインスタンスをActionServletWrapperとして返す</td>
</tr>
<tr>
<td>reset(ActionMapping mapping,
javax.servlet.http.HttpServletRequest request)
</td><td rowspan="2">Beanのすべてのプロパティを必要に応じてデフォルトの状態にリセットする</td>
</tr>
<tr>
<td>reset(ActionMapping mapping,
javax.servlet.ServletRequest request)
</td>
</tr>
<tr>
<td>setMultipartRequestHandler(
MultipartRequestHandler multipartRequestHandler)
</td><td>ファイルアップロードの処理に使うために提供されるHandlerを設定する</td>
</tr>
<tr>
<td>setServlet(ActionServlet servlet)</td><td>関連づけられているサーブレットのインスタンスをセットする</td>
</tr>
<tr>
<td>validate(ActionMapping mapping,
javax.servlet.http.HttpServletRequest request)
</td><td>HTTPリクエストにセットされているプロパティの妥当性を検証し、 見つかったすべての検証エラーをカプセル化したActionErrorsオブジェクトを返す</td>
</tr>
<tr>
<td>validate(ActionMapping mapping, 
javax.servlet.ServletRequest request)
</td><td>非HTTPリクエストにセットされているプロパティの妥当性を検証し、 見つかったすべての検証エラーをカプセル化したActionErrorsオブジェクトを返す</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
<div class="table">
<a name="N15830"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;ActionFormクラスのメソッド一覧（protectedメソッド）</b>
</p>
<div class="table-contents">
<table summary="ActionFormクラスのメソッド一覧（protectedメソッド）" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>メソッド名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>getServlet()</td><td>関連づけられているサーブレットのインスタンスを返す</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">



</p>
</div>
<br>
<br>
<a name="tubame_5.6.3." id="category_515"></a>
<h3 class="title">5.6.3.DynaActionForm</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
DynaActionForm
Beanは、通常のActionFormのようにBeanをコーディングするのではなく、struts-config.xmlで設定するだけで利用可能なActionForm
Beanである。
例えば、以下のように定義する。


</p>
<div class="figure">
<a name="N1584F"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;DynaActionForm定義例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form-bean
    name="UserForm"
    type="org.apache.struts.action.DynaActionForm"&gt;
    &lt;form-property
        name="givenName"
        type="java.lang.String"
        initial="John"/&gt;
    &lt;form-property
        name="familyName"
        type="java.lang.String"
        initial="Smith"/&gt;
&lt;/form-bean&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">
DynaActionFormがサポートする型は、以下の通りとなる。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>java.math.BigDecimal</p>
</li>
<li class="listitem">
<p>java.math.BigInteger</p>
</li>
<li class="listitem">
<p>boolean とjava.lang.Boolean</p>
</li>
<li class="listitem">
<p>byte とjava.lang.Byte</p>
</li>
<li class="listitem">
<p>java.lang.Class</p>
</li>
<li class="listitem">
<p>double とjava.lang.Double</p>
</li>
<li class="listitem">
<p>float とjava.lang.Float</p>
</li>
<li class="listitem">
<p>int とjava.lang.Integer</p>
</li>
<li class="listitem">
<p>long とjava.lang.Long</p>
</li>
<li class="listitem">
<p>short とjava.lang.Short</p>
</li>
<li class="listitem">
<p>java.lang.String</p>
</li>
<li class="listitem">
<p>java.sql.Date</p>
</li>
<li class="listitem">
<p>java.sql.Time</p>
</li>
<li class="listitem">
<p>java.sql.Timestamp</p>
</li>
</ul>
</div>
<p>
また、これらの型の配列や、HashMap、ArrayListなども指定できる。
JSPからDynaActionFormにアクセスするには、Struts Taglibを使用している場合は通常のActionForm Beanと同じ、Struts ELを使用している場合は、${dynabean.map.foo}（fooプロパティにアクセスする場合）のように行う。
Action内でDynaActionFormにアクセスするには、Actionクラスのexecute()メソッドで受け取るActionForm型の引数をDynaActionFormでキャストし、各プロパティへアクセスする。

</p>
</div>
<br>
<br>
<a name="tubame_5.6.4." id="category_516"></a>
<h3 class="title">5.6.4.Lazy ActionForm</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Lazy ActionFormはCommons BeanUtilsのLazyDynaBeanをラップしたものである。
Lazy ActionFormでは、struts-config.xmlにプロパティを定義しなくても、自動的にプロパティが生成される。このActionFormを利用するActionでは、プロパティがあることを期待して利用することができる。
詳細については、以下のURLを参照。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<a class="link" href="http://www.niallp.pwp.blueyonder.co.uk/lazyactionform.html" target="_top">http://www.niallp.pwp.blueyonder.co.uk/lazyactionform.html</a>

</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.6.5." id="category_517"></a>
<h3 class="title">5.6.5.Map-backed ActionForm</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
動的に生成されるプロパティ（入力フィールドなど）に対応するため、Struts1では「Map-backed/List-backed
ActionForm」という機能を提供している。
これを使うことで、ActionForm側ではMapやListでデータを受け付けることができる。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-1.3.10/docs/userGuide/building_controller.html#map_action_form_classes
</p>
</li>
</ul>
</div>
<p>

以下では、Mapを利用するサンプルを示す。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>入力用JSP</p>
<p>
タグhtml:textのproperty属性で「value(input_${i})」とあるが、この「value」がActionFormクラスのsetValue()メソッドに対応する。「input_${i}」がMapのkeyとなり、タグhtml:textで表示されたタグinput
type=textのｖａｌｕｅ属性値がＭａｐのｖａｌｕｅとなる。
</p>
<div class="figure">
<a name="N158B1"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;入力用JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;
&lt;html&gt;
&lt;body&gt;
&lt;html:form action="/test3-input"&gt;
    &lt;c:forEach var="i" begin="1" end="2" step="1"&gt;
        &lt;html:text property="value(input_${i})"/&gt;&lt;p&gt;
    &lt;/c:forEach&gt;
    &lt;html:submit/&gt;
&lt;/html:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>出力用JSP</p>
<p>この例では、参考のためタグlogic:iterateとタグc:forEachを用いたMapアクセスを示している。
</p>
<div class="figure">
<a name="N158C0"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;出力用JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;logic:iterate name="result" id="data"&gt;
        &lt;bean:write name="data" property="key"/&gt; : &lt;bean:write name="data" property="value"/&gt;&lt;p&gt;
    &lt;/logic:iterate&gt;
    &lt;c:forEach items="${result}" var="data"&gt;
        ${data.key} : ${data.value}&lt;p&gt;
    &lt;/c:forEach&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Actionクラス</p>
<div class="figure">
<a name="N158CD"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Actionクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class ExtraTest3 extends Action {
    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        MapBackedForm mbForm = (MapBackedForm)form;
        request.setAttribute("result", mbForm.getMap());
        
        return mapping.findForward("success");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>ActionFormクラス</p>
<p>ActionFormクラスでは、入力用JSPで示した「value(xxx)」に対応するメソッドとして、上述のsetValue(String
key, Object value)メソッドと、getValue(String key)メソッドの実装が必要となる。
</p>
<div class="figure">
<a name="N158DC"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;ActionFormクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MapBackedForm extends ActionForm implements Serializable {
    private Map&lt;String, Object&gt; values = new HashMap&lt;String, Object&gt;();
    public Map&lt;String, Object&gt; getMap() {
        return this.values;
    }
    public void setValue(String key, Object value) {
        this.values.put(key, value);
    }
    
    public Object getValue(String key) {
        return this.values.get(key);
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>struts設定</p>
<div class="figure">
<a name="N158E9"></a>
<p class="title">
<b>Figure&nbsp;5.&nbsp;struts設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;struts-config&gt;
    &lt;form-beans&gt;
        &lt;form-bean name="mapbacked" type="org.sample.struts1.extra.MapBackedForm"/&gt;
    &lt;/form-beans&gt;
    &lt;action-mappings&gt;
        &lt;action path="/test3" forward="/WEB-INF/test3.jsp"/&gt;
        &lt;action path="/test3-input" name="mapbacked" type="org.sample.struts1.extra.ExtraTest3"&gt;
            &lt;forward name="success" path="/WEB-INF/test3-result.jsp"/&gt;
        &lt;/action&gt;
    &lt;/action-mappings&gt;
&lt;/struts-config&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

上記の通り、Map-backed
ActionFormでは特殊なクラスの継承はないが、Mapデータを格納するプロパティ名、Mapデータを受け取るメソッド名に規約があるので、注意が必要となる。
なお、ActionFormを以下のように作成しても動作はするが、Mapに格納される値がString型の配列となるため、ActionクラスやJSP内で値を取り出す際に注意が必要となる。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<div class="figure">
<a name="N158F6"></a>
<p class="title">
<b>Figure&nbsp;6.&nbsp;Map-backed ActionFormサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MapBackedForm2 extends ActionForm implements Serializable {
    private Map&lt;String, Object&gt; values = new HashMap&lt;String, Object&gt;();

    public Map&lt;String, Object&gt; getValues() {
        return this.values;
    }
    
    public void setValues(Map&lt;String, Object&gt; values) {
        this.values = values;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.7." id="category_459"></a>
<h3 class="title">5.7.ActionForm Beanの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Struts1のActionFormに相当するSpringMVCのクラスは、@RequestMappingを付与したメソッドの引数に@ModelAttributeを付与したクラスとなる。このクラスは、単なるPOJOとして作成可能である。Struts1では、ActionFormクラスがユーティリティメソッドを提供している。これらをSpringMVCに移行した際に、どのように移行するかについては、下記の表を参照。

</p>
<div class="table">
<a name="N152BA"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;ActionFormクラスのユーティリティメソッド移行</b>
</p>
<div class="table-contents">
<table summary="ActionFormクラスのユーティリティメソッド移行" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>ActionFormクラスのメソッド名</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>getMultipartRequestHandler()</td><td rowspan="2">org.springframework.web.multipart.MultipartFileを使ってアップロードされたファイルを扱う場合、リクエスト処理終了時に、テンポラリファイルは削除されるため、これらのメソッドの移行は不要（DispatcherServlet#doDispatch()のfinally節でcleanupMultipart()が呼ばれ、この先でテンポラリファイルが削除されている）
</td>
</tr>
<tr>
<td>setMultipartRequestHandler(
MultipartRequestHandler
multipartRequestHandler)
</td>
</tr>
<tr>
<td>getServletWrapper()</td><td>SpringMVCではBeanからServletを取得することはできない</td>
</tr>
<tr>
<td>reset(ActionMapping mapping,
javax.servlet.http.HttpServletRequest request)
</td><td rowspan="2">SpringMVCではフォームデータがrequest
scopeに格納されるため、基本的には対処は不要
</td>
</tr>
<tr>
<td>reset(ActionMapping mapping,
javax.servlet.ServletRequest
request)
</td>
</tr>
<tr>
<td>setServlet(ActionServlet servlet)</td><td>SpringMVCではBeanからServletを設定することはできない</td>
</tr>
<tr>
<td>validate(ActionMapping mapping,
javax.servlet.http.HttpServletRequest request)
</td><td rowspan="2">Bean
Validationを利用するか、もしくは、org.springframework.validation.Validatorを実装したクラスでvalidate()を実装する
</td>
</tr>
<tr>
<td>validate(ActionMapping mapping,
javax.servlet.ServletRequest request)
</td>
</tr>
<tr>
<td>getServlet()</td><td>SpringMVCではBeanからServletを取得することはできない</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

Map-backed
ActionFormの移行例について、以下に示す。MapへのアクセスはStruts1とは異なり「value[%lt;key$gt;]」の形式となる。また、Bean側で、特殊なメソッドを用意する必要もない。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>入力用JSP</p>
<div class="figure">
<a name="N152F7"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;入力用JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %&gt;
&lt;html&gt;
&lt;body&gt;
&lt;form:form modelAttribute="value" action="${appUrl}/test3-input"&gt;
    &lt;c:forEach var="i" begin="1" end="2" step="1"&gt;
        &lt;form:input path="value[value-${i}]"/&gt;&lt;p&gt;
    &lt;/c:forEach&gt;
    &lt;input type="submit"&gt;
&lt;/form:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>出力用JSP</p>
<div class="figure">
<a name="N15304"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;出力用JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;c:forEach items="${result}" var="data"&gt;
        ${data.key} : ${data.value}&lt;p&gt;
    &lt;/c:forEach&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Controllerクラス</p>
<div class="figure">
<a name="N15311"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Controllerクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
public class ExtraTest3 {
    @RequestMapping(value="/test3", method = RequestMethod.GET)
    public String setup(Model model) {
        if(!model.containsAttribute("value")) {
            model.addAttribute("value", new MapBackedForm());
        }
        return "test3";
    }
    
    @RequestMapping(value="/test3-input", method=RequestMethod.POST)
    public ModelAndView execute(@ModelAttribute(value="value") MapBackedForm mbForm) {
        ModelAndView mav = new ModelAndView("test3-result");
        mav.addObject("result", mbForm.getValue());
        
        return mav;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>BEAN</p>
<div class="figure">
<a name="N1531E"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;BEANサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MapBackedForm implements Serializable {
    private Map&lt;String, String&gt; value = new HashMap&lt;String, String&gt;();
    
    public void setValue(Map&lt;String, String&gt; value) {
        this.value = value;
    }
    
    public Map&lt;String, String&gt; getValue() {
        return this.value;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.7.1." id="category_462"></a>
<h3 class="title">5.7.1.XDocletによるActionForm定義</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>XDocletでAction Formの設定が可能である。</p>
<p>@struts.formアノテーションがコメント中に記載されている場合、struts-config.xmlの内容が自動生成されるため、ActionFormの設定と同様の移行を検討する</p>
</div>
<br>
<br>
<a name="tubame_5.7.2." id="category_463"></a>
<h3 class="title">5.7.2.ActionFormクラスの提供するユーティリティメソッドの移行</h3>
<br>
<br>
<a name="tubame_5.7.2.1." id="category_464"></a>
<h3 class="title">5.7.2.1.ActionFormユーティリティメソッドgetMultipartRequestHandler/setMultipartRequestHandlerの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>org.springframework.web.multipart.MultipartFileを使ってアップロードされたファイルを扱う場合、リクエスト処理終了時に、テンポラリファイルは削除されるため、これらのメソッドの移行は不要</p>
</div>
<br>
<br>
<a name="tubame_5.7.2.2." id="category_465"></a>
<h3 class="title">5.7.2.2.ActionFormユーティリティメソッドgetServletWrapperの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではBeanからServletを取得することはできない</p>
</div>
<br>
<br>
<a name="tubame_5.7.2.3." id="category_466"></a>
<h3 class="title">5.7.2.3.ActionFormユーティリティメソッドresetの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではフォームデータがrequest scopeに格納されるため、基本的には対処は不要</p>
</div>
<br>
<br>
<a name="tubame_5.7.2.4." id="category_467"></a>
<h3 class="title">5.7.2.4.ActionFormユーティリティメソッドsetServletの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではBeanからServletを設定することはできない</p>
</div>
<br>
<br>
<a name="tubame_5.7.2.5." id="category_468"></a>
<h3 class="title">5.7.2.5.ActionFormユーティリティメソッドvalidateの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Bean Validationを利用するか、もしくは、org.springframework.validation.Validatorを実装したクラスでvalidate()を実装する</p>
</div>
<br>
<br>
<a name="tubame_5.7.2.6." id="category_469"></a>
<h3 class="title">5.7.2.6.ActionFormユーティリティメソッドgetServletの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではBeanからServletを取得することはできない</p>
</div>
<br>
<br>
<a name="tubame_5.7.3." id="category_470"></a>
<h3 class="title">5.7.3.Map-backed ActionFormの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>MapへのアクセスはStruts1とは異なり「value[&lt;key&gt;]」の形式となる。また、Bean側で、特殊なメソッドを用意する必要もない。</p>
</div>
<br>
<br>
<a name="tubame_5.8." id="category_518"></a>
<h3 class="title">5.8.Action</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Actionクラスでは、Formから渡されたデータ処理やビジネスロジックの呼び出し（もしくはビジネスロジックそのものをActionクラスに記述）を行い、結果としてActionForwardオブジェクト（JSPやTile定義、Velocityテンプレート、他のActionなど）を返却する。
</p>
<p>
Actionクラスの設定は、struts-config.xmlのaction-mappingsタグの子要素のactionタグで設定する。必須の属性はpathで、このActionにアクセスする際のパスをモジュール相対URIで指定する。
主な属性値は、<span class="command"><strong><a class="command" href="#tableActionMaping" title="Table&nbsp;1.&nbsp;ActionMappingが保持する情報（一部抜粋）">「Table 1. ActionMappingが保持する情報（一部抜粋）」</a></strong></span>を参照。Actionクラスはorg.apache.struts.action.Actionを拡張したクラスで、以下のメソッドをオーバーライドする。

</p>
<div class="figure">
<a name="N15913"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;org.apache.struts.action.Actionのオーバライド</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public ActionForward execute(ActionMapping mapping,
                    ActionForm form,
                    ServletRequest request,
                    ServletResponse response)
                    throws Exception;

public ActionForward execute(ActionMapping mapping,
                    ActionForm form,
                    HttpServletRequest request,
                    HttpServletResponse response)
                    throws Exception;
</pre>
</div>
</div>
<p>
<br class="figure-break">

通常、Actionクラスは一つのリクエストに対応付けられているが、Struts
Extrasに含まれるorg.apache.struts.actions.DispatchActionやそのサブクラスを拡張したクラスを作成することで、複数のリクエストに対応することが可能となる（詳細はDispatchActionのJavaDocを参照）。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Actionクラスを作成する際は、以下の点に注意する。</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>Actionはシングルトンのためスレッドセーフな実装にする</p>
</li>
<li class="listitem">
<p>キャッチした例外をスローしない</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>
組み込みActionクラスについては、
<span class="command"><strong><a class="command" href="#tableStrutsExtras" title="Table&nbsp;1.&nbsp;Struts Extras提供クラス一覧">「Table 1. Struts Extras提供クラス一覧」 </a></strong></span>

に記載されているクラスを参照。以下では、各Action実装について例を示す。
</p>
</div>
<br>
<br>
<a name="tubame_5.8.1." id="category_519"></a>
<h3 class="title">5.8.1.シンプルなAction</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-config.xmlのaction-mapping設定</p>
<div class="figure">
<a name="N1593E"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">

&lt;action path="/test1" type="org.sample.struts1.mapping.MappingTest1"&gt;
    &lt;forward name="success" path="/WEB-INF/forward.jsp" /&gt;
&lt;/action&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Actionクラス</p>
<div class="figure">
<a name="N1594B"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Actionクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MappingTest1 extends Action {
    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("success");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>struts-config.xmlのactionタグのforward設定</p>
<p>上記の例のように、単にJSPファイルを表示するだけの場合、以下のように設定のみで済ますこともできる。</p>
<div class="figure">
<a name="N1595A"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;actionタグのforward設定サンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/test1" forward="/WEB-INF/forward.jsp" /&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.8.2." id="category_520"></a>
<h3 class="title">5.8.2.DispatchAction</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
DispatchActionでは、actionタグのparameter属性に指定したパラメータ名とその値として指定されたメソッド名を利用する。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-config.xmlのaction-mapping設定</p>
<div class="figure">
<a name="N15975"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xmlサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/test2" forward="/WEB-INF/dispatchaction.jsp"/&gt;
&lt;action path="/test2-dispatch" type="org.sample.struts1.mapping.MappingTest2" name="test" parameter="execute"&gt;
    &lt;forward name="dispatch1" path="/WEB-INF/dispatch1.jsp" /&gt;
    &lt;forward name="dispatch2" path="/WEB-INF/dispatch2.jsp" /&gt;
&lt;/action&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Actionクラス</p>
<div class="figure">
<a name="N15982"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Actionクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MappingTest2 extends DispatchAction {
    public ActionForward dispatch1(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch1");
    }

    public ActionForward dispatch2(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch2");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N1598F"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page language="java" contentType="text/html;charset=utf-8" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;

&lt;html:html&gt;
    &lt;body&gt;
        &lt;html:form action="/test2-dispatch"&gt;
            &lt;html:text property="message"/&gt;
            &lt;html:submit property="execute"&gt;dispatch1&lt;/html:submit&gt;
            &lt;html:submit property="execute"&gt;dispatch2&lt;/html:submit&gt;
        &lt;/html:form&gt;
    &lt;/body&gt;
&lt;/html:html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>
上記のActionクラスでは、リクエストパラメータに「execute=dispatch1」が入っている場合にdispatch1()メソッドが、「execute=dispatch2」が入っている場合にdispatch2()メソッドが実行される。
</p>
</div>
<br>
<br>
<a name="tubame_5.8.3." id="category_521"></a>
<h3 class="title">5.8.3.MappingDispatchAction</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
MappingDispatchActionでは、複数のリクエストを一つのActionクラスにまとめる場合に利用する。以下に、実装例を示す。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-config.xmlのaction-mapping設定</p>
<div class="figure">
<a name="N159AA"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xmlサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/test8" forward="/WEB-INF/mappingdispatchaction8.jsp"/&gt;
&lt;action path="/test8-*" type="org.sample.struts1.mapping.MappingTest8" name="test" parameter="{1}"/&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Actionクラス</p>
<div class="figure">
<a name="N159B7"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Actionクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page language="java" contentType="text/html;charset=utf-8" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;

&lt;html:html&gt;
    &lt;body&gt;
        &lt;html:form action="/test8-dispatch1"&gt;
            &lt;html:text property="message"/&gt;
            &lt;html:submit/&gt;
        &lt;/html:form&gt;

        &lt;html:form action="/test8-dispatch2"&gt;
            &lt;html:text property="message"/&gt;
            &lt;html:submit/&gt;
        &lt;/html:form&gt;
    &lt;/body&gt;
&lt;/html:html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N159C4"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MappingTest8 extends MappingDispatchAction {
    public ActionForward dispatch1(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch1");
    }

    public ActionForward dispatch2(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch2");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.8.4." id="category_522"></a>
<h3 class="title">5.8.4.LookupDispatchAction</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
LookupDispatchActionでは、これを拡張したクラスでgetKeyMethodMap()をオーバーライドし、プロパティキーとメソッド名のマップを作成する。MappingDispatchActionのように、actionタグのparameter属性に指定されたパラメータ名とその値として指定されたメッセージを用いて、getKeyMethodMap()で作成されたマップから実行すべきメソッドを検索して実行する。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-config.xmlのaction-mapping設定</p>
<div class="figure">
<a name="N159DF"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xmlサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action-mappings&gt;
    &lt;action path="/test4" forward="/WEB-INF/lookupdispatchaction.jsp"/&gt;
    &lt;action path="/test4-dispatch" 
        type="org.sample.struts1.mapping.MappingTest4" name="test" 
        parameter="execute"/&gt;
&lt;/action-mappings&gt;
&lt;message-resources parameter="test4"/&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Actionクラス</p>
<div class="figure">
<a name="N159EC"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Actionクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MappingTest4 extends LookupDispatchAction {

    @Override
    protected Map getKeyMethodMap() {
        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
        map.put("submit.dispatch1", "dispatch1");
        map.put("submit.dispatch2", "dispatch2");
        return map;
    }
    public ActionForward dispatch1(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch1");
    }

    public ActionForward dispatch2(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch2");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N159F9"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page language="java" contentType="text/html;charset=utf-8" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;html:form action="/test4-dispatch"&gt;
            &lt;html:text property="message"/&gt;
            &lt;html:submit property="execute"&gt;
                &lt;bean:message key="submit.dispatch1"/&gt;
            &lt;/html:submit&gt;
            &lt;html:submit property="execute"&gt;
                &lt;bean:message key="submit.dispatch2"/&gt;
            &lt;/html:submit&gt;
        &lt;/html:form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>メッセージプロパティファイル（test4.properties）</p>
<div class="figure">
<a name="N15A06"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;メッセージプロパティファイルサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
submit.dispatch1=dispatch1
submit.dispatch2=dispatch2
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.8.5." id="category_523"></a>
<h3 class="title">5.8.5.EventDispatchAction</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
EventDispatchActionでは、actionタグのparameter属性に指定したメソッドのリストをリクエストパラメータ名として指定することで、実行するメソッドを決定する。メソッド名のエイリアスや、該当するメソッドが存在しなかった場合にデフォルトで実行されるメソッドなども指定が可能である。
エイリアスは、下記設定例でparameter属性中の「dp2=dispatch2」とある個所で、リクエストパラメータにdp2が入っていた場合に、dispatch2メソッドが実行される。
また、デフォルトメソッドは下記設定例でparameter属性中の「default=dispatch1」とある個所となる。以下に、実装例を示す。





</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-config.xmlのaction-mapping設定</p>
<div class="figure">
<a name="N15A21"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xmlサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/test5" forward="/WEB-INF/eventdispatchaction.jsp"/&gt;
&lt;action path="/test5-dispatch" type="org.sample.struts1.mapping.MappingTest5" name="test" parameter="dispatch1,dispatch2,default=dispatch1,dp2=dispatch2"/&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Actionクラス</p>
<div class="figure">
<a name="N15A2E"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Actionクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MappingTest5 extends EventDispatchAction {
    public ActionForward dispatch1(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch1");
    }

    public ActionForward dispatch2(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("dispatch2");
    }
}

</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N15A3B"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page language="java" contentType="text/html;charset=utf-8" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;

&lt;html:html&gt;
    &lt;body&gt;
        &lt;html:form action="/test5-dispatch"&gt;
            &lt;html:text property="message"/&gt;
            &lt;html:submit property="dispatch1"/&gt;
            &lt;html:submit property="dispatch2"/&gt;
            &lt;html:submit/&gt;
        &lt;/html:form&gt;
    &lt;/body&gt;
&lt;/html:html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.8.6." id="category_525"></a>
<h3 class="title">5.8.6.リクエストのフォワード/リダイレクト</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="fowardRedirect"></a>
リクエストのフォワード/リダイレクトは、Struts1ではActionForward/ActionRedirectを戻り値として使用する。以下に、Struts1でのリダイレクト例を示す。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>リダイレクト例</p>
<div class="figure">
<a name="N15A80"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;リダイレクトサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/test5" forward="/WEB-INF/eventdispatchaction.jsp"/&gt;
&lt;action path="/test5-dispatch" type="org.sample.struts1.mapping.MappingTest5" name="test" parameter="dispatch1,dispatch2,default=dispatch1,dp2=dispatch2"/&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.8.7." id="category_524"></a>
<h3 class="title">5.8.7.モジュール</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
画面数が多くなると、struts-config.xmlにすべての画面設定を記述し管理するのが困難となる。この場合は、モジュール分割を行う。モジュール分割は、web.xmlに以下のように記載する（下記太字部分を参照）。例を示す。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-config.xmlのaction-mapping設定</p>
<div class="figure">
<a name="N15A56"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xmlサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/test5" forward="/WEB-INF/eventdispatchaction.jsp"/&gt;
&lt;action path="/test5-dispatch" type="org.sample.struts1.mapping.MappingTest5" name="test" parameter="dispatch1,dispatch2,default=dispatch1,dp2=dispatch2"/&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

この場合、モジュール単位でRequestProcessorが割り当てられる。
モジュールを使わない場合はWEB-INF配下にJSPを配置することができるが、モジュールを使用する場合は、JSPファイルをWebアプリケーションディレクトリ直下のモジュール名と同じディレクトリ配下に配置する必要がある。これは、actionタグのforward属性やforwardタグのpath属性の検索が、「Webアプリケーションのルートディレクトリ/モジュールディレクトリ」をベースとして行うためである（デフォルトモジュールの場合、モジュールディレクトリはWebアプリケーションのルートディレクトリとなる）。すべてをWEB-INF配下に配置したい場合は、forwardタグではmodule属性で「/」を指定、actionタグではForwardActionを使用し、parameter属性に「/../WEB-INF/・・・」とする。

</p>
<p>
その他、モジュールの詳細については、以下のURLを参照。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-1.3.10/docs/userGuide/configuration.html#dd_config_modules</p>
</li>
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://www.ne.jp/asahi/hishidama/home/tech/struts/module.html" target="_top">http://www.ne.jp/asahi/hishidama/home/tech/struts/module.html</a></strong></span>

</p>
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.8.8." id="category_526"></a>
<h3 class="title">5.8.8.Actionクラスのユーティリティメソッド</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Actionクラスには、ユーティリティメソッドが定義されている。メソッドの詳細は
<span class="command"><strong><a class="command" href="#strutsActionUtil" title="Table&nbsp;1.&nbsp;Actionクラスのユーティリティメソッド移行">「Actionクラスのユーティリティメソッド移行」</a></strong></span>を参照
</p>
</div>
<br>
<br>
<a name="tubame_5.9." id="category_471"></a>
<h3 class="title">5.9.Actionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCでは、Struts1のActionクラスに相当するものとして、Controller（@ControllerをつけたPOJO）を使用する。Struts1の&lt;action&gt;でpath属性に指定していたリクエストマッピングは、クラス、もしくはメソッドに付与した@RequestMappingのvalue属性で設定する（クラスに@RequestMappingをつけた場合でも、メソッドには必ず@RequestMappingを付与する必要がある）。
</p>
<p>Struts1では設定ファイル中に遷移先を&lt;action&gt;のforward属性や&lt;forward&gt;で指定したが、SpringMVCでは戻り値に遷移先のパスを直接記載するため、設定は不要である。
</p>
<p></p>
<p>Struts1のリクエスト処理メソッドは、名称が「execute」であったが、SpringMVCでは@RequestMappingさえ付与されていればよくメソッド名は任意である。また、Struts1のexecute()メソッドは引数が4つ固定であったが、SpringMVCではさまざまな引数を取ることができる。Struts1で指定していた引数とSpringMVCの引数の対応は以下の通りとなる。
</p>
<p></p>
<div class="table">
<a name="N1539D"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Validator</b>
</p>
<div class="table-contents">
<table summary="Validator" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Struts1</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>ActionMapping</td><td>なし</td>
</tr>
<tr>
<td>ActionForm</td><td>@ModelAttributeをつけた引数。ただし、Struts1とは異なりrequest
scopeで渡される。session
scopeに格納する場合は、別途@SessionAttributesでクラス名、もしくはプロパティ名を指定する
</td>
</tr>
<tr>
<td>HttpServletRequest</td><td>HttpServletRequest</td>
</tr>
<tr>
<td>HttpServletResponse</td><td>HttpServletResponse</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p></p>
<p>SpringMVCのその他の引数については、以下のURLを参照。</p>
<p>

<span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-ann-arguments" target="_top">
http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-ann-arguments
</a></strong></span>

</p>
<p></p>
<p>リクエスト処理メソッドの戻り値についても、Struts1ではActionForwardのみであったが、SpringMVCではString、ModelAndView等複数の戻り値を返すことが可能となっている。詳細については、以下のURLを参照。
</p>
<p>

<span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types" target="_top">http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types
</a></strong></span>

</p>
</div>
<br>
<br>
<a name="tubame_5.9.1." id="category_680"></a>
<h3 class="title">5.9.1.Actionの設定移行</h3>
<br>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N1679A"></a>1.&nbsp;body</h2>
</div>
</div>
</div>
<p>SpringMVCではコントーラクラスをController（@ControllerをつけたPOJO）を使用するため、コントローラクラスの設定ファイルの定義は不要である</p>
</div>
<br>
<br>
<a name="tubame_5.9.2." id="category_565"></a>
<h3 class="title">5.9.2.シンプルなActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCでは以下のように記述する。

</p>
<div class="figure">
<a name="N15D25"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Controllerクラス</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
public class MappingTest1 {
    @RequestMapping("/test1")
    public String execute() {
        return "forward";
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">
上記の例では、パス「/test1」に対して上記のexecute()メソッドが実行され、「forward.jsp」に遷移する。
戻り値に「forward」とのみ記載すると、<span class="command"><strong><a class="command" href="#viewResolver">ViewResolver</a></strong></span> がJSPファイルを検索し遷移する

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>@ModelAttributeを使わないのであれば、Struts1のように設定のみで済ますこともできる。</p>
<div class="figure">
<a name="N15D38"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Spring設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;mvc:view-controller view-name="forward" path="test1"/&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.9.3." id="category_566"></a>
<h3 class="title">5.9.3.DispatchActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="dispatchAction"></a>
Struts1のように、リクエストパラメータにより実行するメソッドを制限するには、@RequestMappingのparams属性を利用する。params属性に「パラメータ名=値」を記述することで、特定のパラメータと値の組合せの場合にメソッドを実行することが可能となる。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Controllerクラス</p>
<div class="figure">
<a name="N15D54"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Controllerクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
public class MappingTest2 {
    @RequestMapping(value = "/test2", method = RequestMethod.GET)
    public String execute(Model model) {
        model.addAttribute("message", new TestFormBean());
        return "dispatchaction";
    }

    @RequestMapping(value = "/test2-dispatch", params = "execute=dispatch1", method = RequestMethod.POST)
    public String dispatch1(@ModelAttribute("message") TestFormBean message) {
        return "dispatch1";
    }
    @RequestMapping(value = "/test2-dispatch", params = "execute=dispatch2", method = RequestMethod.POST)
    public String dispatch2(@ModelAttribute("message") TestFormBean message) {
        return "dispatch2";
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N15D61"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;JSPサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %&gt;
&lt;%@ page session="false" %&gt;

&lt;html&gt;
    &lt;body&gt;
        &lt;form:form modelAttribute="message" action="${appUrl}/test2-dispatch" method="post"&gt;
            &lt;form:input path="message"/&gt;
            &lt;input type="submit" name="execute" value="dispatch1"&gt;
            &lt;input type="submit" name="execute" value="dispatch2"&gt;
        &lt;/form:form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>
上記のActionクラスでは、リクエストパラメータに「execute=dispatch1」が入っている場合にdispatch1()メソッドが、「execute=dispatch2」が入っている場合にdispatch2()メソッドが実行される。
</p>
</div>
<br>
<br>
<a name="tubame_5.9.4." id="category_567"></a>
<h3 class="title">5.9.4.LookupDispatchActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCでは、Struts1のLookupDispatchActionのように渡されたパラメータの値とメソッドを結びつけるような機能は提供されていない。そのため、移行が必要な場合は、LookupDispatchActionを参考に実装を進める必要がある。</p>
</div>
<br>
<br>
<a name="tubame_5.9.5." id="category_568"></a>
<h3 class="title">5.9.5.EventDispatchActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
パラメータ名に応じて実装するメソッドを特定するには<span class="command"><strong><a class="command" href="#dispatchAction">「DispatchActionの移行」</a></strong></span>のように@RequestMappingのparams属性を利用する。ただし、ここではパラメータ値は利用しないため、パラメータ名のみ指定する。
以下に実装例を示す。


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Controllerクラス</p>
<div class="figure">
<a name="N15D8C"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Controllerクラスサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
public class MappingTest2 {
    @RequestMapping(value = "/test2", method = RequestMethod.GET)
    public String execute(Model model) {
        model.addAttribute("message", new TestFormBean());
        return "dispatchaction";
    }

    @RequestMapping(value = "/test2-dispatch", params = "execute=dispatch1", method = RequestMethod.POST)
    public String dispatch1(@ModelAttribute("message") TestFormBean message) {
        return "dispatch1";
    }
    @RequestMapping(value = "/test2-dispatch", params = "execute=dispatch2", method = RequestMethod.POST)
    public String dispatch2(@ModelAttribute("message") TestFormBean message) {
        return "dispatch2";
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>
この例では、パラメータ名として「dispatch2」が指定されていた場合にdispatch2()メソッドが実行され、それ以外の場合はdispatch1メソッドが実行される（EventDispatchActionのデフォルトに相当）
</p>
</div>
<br>
<br>
<a name="tubame_5.9.6." id="category_474"></a>
<h3 class="title">5.9.6.Forwardの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>struts1のフォワードについては、<span class="command"><strong><a class="command" href="#fowardRedirect">「リクエストのフォワード/リダイレクト」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_5.9.6.1." id="category_537"></a>
<h3 class="title">5.9.6.1.リクエストのフォワード/リダイレクト移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>リクエストのフォワード/リダイレクトは、SpringMVCでは戻り値に指定した遷移先のURLに接頭辞「forward:」、もしくは、接頭辞「redirect:」を指定する。</p>
<p>Struts1のActionForwardに指定するフォワード先は、forwardタグで設定されたものであればJSPでもActionでも可能であったが、SpringMVCで他のControllerに処理を移す場合は「forward:」もしくは「redirect:」をつけてURLを記述する必要がある。なお、「redirect:」を使用する場合は、自動的にパラメータを引き継がないので、必要に応じてパラメータの再設定を行う。なお、SpringMVC 3.1以上では、リダイレクトに際して一度だけ値を保持するフラッシュスコープと呼ばれるスコープを利用したパラメータの転送も可能となっている。</p>
<p>

以下に、SpringMVCでの通常のリダイレクトと、フラッシュスコープを利用した例ダイレクトの例を示す。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>通常のリダイレクト</p>
<div class="figure">
<a name="N15AAF"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;通常のリダイレクトサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@RequestMapping(value = "/test3-dispatch1", method = RequestMethod.POST)
public String dispatch1(@ModelAttribute("message") TestFormBean message) {
    ModelAndView mav = new ModelAndView("redirect:test3-dispatch2");
    mav.addObject("message", message.getMessage());
    return mav;
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>フラッシュスコープを利用したリダイレクト</p>
<p>引数にRedirectAttributesを取り、addFlashAttributeにより転送するAttributeを設定する。</p>
<div class="figure">
<a name="N15ABE"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;フラッシュスコープを利用したリダイレクトサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@RequestMapping(value = "/test3-dispatch1", method = RequestMethod.POST)
public String dispatch1(@ModelAttribute("message") TestFormBean message, final RedirectAttributes redirectAttributes) {
    redirectAttributes.addFlashAttribute("message", message);
    return "redirect:test3-dispatch2";
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.9.7." id="category_482"></a>
<h3 class="title">5.9.7.モジュールの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCでの画面分割は、クラスに@RequestMappingに付与することで行う。</p>
<p>例えば、以下のように記述した場合、「/&lt;コンテキスト名&gt;/test9」でexecute()メソッド、「/&lt;コンテキスト名&gt;/test9/Nest/dispatch1」でdispatch1()メソッド、「/&lt;コンテキスト名&gt;/test9/Nest/dispatch2」でdispatch2()メソッドが実行される。

</p>
<div class="figure">
<a name="N15459"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Controllerクラス</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
@RequestMapping("/test9")
public class MappingTest9Nest {
    @RequestMapping(method = RequestMethod.GET)
    public String execute(Model model) {
        model.addAttribute("message", new TestFormBean());
        return "mappingdispatchaction2";
    }

    @RequestMapping(value = "/Nest/dispatch1", method = RequestMethod.POST)
    public String dispatch1(@ModelAttribute("message") TestFormBean message) {
        return "dispatch1";
    }
    @RequestMapping(value = "/Nest/dispatch2", method = RequestMethod.POST)
    public String dispatch2(@ModelAttribute("message") TestFormBean message) {
        return "dispatch2";
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_5.9.8." id="category_483"></a>
<h3 class="title">5.9.8.Actionクラスの提供するユーティリティメソッドの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1では、Actionクラスがいくつかのユーティリティメソッドを提供している。これらをSpringMVCに移行した際に、どのように移行するかについては、下記の表を参照。

</p>
<div class="table">
<a name="strutsActionUtil"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Actionクラスのユーティリティメソッド移行</b>
</p>
<div class="table-contents">
<table summary="Actionクラスのユーティリティメソッド移行" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Actionクラスのメソッド名</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>getServlet()</td><td>SpringMVCではControllerからServletを取得することはできない。例えばServletContextを取得したければ、Controllerで
@Autowired ServletContext context;
もしくは、リクエスト処理メソッドでServletRequestを引数として取り、
request.getServletContext();
とする。ApplicationContextは、上記で取得したServletContextを使用して、
WebApplicationContextUtils.getWebApplicationContext(context);
とする
</td>
</tr>
<tr>
<td>setServlet(ActionServlet servlet)</td><td>SpringMVCではControllerからServletを設定することはできない</td>
</tr>
<tr>
<td>execute(ActionMapping mapping, 
ActionForm form,
ServletRequest request,
ServletResponse response)
</td><td rowspan="2">TControllerクラスの@RequestMappingアノテーションが付加されたメソッドが実行される</td>
</tr>
<tr>
<td>execute(ActionMapping mapping, 
ActionForm form,
HttpServletRequest request,
HttpServletResponse response)
</td>
</tr>
<tr>
<td>addErrors(HttpServletRequest request,
ActionMessages errors)
</td><td>入力値検証機能をorg.springframework.validation.Validatorを実装して作成している場合は、org.springframework.validation.Errorsにメッセージを格納し、html:errorsやspring:messageを使用してメッセージを出力する</td>
</tr>
<tr>
<td>addMessages(HttpServletRequest request,
ActionMessages messages)
</td><td>ActionMessage/ActionMessagesなどのようなメッセージ専用のクラスはなく、通常のBeanにメッセージを設定し、View上でEL式を使って参照する</td>
</tr>
<tr>
<td>getErrors(HttpServletRequest request)</td><td>Errors#getAllErrors()</td>
</tr>
<tr>
<td>getMessages(HttpServletRequest request)</td><td>無し</td>
</tr>
<tr>
<td>saveErrors(HttpServletRequest request,
ActionMessages errors)
</td><td rowspan="4">入力値検証機能でエラーが発生している場合は、BindingResult#reject()、BindingResult#rejectValue（）を使用してメッセージを追加する。設定されたメッセージはform:errorsを使用して表示する。
上記以外の場合は、リクエスト処理メソッドでModelAndViewやModelを引数として取り、メッセージを格納する。JSP側ではメッセージ格納時に指定したプロパティ名を使用してEL式などで表示する。もしくは、メッセージキーを格納し、JSPではspring:messageを使用してメッセージを表示する
</td>
</tr>
<tr>
<td>saveErrors(HttpSession session,
ActionMessages errors)
</td>
</tr>
<tr>
<td>saveMessages(HttpServletRequest request,
ActionMessages messages)
</td>
</tr>
<tr>
<td>saveMessages(HttpSession session,
ActionMessages messages)
</td>
</tr>
<tr>
<td>getResources(HttpServletRequest request)</td><td rowspan="2">org.springframework.context.MessageSourceをSpring Beanとしてインジェクトしてメッセージを取得する（取得したmessageResourceを使って、さらにMessageResourceAccessorを作成することで、より簡単にメッセージを扱うことができる。SpringMVC リクエストマッピング方式のLookupDispatchAction相当を参照）。
Struts1のようにbundleを指定してメッセージを取得する機能はない（複数のメッセージリソースファイルを読み込むことは可能）
</td>
</tr>
<tr>
<td>getResources(HttpServletRequest request,
String key)
</td>
</tr>
<tr>
<td>generateToken(HttpServletRequest request)</td><td rowspan="5">SpringMVC単体ではトークン機能は用意されていないため、同等の機能を独自実装するか、トークン機能を持つSpring Web Flowを利用する</td>
</tr>
<tr>
<td>saveToken(HttpServletRequest request)</td>
</tr>
<tr>
<td>isTokenValid(HttpServletRequest request)</td>
</tr>
<tr>
<td>isTokenValid(HttpServletRequest request, boolean reset)</td>
</tr>
<tr>
<td>resetToken(HttpServletRequest request)</td>
</tr>
<tr>
<td>isCancelled(HttpServletRequest request)</td><td>HTMLの&lt;input type="submit" name="cancel"&gt;などとして、Controllerで@RequestParam("cancel")によりキャンセルボタンが押されたかを受け取る</td>
</tr>
<tr>
<td>setLocale(HttpServletRequest request,
Locale locale)
</td><td rowspan="2">LocaleResolver（さまざまな実装がある）を有効にし、クエリパラメータとして、
lang=&gt;ロケール名&lt;
とすると、ロケールを切り替えることができる（パラメータ名はLocaleChangeInterceptorの設定で指定する）。Struts1やStruts2と同様にセッション情報と紐付ける場合は、SessionLocaleResolverを使用する。セッション属性のキーは、"org.springframework.web.servlet.i18n.SessionLocaleResolver.LOCALE"
</td>
</tr>
<tr>
<td>getLocale(HttpServletRequest request)</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.1." id="category_484"></a>
<h3 class="title">5.9.8.1.ActionユーティリティメソッドgetServletの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではControllerからServletを取得することはできない。例えばServletContextを取得したければ、Controllerで</p>
<p>@Autowired ServletContext context;</p>
<p>もしくは、リクエスト処理メソッドでServletRequestを引数として取り、</p>
<p>request.getServletContext();</p>
<p>とする。ApplicationContextは、上記で取得したServletContextを使用して、</p>
<p>WebApplicationContextUtils.getWebApplicationContext(context);</p>
<p>とする</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.2." id="category_485"></a>
<h3 class="title">5.9.8.2.ActionユーティリティメソッドsetServletの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではControllerからServletを設定することはできない</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.3." id="category_486"></a>
<h3 class="title">5.9.8.3.Actionユーティリティメソッドexecuteの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Controllerクラスの@RequestMappingアノテーションが付加されたメソッドが実行される</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.4." id="category_487"></a>
<h3 class="title">5.9.8.4.ActionユーティリティメソッドaddErrorsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>入力値検証機能をorg.springframework.validation.Validatorを実装して作成している場合は、org.springframework.validation.Errorsにメッセージを格納し、&lt;html:errors&gt;や&lt;spring:message&gt;を使用してメッセージを出力する</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.5." id="category_488"></a>
<h3 class="title">5.9.8.5.ActionユーティリティメソッドaddMessagesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>ActionMessage/ActionMessagesなどのようなメッセージ専用のクラスはなく、通常のBeanにメッセージを設定し、View上でEL式を使って参照する</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.6." id="category_489"></a>
<h3 class="title">5.9.8.6.ActionユーティリティメソッドToken管理機能の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVC単体ではトークン機能は用意されていないため、同等の機能を独自実装するか、トークン機能を持つSpring Web Flowを利用する</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.7." id="category_490"></a>
<h3 class="title">5.9.8.7.ActionユーティリティメソッドgetErrorsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>org.springframework.validation.ErrorsインタフェースのgetAllErrors()で置換える。</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.8." id="category_491"></a>
<h3 class="title">5.9.8.8.ActionユーティリティメソッドLocaleの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>LocaleResolver（さまざまな実装がある）を有効にし、クエリパラメータとして、</p>
<p>lang=&lt;ロケール名&gt;</p>
<p>とすると、ロケールを切り替えることができる（パラメータ名はLocaleChangeInterceptorの設定で指定する）。Struts1やStruts2と同様にセッション情報と紐付ける場合は、SessionLocaleResolverを使用する。セッション属性のキーは、"org.springframework.web.servlet.i18n.SessionLocaleResolver.LOCALE"</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.9." id="category_492"></a>
<h3 class="title">5.9.8.9.ActionユーティリティメソッドgetMessagesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>対応する機能は無い</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.10." id="category_493"></a>
<h3 class="title">5.9.8.10.ActionユーティリティメソッドgetResourcesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>org.springframework.context.MessageSourceをSpring Beanとしてインジェクトしてメッセージを取得する（取得したmessageResourceを使って、さらにMessageResourceAccessorを作成することで、より簡単にメッセージを扱うことができる。SpringMVC リクエストマッピング方式のLookupDispatchAction相当を参照）。</p>
<p>Struts1のようにbundleを指定してメッセージを取得する機能はない（複数のメッセージリソースファイルを読み込むことは可能）</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.11." id="category_494"></a>
<h3 class="title">5.9.8.11.ActionユーティリティメソッドisCancelledの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>HTMLの&lt;input type="submit" name="cancel"&gt;などとして、Controllerで@RequestParam("cancel")によりキャンセルボタンが押されたかを受け取る</p>
</div>
<br>
<br>
<a name="tubame_5.9.8.12." id="category_495"></a>
<h3 class="title">5.9.8.12.ActionユーティリティメソッドsaveErrors/saveMessagesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>入力値検証機能でエラーが発生している場合は、BindingResult#reject()、BindingResult#rejectValue（）を使用してメッセージを追加する。設定されたメッセージは&lt;form:errors&gt;を使用して表示する。</p>
<p>上記以外の場合は、リクエスト処理メソッドでModelAndViewやModelを引数として取り、メッセージを格納する。JSP側ではメッセージ格納時に指定したプロパティ名を使用してEL式などで表示する。もしくは、メッセージキーを格納し、JSPでは&lt;spring:message&gt;を使用してメッセージを表示する</p>
</div>
<br>
<br>
<a name="tubame_5.9.9." id="category_475"></a>
<h3 class="title">5.9.9.Struts Extrasの移行</h3>
<br>
<br>
<a name="tubame_5.9.9.1." id="category_476"></a>
<h3 class="title">5.9.9.1.DispatcherAction系の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="emphasis"><em>DispatchActionの移行</em></span>

</p>
<p>Struts1のように、リクエストパラメータにより実行するメソッドを制限するには、@RequestMappingのparams属性を利用する。params属性に「パラメータ名=値」を記述することで、特定のパラメータと値の組合せの場合にメソッドを実行することが可能となる。</p>
<p></p>
<p>

<span class="emphasis"><em>MappingDispatchActionの移行</em></span>

</p>
<p>SpringMVCのControllerと同じ動きであり、特別な移行措置は考えずとも移行は可能と考えられる。</p>
<p></p>
<p>

<span class="emphasis"><em>LookupDispatchActionの移行</em></span>

</p>
<p>SpringMVCでは、Struts1のLookupDispatchActionのように渡されたパラメータの値とメソッドを結びつけるような機能は提供されていない。そのため、移行が必要な場合は、LookupDispatchActionを参考に実装を進める必要がある。</p>
<p></p>
<p>

<span class="emphasis"><em>EventDispatchActionの移行</em></span>

</p>
<p>パラメータ名に応じて実装するメソッドを特定するには、DispatchActionのように@RequestMappingのparams属性を利用する。ただし、ここではパラメータ値は利用しないため、パラメータ名のみ指定する。</p>
</div>
<br>
<br>
<a name="tubame_5.9.9.2." id="category_477"></a>
<h3 class="title">5.9.9.2.DownloadActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>HttpServletResponseを引数にとるControllerを作成し、渡されたServletResponseからgetOutputStream()やgetWrite()を使って、ダウンロードするファイル等をクライアントに渡す。</p>
<p>もしくは、引数は無しで戻り値としてResponseEntity&lt;?&gt;を返すControllerを作成する。</p>
</div>
<br>
<br>
<a name="tubame_5.9.9.3." id="category_478"></a>
<h3 class="title">5.9.9.3.ForwardActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>JSPや、他のControllerに遷移するだけのControllerを作成する</p>
</div>
<br>
<br>
<a name="tubame_5.9.9.4." id="category_479"></a>
<h3 class="title">5.9.9.4.IncludeActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Controllerを自作する</p>
</div>
<br>
<br>
<a name="tubame_5.9.9.5." id="category_480"></a>
<h3 class="title">5.9.9.5.LocaleActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>servlet-context.xmlに、LocaleChangeInterceptorおよび、LocaleResolverの設定を行う。また、MessageResourceのプロパティとして、</p>
<p>&lt;property name="fallbackToSystemLocale" value="false"/&gt;</p>
<p>を追加する</p>
</div>
<br>
<br>
<a name="tubame_5.9.9.6." id="category_481"></a>
<h3 class="title">5.9.9.6.SwitchActionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>JSPや、他のControllerに遷移するだけのControllerを作成する</p>
</div>
<br>
<br>
<a name="tubame_5.10." id="category_539"></a>
<h3 class="title">5.10.例外処理</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="exception"></a>

Actionクラスのexecute()メソッドで例外が発生した場合、デフォルトでは標準のエラー画面が表示される。標準のエラー画面ではなく、カスタマイズした画面を表示する場合や、例外発生時に処理を追加する場合は、struts-config.xmlで設定を行う。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>struts-1.3.10/docs/userGuide/building_controller.html#exception_handler
</p>
</li>
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://www.ne.jp/asahi/hishidama/home/tech/struts/error.html" target="_top">http://www.ne.jp/asahi/hishidama/home/tech/struts/error.html
</a></strong></span>

</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.10.1." id="category_540"></a>
<h3 class="title">5.10.1.Action単位の例外処理</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

特定のActionに対する例外処理を記述することができる。この場合、以下の手順で例外処理を設定する。

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>設定ファイルへの例外処理登録</p>
<p>struts-config.xmlのglobal-exceptionsタグの子要素として、例外クラスごとのexceptionタグを記述する。以下はIOExceptionの例で、path属性にエラー表示用JSPを指定している
</p>
<div class="figure">
<a name="N15AF4"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;例外設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action ...&gt;
    &lt;exception
      key="some.key"
      type="java.io.IOException"
      path="/error.jsp"/&gt;
&lt;/action&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>メッセージの登録</p>
<p>上記設定のkey属性に指定したキーを持つメッセージをstruts-config.xmlのmessage-resourcesタグに指定したリソースファイルに設定し、同じくpath属性に指定したエラー表示用JSP内で、タグhtml:messageタグを使用してエラーメッセージを表示する
</p>
<p>例外発生時に特定の処理を行いたい場合は、exceptionタグにhandler属性を追加し、例外ハンドラクラスを設定する。例外ハンドラクラスにはorg.apache.struts.action.ExceptionHandlerを継承したクラスを指定する。ExceptionHandlerクラスのサブクラスでは、execute()メソッドをオーバーライドする。
</p>
</li>
</ol>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_5.10.2." id="category_541"></a>
<h3 class="title">5.10.2.モジュール単位の例外処理</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>上記Action単位の例外処理を扱っていたが、モジュール単位で例外処理を行うこともできる。モジュール単位では、struts-config.xmlに以下の設定を行う。

</p>
<div class="figure">
<a name="N15B12"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;global-exceptions&gt;
    &lt;exception
      key="some.key"
      type="java.io.IOException"
      path="/error.jsp"/&gt;
&lt;/global-exceptions&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

メッセージの定義等については、Action単位の場合と同様となる。
</p>
</div>
<br>
<br>
<a name="tubame_5.10.3." id="category_542"></a>
<h3 class="title">5.10.3.ModuleExceptionの利用</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Action単位、モジュール単位の例外処理ともに、発生した例外に対して表示できるメッセージはkey属性に設定したもののみ表示することができる。このため、発生した個所を特定するメッセージを表示することはできない。これに対応するために、org.apache.struts.util.ModuleExceptionが提供されている。
Action内でModuleExceptionをインスタンス化する際に引数としてメッセージキーを指定することで、指定されたメッセージをエラー表示用のJSPファイルに渡すことができる。
以下にstruts-config.xmlの記述例を示す。


</p>
<div class="figure">
<a name="N15B29"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">

&lt;global-exceptions&gt;
    &lt;exception
      key=""
      type=" org.apache.struts.util.ModuleException"
      path="/error.jsp"/&gt;
&lt;/global-exceptions&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

メッセージの定義等については、Action単位の場合と同様となる。
</p>
</div>
<br>
<br>
<a name="tubame_5.10.4." id="category_543"></a>
<h3 class="title">5.10.4.&lt;exception&gt;タグに指定可能な属性</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
exceptionタグに指定可能な属性は、以下を参照。


</p>
<div class="table">
<a name="N15B40"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;&lt;exception&gt;の属性一覧</b>
</p>
<div class="table-contents">
<table summary="<exception>の属性一覧" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性名</th><th>説明</th><th>デフォルト</th>
</tr>
</thead>
<tbody>
<tr>
<td>bundle</td><td>メッセージリソースバンドルを取得するためのセッションに格納されているkey名を指定する</td><td>org.apache.struts.Globals.MESSAGES_KEY</td>
</tr>
<tr>
<td>className</td><td>例外処理時の後処理の設定情報を保持するクラスを指定する</td><td>org.apache.struts.config.ExceptionConfig</td>
</tr>
<tr>
<td>extends</td><td>この&lt;exception&gt;が継承する&lt;exception&gt;のtype属性に設定された値を指定する</td><td>無し</td>
</tr>
<tr>
<td>handler</td><td>例外発生時の後処理を実行するクラスを指定する.</td><td>org.apache.struts.action.ExceptionHandler</td>
</tr>
<tr>
<td>key</td><td>例外発生時に表示するエラーメッセージのメッセージkeyを指定する</td><td>無し</td>
</tr>
<tr>
<td>path</td><td>例外発生時に遷移するページのパスをモジュール名以降の絶対パスで指定する</td><td>無し</td>
</tr>
<tr>
<td>scope</td><td>ActionErrorオブジェクトが格納されるスコープを"request"または "session"で指定する</td><td>request</td>
</tr>
<tr>
<td>type</td><td>例外クラス名を指定する</td><td>無し</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_5.11." id="category_496"></a>
<h3 class="title">5.11.例外処理の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Struts1では、Action単位、モジュール単位で例外処理を記述することができた。SpringMVCでも、同様の記述が可能である。SpringMVCでの例外処理の概要について記載する

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Controller単位</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>リクエスト処理メソッド内でtry～catchにより処理する</p>
</li>
<li class="listitem">
<p>@ExceptionHandlerを付与したメソッドを作成する（Controller共通の例外処理となる）
</p>
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>システム単位</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>@ControllerAdviceを付与したクラスを作成し、そのクラス内で@ExceptionHandlerを付与したメソッドを作成する。
</p>
<p>
SpringMVC
4.0以降では、@ControllerAdviceの引数としてパッケージやクラス名などを指定することで、特定のクラスにのみ適用することもできる
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html" target="_top">http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html</a></strong></span>

</p>
</li>
</ul>
</div>
<p>

</p>
</li>
<li class="listitem">
<p>HandlerExceptionResolverを実装したクラス（SimpleMappingExceptionResolver、DefaultHandlerExceptionResolver）などを利用する
</p>
</li>
<li class="listitem">
<p>HandlerExceptionResolverを実装したクラスを作成し、servlet-context.xmlにbeanとして登録する
</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_5.11.1." id="category_502"></a>
<h3 class="title">5.11.1.Action単位の例外処理の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="actionExceptionHandler"></a>
リクエスト処理メソッド内でtry-catchにより処理する。もしくは、@ExceptionHandlerを付与したメソッドを作成する（Controller共通の例外処理となる）


</p>
<div class="figure">
<a name="N1559B"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;ExceptionHandle例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Resource
private MessageSource messageSource;

@ExceptionHandler(IOException.class)
public ModelAndView handler(Exception exception) {
    ModelAndView mav = new ModelAndView("error1");
    MessageSourceAccessor messageAccessor = new MessageSourceAccessor(
            messageSource);
    
    mav.addObject("message", messageAccessor.getMessage("global.exception1"));
    return mav;
}
</pre>
</div>
</div>
<p>
<br class="figure-break">
上記のように、@ExceptionHandlerの引数として処理するExceptionクラスを指定する。複数のExceptionを受け付ける場合は、カンマ区切りで指定する。当該メソッドの引数として、発生したExceptionが必須である。リクエストパラメータを取得する場合は、引数としてWebRequestを取り、そこから取得することができる。


</p>
<p>
その他の引数については、以下のURLを参照。
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://docs.spring.io/autorepo/docs/spring/4.0.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ServletRequestMethodArgumentResolver.html" target="_top">http://docs.spring.io/autorepo/docs/spring/4.0.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ServletRequestMethodArgumentResolver.html</a></strong></span>

</p>
</li>
</ul>
</div>
<p>
また、戻り値については、ModelAndViewやModel、View、String等、リクエスト処理メソッドと同様のものが利用可能となっている。
</p>
</div>
<br>
<br>
<a name="tubame_5.11.2." id="category_499"></a>
<h3 class="title">5.11.2.モジュール単位の例外処理の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>struts-config.xmlに以下のような定義があった場合、SpringMVCでは、いくつかの移行シナリオが考えられる。
</p>
<div class="figure">
<a name="N1552C"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;struts-config.xmlの設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;global-exceptions&gt;
    &lt;exception key="global.exception2"
        type="org.sample.struts1.exception.TestException" 
        path="/WEB-INF/error2.jsp"/&gt;
&lt;/global-exceptions&gt;
</pre>
</div>
</div>
<br class="figure-break">
<p>
以下の何れかの方法で移行する。


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>@ControllerAdviceを付与したクラスを作成し、そのクラス内で@ExceptionHandlerを付与したメソッドを作成する
</p>
<p>を参照 <span class="command"><strong><a class="command" href="#actionExceptionHandler">「Action単位の例外処理の移行」</a></strong></span>を参照
</p>
</li>
<li class="listitem">
<p>HandlerExceptionResolverを実装したクラス（SimpleMappingExceptionResolver、DefaultHandlerExceptionResolver）などを利用する
</p>
</li>
<li class="listitem">
<p>HandlerExceptionResolverを実装したクラスを作成し、servlet-context.xmlにbeanとして登録する
</p>
<p>
HandlerExceptionResolverを実装したクラスを作成する場合は、作成したクラスでresolveException()メソッドに例外処理を実装する。これよりも簡単に、SimpleMappingExceptionResolverのスーパークラスであるAbstractHandlerExceptionResolverを拡張することもできる。AbstractHandlerExceptionResolverの拡張例を以下に示す。
</p>
<p>
このCustomHandlerExceptionResolverクラスでは、設定ファイルから、受け付ける例外と遷移先、メッセージキーの情報を読み出し、該当する例外が発生した場合に遷移先ページにメッセージを渡して表示する。
</p>
<div class="figure">
<a name="N1554C"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;CustomHandlerExceptionResolverサンプル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class CustomMappingExceptionResolver extends
        AbstractHandlerExceptionResolver {
    @Resource
    private MessageSource messageSource;
    
    private Map&lt;String, List&lt;String&gt;&gt; exceptionMappings;

    public void setExceptionMappings(Map&lt;String, List&lt;String&gt;&gt; exceptionMappings) {
        this.exceptionMappings = exceptionMappings;
    }

    @Override
    protected ModelAndView doResolveException(HttpServletRequest request,
            HttpServletResponse response, Object handler, Exception ex) {
        MessageSourceAccessor messageAccessor = new MessageSourceAccessor(
                messageSource);
        List&lt;String&gt; list = exceptionMappings.get(ex.getClass().getName());
        if(list == null) {
            return null;
        }
        String view = list.get(0);
        String key = list.get(1);
        
        String message = messageAccessor.getMessage(key);
        
        ModelAndView mav = new ModelAndView(view);
        mav.addObject("message", message);
        
        return mav;
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

このクラスを利用する場合は、servlet-context.xmlに以下のような設定を追加する。
</p>
<div class="figure">
<a name="N15557"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;servlet-context.xml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;bean class="org.sample.springmvc.exception.CustomMappingExceptionResolver"&gt;
    &lt;property name="exceptionMappings"&gt;
        &lt;map&gt;
            &lt;entry key="org.sample.springmvc.exception.TestException"&gt;
                &lt;list&gt;
                    &lt;value&gt;error1&lt;/value&gt;
                	    &lt;value&gt;global.exception6&lt;/value&gt;
                &lt;/list&gt;
            &lt;/entry&gt;
        &lt;/map&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">
servlet-context.xmlにHandlerExceptionResolver実装クラスが複数指定されている場合は、各beanのプロパティとして、
以下のようにプロパティを追加することで優先順位付けをすることができる（直接HandlerExceptionResolverを実装している場合は、合わせてorg.springframework.core.Orderedインタフェースも実装する）。

</p>
<div class="figure">
<a name="N15562"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;優先順位のプロパティ</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;property name="order" value="x" /&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
</ul>
</div>
<p>

</p>
<p>

</p>
<p>・HandlerExceptionResolverを実装したクラス（SimpleMappingExceptionResolver、DefaultHandlerExceptionResolver）などを利用する
</p>
<p>・HandlerExceptionResolverを実装したクラスを作成し、servlet-context.xmlにbeanとして登録する
</p>
</div>
<br>
<br>
<a name="tubame_5.11.2.1." id="category_500"></a>
<h3 class="title">5.11.2.1.モジュール単位の例外処理設定</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>上位レベルの見出し参照</p>
</div>
<br>
<br>
<a name="tubame_5.11.2.2." id="category_501"></a>
<h3 class="title">5.11.2.2.XDocletによる例外処理設定</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>XDocletで例外の設定が可能である。</p>
<p>＠struts.action-exceptionアノテーションがコメント中に記載されている場合、struts-config.xmlの内容が自動生成されるため、モジュール単位の例外処理設定と同様の移行を検討する</p>
</div>
<br>
<br>
<a name="tubame_5.11.3." id="category_498"></a>
<h3 class="title">5.11.3.ModuleException処理の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1でorg.apache.struts.util.ModuleExceptionを利用している場合、try-catchで例外をハンドリングする方式での対応が良いと考えられる。</p>
</div>
<br>
<br>
<a name="tubame_5.11.4." id="category_497"></a>
<h3 class="title">5.11.4.独自のExceptionHandlerクラスの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>独自のExceptionHandlerを使用している個所を確認し、モジュール単位の例外処理に使用している場合は「モジュール単位の例外」の移行手順に応じて、Action単位の例外処理に利用している場合は「Action単位の例外」の移行手順に応じて移行を検討する</p>
</div>
<br>
<br>
<a name="tubame_6."></a>
<h2 class="title">6.Viewの移行</h2>
<br>
<a name="tubame_6.1." id="category_335"></a>
<h3 class="title">6.1.Struts独自タグ</h3>
<br>
<br>
<a name="tubame_6.1.1." id="category_677"></a>
<h3 class="title">6.1.1.Struts独自タグの宣言の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCでは、独自タグとしてspring（<span class="command"><strong><a class="command" href="http://www.springframework.org/tags" target="_top">http://www.springframework.org/tags</a></strong></span>）、form（<span class="command"><strong><a class="command" href="http://www.springframework.org/tags/form" target="_top">http://www.springframework.org/tags/form</a></strong></span>）が提供されている。</p>
<p>
<a name="portingStrutsDependsTag"></a>Struts1の独自タグとの比較については、以下の各項目を参照。</p>
</div>
<br>
<br>
<a name="tubame_6.1.2." id="category_336"></a>
<h3 class="title">6.1.2.beanタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
Struts1のbeanタグとSpringMVCでの対応を以下に示す。
</p>
<div class="table">
<a name="strutsBeanTag"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts1 -&gt; SpringMVC</b>
</p>
<div class="table-contents">
<table summary="Struts1 -> SpringMVC" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Struts1 Tag</th><th>JSTL Tag</th><th>SpringMVC Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td>cookie</td><td>c:set, EL</td><td>無し</td>
</tr>
<tr>
<td>define</td><td>c:set, EL</td><td>無し</td>
</tr>
<tr>
<td>header</td><td>c:set, EL</td><td>無し</td>
</tr>
<tr>
<td>include</td><td>c:import</td><td>無し</td>
</tr>
<tr>
<td>message</td><td>fmt:bundle, fmt:setBundle, fmt:message, fmt:param
</td><td>spring:message</td>
</tr>
<tr>
<td>page</td><td>c:set, EL</td><td>無し</td>
</tr>
<tr>
<td>parameter</td><td>c:set, EL</td><td>無し</td>
</tr>
<tr>
<td>resource</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>size</td><td>fn:length</td><td>無し</td>
</tr>
<tr>
<td>struts</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>write</td><td>c:out, EL</td><td>無し</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.1." id="category_337"></a>
<h3 class="title">6.1.2.1.Struts独自タグbean:cookieの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:cookieと同等な機能は、EL及びJSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="N13EAF"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cookieを取得</td><td>

<pre class="programlisting">
&lt;bean:cookie id="cookie" name="JSESSIONID"/&gt;
&lt;bean:write name="cookie" property="value"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${cookie["JSESSIONID"].value}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="jsessionid" value="${cookie["JSESSIONID"]}"/&gt;
&lt;c:out value="${jsessionid.value}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.2." id="category_338"></a>
<h3 class="title">6.1.2.2.Struts独自タグbean:defineの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:defineと同等な機能は、EL及びJSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="N13EF9"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSP内で変数を定義して参照</td><td>

<pre class="programlisting">
&lt;bean:define id="sMsg" value="Hello Struts1"/&gt;
&lt;bean:write name="sMsg"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="sMsg" value="Hello JSTL"/&gt;
&lt;c:out value="${sMsg}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
<tr>
<td>リクエストスコープのBeanを参照</td><td>

<pre class="programlisting">
&lt;bean:define id="testBean" name="tbean" type="org.sample.struts1.extra.TestBean"/&gt;
&lt;bean:write name="testBean" property="username"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${tbean.username}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="username" value="${tbean}"/&gt;
&lt;c:out value="${username.username}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
<tr>
<td>セッションスコープのBeanを参照</td><td>

<pre class="programlisting">
&lt;bean:define id="testBeanSession" name="tbean_session" type="org.sample.struts1.extra.TestBean"/&gt;
&lt;bean:write name="testBeanSession" property="username"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${tbean_session.username}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="username_s" value="${tbean_session}"/&gt;
&lt;c:out value="${username_s.username}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
<tr>
<td>リクエストスコープのBeanのプロパティを参照</td><td>

<pre class="programlisting">
&lt;bean:define id="uid" name="tbean" type="java.lang.String" property="username"/&gt;
&lt;bean:write name="uid"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${tbean.username}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="uid" value="${tbean.username}"/&gt;
&lt;c:out value="${uid}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
<tr>
<td>セッションスコープの変数を定義して参照</td><td>

<pre class="programlisting">
&lt;bean:define id="data_s1" value="Hello Struts1" toScope="session"/&gt;\
&lt;bean:write name="data_s1"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="data_jstl" value="Hello JSTL" scope="session"/&gt;
&lt;c:out value="${sessionScope.data_jstl}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.3." id="category_339"></a>
<h3 class="title">6.1.2.3.Struts独自タグbean:headerの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

bean:headerと同等な機能は、EL及びJSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="N13FF0"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td> Headerを取得</td><td>

<pre class="programlisting">
&lt;bean:header id="hdata" name="User-Agent"/&gt;
&lt;bean:write name="hdata"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${header["User-Agent"]}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="userAgent" value="${header['User-Agent']}"/&gt;
&lt;c:out value="${userAgent}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.4." id="category_340"></a>
<h3 class="title">6.1.2.4.Struts独自タグbean:includeの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:includeと同等な機能はJSTL及びSpringMVC対応可能。
</p>
<div class="table">
<a name="beanInclude"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>include</td><td>

<pre class="programlisting">
&lt;bean:include id="s1_child" page="/include/s1_child.jsp"/&gt;
&lt;bean:write name="s1_child"/&gt;
</pre>
※
bean:includeは/WEB-INF配下のリソースを読むことができない。c:import、s:includeは/WEB-INF配下でも読みこむことができる
</td><td>

<pre class="programlisting">
-
</pre>

</td><td>

<pre class="programlisting">
&lt;c:import var="jstl_child" url="/WEB-INF/include/jstl_child.jsp"/&gt;
&lt;c:out value="${jstl_child}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;s:include value="/WEB-INF/include/s2_child.jsp"/&gt;
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.5." id="category_341"></a>
<h3 class="title">6.1.2.5.Struts独自タグbean:messageの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:messageと同等な機能は、EL及びJSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="beanMessage"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>メッセージを表示</td><td>

<pre class="programlisting">
&lt;bean:message key="global.test7" arg0="struts1"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td><td>

<pre class="programlisting">
&lt;fmt:bundle basename="global"&gt;
&lt;fmt:message key="global.test7"&gt;
&lt;fmt:param value="jstl"/&gt;
&lt;/fmt:message&gt;
&lt;/fmt:bundle&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;spring:message code="global.test7" arguments="SpringMVC"/&gt;
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.6." id="category_342"></a>
<h3 class="title">6.1.2.6.Struts独自タグbean:pageの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:pageと同等な機能は、JSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="beanPage"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>セッション情報をページスコープに登録して参照</td><td>

<pre class="programlisting">
&lt;bean:define id="data_s1" value="Hello Struts1" toScope="session"/&gt;
&lt;bean:page id="s1_session" property="session"/&gt;
${s1_session.getAttribute("data_s1")}
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="data_jstl" value="Hello JSTL" scope="session"/&gt;
&lt;c:set var="jstl_session" value="${sessionScope}"/&gt;
&lt;c:out value="${jstl_session.data_jstl}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.7." id="category_343"></a>
<h3 class="title">6.1.2.7.Struts独自タグbean:parameterの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:parameterと同等な機能は、EL及びJSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="N1411F"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>リクエストパラメータを参照</td><td>

<pre class="programlisting">
&lt;bean:parameter id="foo_s1" name="foo"/&gt;
&lt;bean:write name="foo_s1"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${param.foo}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:set var="foo_jstl" value="${param.foo}"/&gt;
&lt;c:out value="${foo_jstl}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.8." id="category_344"></a>
<h3 class="title">6.1.2.8.Struts独自タグbean:resourceの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="beanResource"></a>このタグでは、現在のWebアプリケーションのリソースファイル（JSPやXMLファイルなど）を読み込むことができる。移行時は、Controller側で読み込み処理と、必要な情報の抽出を行う。</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.9." id="category_345"></a>
<h3 class="title">6.1.2.9.Struts独自タグbean:sizeの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
bean:sizeと同等な機能は、EL及びJSTLで対応可能で、SpringMVCでは存在しない
</p>
<div class="table">
<a name="beanSize"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>コレクションのサイズを取得</td><td>

<pre class="programlisting">
&lt;bean:define id="testBean" name="tbean" type="org.sample.struts1.extra.TestBean"/&gt;
&lt;bean:size id="size" name="testBean" property="testMap"/&gt;
&lt;bean:write name="size"/&gt;
</pre>

</td><td>

<pre class="programlisting">
${fn:length(tbean.testMap)}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:out value="${fn:length(tbean.testMap)}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.10." id="category_346"></a>
<h3 class="title">6.1.2.10.Struts独自タグbean:strutsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="beanStruts"></a>struts-config.xmlから情報を取得するためのタグなので、移植は不可</p>
</div>
<br>
<br>
<a name="tubame_6.1.2.11." id="category_347"></a>
<h3 class="title">6.1.2.11.Struts独自タグbean:writeの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>&lt;c:out&gt;や${}によりBeanのプロパティを表示する</p>
</div>
<br>
<br>
<a name="tubame_6.1.3." id="category_348"></a>
<h3 class="title">6.1.3.bean-elタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibの<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">beanタグ</a></strong></span>の該当するものと同様の対処を行う</p>
</div>
<br>
<br>
<a name="tubame_6.1.3.1." id="category_349"></a>
<h3 class="title">6.1.3.1.Struts独自タグbean-el:includeの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">「beanタグの移行」</a></strong></span>
及び

<span class="command"><strong><a class="command" href="#beanInclude" title="Table&nbsp;1.&nbsp;Tag Sample">「bean:include」</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.3.2." id="category_350"></a>
<h3 class="title">6.1.3.2.Struts独自タグbean-el:messageの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">「beanタグの移行」</a></strong></span>
及び

<span class="command"><strong><a class="command" href="#beanMessage" title="Table&nbsp;1.&nbsp;Tag Sample">「bean:message」</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.3.3." id="category_351"></a>
<h3 class="title">6.1.3.3.Struts独自タグbean-el:pageの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">「beanタグの移行」</a></strong></span>
及び

<span class="command"><strong><a class="command" href="#beanPage" title="Table&nbsp;1.&nbsp;Tag Sample">「bean:page」</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.3.4." id="category_352"></a>
<h3 class="title">6.1.3.4.Struts独自タグbean-el:resourceの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">「beanタグの移行」</a></strong></span>
及び

<span class="command"><strong><a class="command" href="#beanResource">「bean:resource」</a></strong></span>
を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.3.5." id="category_353"></a>
<h3 class="title">6.1.3.5.Struts独自タグbean-el:sizeの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">「beanタグの移行」</a></strong></span>
及び

<span class="command"><strong><a class="command" href="#beanSize" title="Table&nbsp;1.&nbsp;Tag Sample">「bean:size」</a></strong></span>
を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.3.6." id="category_354"></a>
<h3 class="title">6.1.3.6.Struts独自タグbean-el:strutsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

<span class="command"><strong><a class="command" href="#strutsBeanTag" title="Table&nbsp;1.&nbsp;Struts1 -> SpringMVC">「beanタグの移行」</a></strong></span>
及び

<span class="command"><strong><a class="command" href="#beanStruts">「bean:struts」</a></strong></span>
を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.4." id="category_355"></a>
<h3 class="title">6.1.4.htmlタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<div class="table">
<a name="htmlTag"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts1のhtmlタグの対応表</b>
</p>
<div class="table-contents">
<table summary="Struts1のhtmlタグの対応表" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Struts1 Tag</th><th>JSTL Tag</th><th>SpringMVC Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td>base</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>button</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>cancel</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>checkbox</td><td>無し</td><td>form:checkbox</td>
</tr>
<tr>
<td>errors</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>file</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>form</td><td>無し</td><td>form:form</td>
</tr>
<tr>
<td>frame</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>hidden</td><td>無し</td><td>form:hidden</td>
</tr>
<tr>
<td>html</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>image</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>img</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>javascript</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>link</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>messages</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>multibox</td><td>無し</td><td>form:checkbox</td>
</tr>
<tr>
<td>option</td><td>無し</td><td>form:option</td>
</tr>
<tr>
<td>options</td><td>無し</td><td>form:options</td>
</tr>
<tr>
<td>optionsCollection</td><td>無し</td><td>form:options</td>
</tr>
<tr>
<td>param</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>password</td><td>無し</td><td>form:password</td>
</tr>
<tr>
<td>radio</td><td>無し</td><td>form:radiobutton</td>
</tr>
<tr>
<td>reset</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>rewrite</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>select</td><td>無し</td><td>form:select</td>
</tr>
<tr>
<td>submit</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>text</td><td>無し</td><td>form:input</td>
</tr>
<tr>
<td>textarea</td><td>無し</td><td>form:textarea</td>
</tr>
<tr>
<td>xhtml</td><td>無し</td><td>無し</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
</div>
<br>
<br>
<a name="tubame_6.1.4.1." id="category_356"></a>
<h3 class="title">6.1.4.1.Struts独自タグhtml:baseの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlBase"></a>html:baseと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない
</p>
<p>

</p>
<div class="table">
<a name="N1434C"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:baseの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:baseの属性詳細" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>server</td><td>&lt;base&gt;のhrefに設定されるサーバ名を指定する（必須ではない）	</td>
</tr>
<tr>
<td>ref</td><td>

<p>ref属性がpage（デフォルト）の場合は、表示しているJSPのファイルパスが使用される。</p>

<p>例えば、WEB-INF/foo.jspが表示されている場合は、&lt;base
href="http://&lt;server&gt;:&lt;port&gt;/&lt;context&gt;/WEB-INF/foo.jsp"&gt;となる。</p>

<p>ref="site"の場合は、&lt;base
href="http://&lt;server&gt;:&lt;port&gt;/&lt;context&gt;"&gt;となる。この場合、モジュールは無視される</p>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.2." id="category_357"></a>
<h3 class="title">6.1.4.2.Struts独自タグhtml:buttonの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlButton"></a>html:buttonと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.3." id="category_358"></a>
<h3 class="title">6.1.4.3.Struts独自タグhtml:cancelの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlCancel"></a>html:cancelと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
<p>このボタンが必要な場合は、Validationを回避するか、もしくは、Validation結果を無視する実装を行う</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.4." id="category_359"></a>
<h3 class="title">6.1.4.4.Struts独自タグhtml:checkboxの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlCheckbox"></a>html:checkboxはSpringMVCのform:checkboxが対応する
</p>
<div class="table">
<a name="N14396"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:checkboxの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:checkboxの属性詳細" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>属性利用サンプル</th><th>生成されるHTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>property</td><td>チェックされたチェックボックスの値を格納するプロパティ名	</td><td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr>
<td rowspan="2">value</td><td rowspan="2">

<p>チェックボックスの値。</p>

<p>指定しなかった場合はonが設定される。</p>

<p>html:checkboxのコンテンツ部分は指定しても無視される</p>

</td><td>

<pre class="programlisting">
&lt;html:checkbox property="data" value="a"/&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;input type="checkbox" name="data" value="a" /&gt;
</pre>


</td>
</tr>
<tr>
<td>

<pre class="programlisting">
&lt;html:checkbox property="data"/&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;input type="checkbox" name="data" value="on"/&gt;
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N143E7"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCのform:checkboxでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのform:checkboxでの対応" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>タグ利用サンプル</th><th>生成されるHTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td><td>チェックされたチェックボックスの値を格納するプロパティ名	</td><td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr>
<td rowspan="2">value</td><td rowspan="2">

<p>チェックボックスの値。</p>

<p>指定しなかった場合は、Model側では必ずBoolean型で受け取らなければならない。</p>

<p>
タグform:checkboxのコンテンツ部分を指定することは出来ない。
</p>

<p>&lt;input
type="checkbox"&gt;では、チェックされない場合は値が送信されないため、送信されていない値を確認するために&lt;input
type="hidden"&gt;を自動生成している。
（
<span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-checkboxtag" target="_top">http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-checkboxtag
</a></strong></span>
）
</p>

</td><td>

<pre class="programlisting">
&lt;form:checkbox path="data" label="${message1}" value="a"/&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;input id="data1" name="data" type="checkbox" value="a"/&gt;&lt;label for="data1"&gt;check1&lt;/label&gt;
&lt;input type="hidden" name="_data" value="on"/&gt;
</pre>

</td>
</tr>
<tr>
<td>

<pre class="programlisting">
&lt;form:checkbox path="checked" label="${message1}"/&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;input id="checked1" name="checked" type="checkbox" value="true"/&gt;&lt;label for="checked1"&gt;check1&lt;/label&gt;
&lt;input type="hidden" name="_checked" value="on"/&gt;
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p>
移植サンプルは
<span class="command"><strong><a class="command" href="#strutsHtmlTagPortingSample">htmlタグの移植検討詳細</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.5." id="category_360"></a>
<h3 class="title">6.1.4.5.Struts独自タグhtml:errorsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlErrors"></a>html:errorsはSpringMVCのform:errorsで対応する</p>
<div class="table">
<a name="N14452"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:errorsの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:errorsの属性詳細" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td><td>ActionMessagesを格納した際に指定したキー。デフォルトはGlobals.ERROR_KEY</td>
</tr>
<tr>
<td>property</td><td>ActionMessagesにActionMessageを登録する際に指定するキー（例えば入力フィールドの名前など）
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N14469"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCのform:errorsでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのform:errorsでの対応" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>form:errorsの属性</td><td>Validationエラーメッセージを表示する対象のプロパティ名。「*」を指定した場合は、Validationエラーが発生したすべてのプロパティのメッセージが表示される</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
</div>
<br>
<br>
<a name="tubame_6.1.4.6." id="category_361"></a>
<h3 class="title">6.1.4.6.Struts独自タグhtml:fileの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlFile"></a>html:fileと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.7." id="category_362"></a>
<h3 class="title">6.1.4.7.Struts独自タグhtml:formの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlForm"></a>html:formはSpringMVCのform:formで対応する</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.8." id="category_363"></a>
<h3 class="title">6.1.4.8.Struts独自タグhtml:frameの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlFrame"></a>html:frameと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.9." id="category_364"></a>
<h3 class="title">6.1.4.9.Struts独自タグhtml:hiddenの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlHidden"></a>html:formはSpringMVCのform:hiddenが対応する</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.10." id="category_365"></a>
<h3 class="title">6.1.4.10.Struts独自タグhtml:htmlの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlHtml"></a>html:htmlと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.11." id="category_366"></a>
<h3 class="title">6.1.4.11.Struts独自タグhtml:imageの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlImage"></a>html:imageと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.12." id="category_367"></a>
<h3 class="title">6.1.4.12.Struts独自タグhtml:imgの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlImg"></a>html:imgと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.13." id="category_368"></a>
<h3 class="title">6.1.4.13.Struts独自タグhtml:javascriptの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlJavaScript"></a>html:javascriptと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない。

strutsのhtml:javascriptについては、<span class="command"><strong><a class="command" href="#htmlJavaScript" title="Figure&nbsp;5.&nbsp;javascriptタグサンプル"></a></strong></span>を参照。

</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.14." id="category_369"></a>
<h3 class="title">6.1.4.14.Struts独自タグhtml:linkの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlLink"></a>html:linkは、SpringMVCのspring:urlが対応する</p>
<div class="table">
<a name="N144F3"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:linkの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:linkの属性詳細" border="1">
<colgroup>
<col class="col1">
<col class="col2">
<col class="col3">
<col class="col4">
</colgroup>
<thead>
<tr>
<th>属性名</th><th>説明</th><th>JSPへの記述内容(及び生成されたHTML)</th><th>実際のURL</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td><td>&lt;action&gt;のname属性値を設定</td><td>

<pre class="programlisting">
&lt;a href="/ExtraTest/test19-action.do
</pre>

<pre class="programlisting">
&lt;a href="/ExtraTest/test19-action.do
</pre>

</td><td>&nbsp;</td>
</tr>
<tr>
<td>forward</td><td>&lt;global-forward&gt;に定義されている&lt;forward&gt;のname属性値を設定。ただし、&lt;forward&gt;のpath属性はコンテキストルートからの実パスとみなされる（/WEB-INF/foo.jspなど、ブラウザからアクセスできないパスを指定することは出来ない）
</td><td>

<pre class="programlisting">
&lt;html:link forward="success19"
</pre>

<pre class="programlisting">
&lt;a href="/ExtraTest/forward/success19_f.jsp"
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="9">href</td><td colspan="2">&lt;global-forward&gt;に定義されている&lt;forward&gt;のname属性値を設定。ただし、&lt;forward&gt;のpath属性はコンテキストルートからの実パスとみなされる（/WEB-INF/foo.jspなど、ブラウザからアクセスできないパスを指定することは出来ない）
</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td colspan="2">1. 絶対パスの場合</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>(1) schemeを含めて記述する</td><td>

<pre class="programlisting">
&lt;html:link href="http://www.google.com"
</pre>

<pre class="programlisting">
&lt;a href="http://www.google.com"
</pre>

</td><td>http://www.google.com</td>
</tr>
<tr>
<td>(2) コンテキスト名から記述する</td><td>

<pre class="programlisting">
&lt;html:link href="/manager/html"
</pre>

<pre class="programlisting">
&lt;a href="/manager/html"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/manager/html
</td>
</tr>
<tr>
<td colspan="2">2. 相対パスの場合</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="2">(1)
&lt;html:base/&gt;が無い、もしくは、&lt;html:base
ref="page"/&gt;の場合（カレントディレクトリは&lt;コンテキストルート&gt;/WEB-INFとなる）
</td><td>

<pre class="programlisting">
&lt;html:link href="../forward/success19_f.jsp"
</pre>

<pre class="programlisting">
&lt;a href="../forward/success19_f.jsp"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/ExtraTest/forward/success19_f.jsp
</td>
</tr>
<tr>
<td>

<pre class="programlisting">
&lt;html:link href="success19_g.jsp"
</pre>

<pre class="programlisting">
&lt;a href="../forward/success19_f.jsp"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/ExtraTest/WEB-INF/success19_g.jsp
</td>
</tr>
<tr>
<td rowspan="2">(2) &lt;html:base
ref="site"/&gt;の場合（カレントディレクトリは&lt;コンテキストルート&gt;となる）
</td><td>


<pre class="programlisting">
&lt;html:link href="../forward/success19_f.jsp"
</pre>

<pre class="programlisting">
&lt;a href="../forward/success19_f.jsp"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/forward/success19_f.jsp
</td>
</tr>
<tr>
<td>

<pre class="programlisting">
&lt;html:link href="success19_g.jsp"
</pre>

<pre class="programlisting">
&lt;a href="success19_g.jsp"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/ExtraTest/success19_g.jsp

</td>
</tr>
<tr>
<td rowspan="2">page</td><td rowspan="2">モジュールパスからのパスを指定する（必ず「/」で始める）
</td><td>

<pre class="programlisting">
&lt;html:link page="/forward/success19_f.jsp"
</pre>

<pre class="programlisting">
&lt;a href="/ExtraTest/forward/success19_f.jsp"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/ExtraTest/forward/success19_f.jsp
</td>
</tr>
<tr>
<td>

<pre class="programlisting">
&lt;html:link page="/../manager/html"
</pre>

<pre class="programlisting">
&lt;a href="/ExtraTest/../manager/html"
</pre>

</td><td>http://&lt;server&gt;:&lt;port&gt;/manager/html
</td>
</tr>
<tr>
<td rowspan="7">paramName</td><td colspan="2">paramId、paramPropertyと組み合わせで指定する</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="3">(1)paramId、paramNameの組み合わせの場合。
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
paramIdにはQueryStringに設定するパラメータ名を指定する。
</p>
</li>
<li class="listitem">
<p>
paramNameにはString型のデータを格納したキーを指定する。
</p>
</li>
</ul>
</div>

</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Javaコード </p>
</li>
</ul>
</div>

<pre class="programlisting">
request.setAttribute("singleValue1", "single1");
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSP</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;html:link action="/test19-action" paramId="singleValue1" paramName="singleValue1"&gt;
Query String(#1)
&lt;/html:link&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSPで生成されるHTML</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;a href="/ExtraTest/test19-action.do?singleValue1=single1"&gt;Query String(#1)&lt;/a&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="3">(2)paramId、paramName、paramPropertyの組み合わせの場合。
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
paramIdにはQueryStringに設定するパラメータ名を指定する。
</p>
</li>
<li class="listitem">
<p>
paramNameにはparamProperty値をフィールドとして持つBean名を指定する。
</p>
</li>
<li class="listitem">
<p>
paramPropertyにはBeanのフィールド名を指定する。
</p>
</li>
</ul>
</div>

</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Javaコード </p>
</li>
</ul>
</div>

<pre class="programlisting">
SingleParameter sp = new SingleParameter("single2");
request.setAttribute("singleValue2", sp);
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSP</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;html:link action="/test19-action" paramId="singleValue2" paramName="singleValue2" paramProperty="singleParameter"&gt;
Query String(#2)
&lt;/html:link&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSPで生成されるHTML</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;a href="/ExtraTest/test19-action.do?singleValue2=single2"&gt;Query String(#2)&lt;/a&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="7">name</td><td colspan="2">propertyとの組み合わせで指定する</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="3">(1)nameのみの場合。
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
nameにはMap型のデータを格納したキーを指定する。
</p>
</li>
</ul>
</div>

</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Javaコード</p>
</li>
</ul>
</div>

<pre class="programlisting">
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put("map1", "data1");
map.put("map2", "data2");
map.put("map3", "data3");
request.setAttribute("mapValue1", map);
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSP</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;html:link action="/test19-action" name="mapValue1"&gt;
Query String(#3)
&lt;/html:link&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSPで生成されるHTML</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;a href="/ExtraTest/test19-action.do?map3=data3&amp;amp;map2=data2&amp;amp;map1=data1"&gt;Query String(#3)&lt;/a&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="3">(2)name、propertyの組み合わせの場合。
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
nameにはproperty値をフィールドとして持つBean名を指定する。
</p>
</li>
<li class="listitem">
<p>
propertyにはMap型データを格納したフィールド名を指定する。
</p>
</li>
</ul>
</div>

</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Javaコード</p>
</li>
</ul>
</div>

<pre class="programlisting">
Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
map.put("map1", "data1");
map.put("map2", "data2");
map.put("map3", "data3");

MappedParameter mp = new MappedParameter(map);
request.setAttribute("mapValue2", mp);
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSP</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;html:link action="/test19-action" name="mapValue2" property="mappedValue"&gt;
Query String(#4)
&lt;/html:link&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSPで生成されるHTML</p>
</li>
</ul>
</div>

<pre class="programlisting">
&lt;a href="/ExtraTest/test19-action.do?map3=data3&amp;amp;map2=data2&amp;amp;map1=data1"&gt;Query String(#4)&lt;/a&gt;&lt;br&gt;
</pre>

</td><td class="auto-generated">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N146E5"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCの&lt;spring:url&gt;での対応
</b>
</p>
<div class="table-contents">
<table summary="SpringMVCの<spring:url>での対応
" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性名</th><th>説明</th><th>valueとcontextの組み合わせ</th><th>生成されたURL</th><th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td><td>作成するURLのベースとなる部分を指定する。valueの指定の仕方に応じて生成されるURLが変わる</td><td>value="http://www.foo.com"</td><td>http://www.foo.com</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td rowspan="5">context</td><td rowspan="5">作成するURLのコンテキストを指定する。デフォルトは現在のコンテキスト</td><td>value="http://www.foo.com" context="bar"
</td><td>http://www.foo.com
</td><td>contextは無視される
</td>
</tr>
<tr>
<td>value="foo"</td><td>foo</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>value="foo" context="bar"</td><td>foo</td><td>contextは無視される
</td>
</tr>
<tr>
<td>value="/foo"
</td><td>/&lt;現在のコンテキスト&gt;/foo</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>value="/foo" context="bar"</td><td>/bar/foo</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>var</td><td>作成したURLを格納する変数名を指定する</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>scope</td><td>varに指定した変数を格納するスコープを指定する</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>htmlEscape</td><td>HTMLエスケープを行う。デフォルトはfalse</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>javaScriptEscape</td><td>JavaScriptエスケープを行う。デフォルトはfalse</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>spring:mvcUrl関数</p>
<p>SpringMVC4.1から、&lt;spring&gt;タグが提供する関数として「mvcUrl」が新しく提供されている。これを利用することで、Controllerのクラス名とメソッド名からURLを生成することができる。ただし、以下の点に注意が必要となる
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>生成されるURLは&lt;base&gt;の影響を受けない</p>
</li>
<li class="listitem">
<p>mvcUrlには引数として「&lt;クラス名の英文字の大文字部分&gt;#メソッド名を渡す」が、一意に決定できない場合はIllegalArgumentExceptionとなる
</p>
<p>
例えば、以下のようなクラスとメソッドがあった場合には、どちらもFB#executeとなるためIllegalArgumentExceptionとなる

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>FooBar1クラスのexecuteメソッド</p>
</li>
<li class="listitem">
<p>FooBar2クラスのexecuteメソッド</p>
</li>
</ul>
</div>
<p>

</p>
<div class="table">
<a name="N14752"></a>
<p class="title">
<b>Table&nbsp;3.&nbsp;spring:mvcUrl関数の利用例</b>
</p>
<div class="table-contents">
<table summary="spring:mvcUrl関数の利用例" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>(1) FooBar1クラスのexecuteメソッドが「/foo」にマッピングされている場合
</td><td>mvcUrlの引数に「クラス名の省略形#メソッド名」のみ指定する</td><td>${spring:mvcUrl('FB#execute').build()}</td><td>http://&lt;host&gt;:&lt;port&gt;/&lt;context&gt;/foo
</td>
</tr>
<tr>
<td>(2)
FooBar1クラスのexecuteメソッドが「/foo/{name}」にマッピングされている場合</td><td>この場合、(1)のようにbuildを使うのではなく、buildAndExpandを利用することで{name}に値を入れることができる。buildAndExpandには、@PathVariableで受け取らないパス変数を順番に記述する
</td><td>${spring:mvcUrl('FB#execute').buildAndExpand('bar')}
</td><td>http://&lt;host&gt;:&lt;port&gt;/&lt;context&gt;/foo/bar
</td>
</tr>
<tr>
<td>(3)
FooBar1クラスのexecuteメソッドが「/foo/{id}」にマッピングされ、引数に@PathVariable("id")が指定されている場合
</td><td>この場合、arg()を使用する。argの第一引数はパス変数の位置、第二引数は値となる</td><td>${spring:mvcUrl('FB#execute').arg(0, '1').build()}
</td><td>http://&lt;host&gt;:&lt;port&gt;/&lt;context&gt;/foo/1
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<p>

</p>
</td>
</tr>
</table>
</div>
</div>
<br>
<br>
<a name="tubame_6.1.4.15." id="category_370"></a>
<h3 class="title">6.1.4.15.Struts独自タグhtml:messagesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlMessages"></a>html:messagesはSpringMVCのspring:messageが対応する</p>
<div class="table">
<a name="N14783"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:messagesの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:messagesの属性詳細" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td><td>取得したメッセージを格納するBean名</td>
</tr>
<tr>
<td>name</td><td>ActionMessagesを格納した際に指定したキー。message属性が"true"以外の場合に有効となる
</td>
</tr>
<tr>
<td rowspan="2">message</td><td>message="true"の場合、Globals.MESSAGE_KEYをキーとしてActionMessagesを取得する
</td>
</tr>
<tr>
<td>
messageが指定されていない場合、name属性の有無によりActionMessagesを取得する際のキーが変わる

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>name属性が指定されている場合：指定された属性値をキーとして取得する</p>
</li>
<li class="listitem">
<p>name属性が指定されていない場合：Globals｡ERROR_KEYをキーとして取得する</p>
</li>
</ul>
</div>

</td>
</tr>
<tr>
<td>property</td><td>ActionMessagesにActionMessageを登録する際に指定するキー（例えば入力フィールドの名前など）
struts-validatorを使用している場合は、対応するフィールド名を指定
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N147B0"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCのspring:messageでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのspring:messageでの対応" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td><td>メッセージが格納されたリソースキーを指定する</td>
</tr>
<tr>
<td>arguments</td><td>メッセージの引数を指定する</td>
</tr>
<tr>
<td>text</td><td>codeに対応するメッセージが存在しない場合に表示するメッセージを指定する</td>
</tr>
<tr>
<td>var</td><td>取得したメッセージを格納するBean名を指定する</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p>
移植サンプルは<span class="command"><strong><a class="command" href="#strutsHtmlTagPortingSample">htmlタグの移植検討詳細</a></strong></span>を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.16." id="category_371"></a>
<h3 class="title">6.1.4.16.Struts独自タグhtml:multiboxの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlMultibox"></a>html:multiboxはSpringMVCのspring:checkboxが対応する</p>
<div class="table">
<a name="N147E4"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:multiboxの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:multiboxの属性詳細" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>属性利用サンプル</th><th>生成されるHTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>property</td><td>チェックされたチェックボックスの値を格納するプロパティ名	</td><td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr>
<td rowspan="2">value</td><td rowspan="2">チェックボックスの値。指定しなかった場合は&lt;multibox&gt;タグのコンテンツ部分が生成された&lt;input type="checkbox"&gt;のvalue属性値となる
どちらも指定されていない場合は、Exceptionが発生する
</td><td>&lt;html:multibox property="data" value="a"/&gt;</td><td>&lt;input type="checkbox" name="data" value="a"/&gt;
</td>
</tr>
<tr>
<td>
&lt;html:multibox property="data"&gt;b&lt;/html:multibox&gt;

</td><td>&lt;input type="checkbox" name="data" value="b"/&gt;
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N1480C"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCのform:checkboxでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのform:checkboxでの対応" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>タグ利用サンプル</th><th>生成されるHTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td><td>チェックされたチェックボックスの値を格納するプロパティ名	</td><td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr>
<td rowspan="2">value</td><td>チェックボックスの値。指定しなかった場合は、Model側では必ずBoolean型で受け取らなければならない。
タグform:checkboxのコンテンツ部分を指定することは出来ない
</td><td>&lt;form:checkbox path="data" label="${message1}" value="a"/&gt;</td><td>
&lt;input id="data1" name="data" type="checkbox" value="a"/&gt;&lt;label for="data1"&gt;check1&lt;/label&gt;&lt;input type="hidden" name="_data" value="on"/&gt;
</td>
</tr>
<tr>
<td>&lt;input type="checkbox"&gt;では、チェックされない場合は値が送信されないため、送信されていない値を確認するために&lt;input type="hidden"&gt;を自動生成している（http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-checkboxtag）
</td><td>&lt;form:checkbox path="checked" label="${message1}"/&gt;</td><td>
&lt;input id="checked1" name="checked" type="checkbox" value="true"/&gt;&lt;label for="checked1"&gt;check1&lt;/label&gt;&lt;input type="hidden" name="_checked" value="on"/&gt;
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p>
移植サンプルは<span class="command"><strong><a class="command" href="#strutsHtmlTagPortingSample">htmlタグの移植検討詳細</a></strong></span>を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.17." id="category_372"></a>
<h3 class="title">6.1.4.17.Struts独自タグhtml:optionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlOption"></a>html:optionはSpringMVCのform:optionが対応する</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.18." id="category_373"></a>
<h3 class="title">6.1.4.18.Struts独自タグhtml:optionsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlOptions"></a>html:optionsはSpringMVCのform:optionsが対応する
</p>
<div class="table">
<a name="N14855"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts1のoptionタグ詳細</b>
</p>
<div class="table-contents">
<table summary="Struts1のoptionタグ詳細" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>組み合わせパターン</th>
</tr>
</thead>
<tbody>
<tr>
<td>collection</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
要素にBeanを持つCollection, Map, Iterator, Enumeration, 配列を指定
</p>
</li>
<li class="listitem">
<p>
collectionは何れかのスコープに登録されていれば良い
</p>
</li>
<li class="listitem">
<p>
property属性を必ず指定する（生成されたHTMLでは、optionタグのvalue属性となる）。labelProperty属性は指定しなくても良いが、指定しない場合はproperty属性の値がラベルとなる
</p>
</li>
</ul>
</div>

</td><td>
組み合わせパターン
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>collection, property</p>
</li>
<li class="listitem">
<p>collection, property, labelProperty</p>
</li>
</ol>
</div>


</td>
</tr>
<tr>
<td>name</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>                        
配列（要素はString）、もしくはフィールドにCollectionや配列を持つBean名を指定する
</p>
</li>
<li class="listitem">
<p>                        
BeanはPOJO、ActionForm（DynaActionForm）のどちらでも良い
</p>
</li>
<li class="listitem">
<p>                        
配列の場合は、各要素がoptionタグのvalue属性に設定される。同時にlabelNameを指定しなかった場合は、各要素がラベルとしても使用される
</p>
</li>
<li class="listitem">
<p>                        
Bean名の場合、property属性を必ず指定する。property属性にはコレクションを格納したBeanのフィールド名を指定する。同時にlabelNameを指定しなかった場合は、property属性で指定されたフィールドに格納された値がラベルとして使用される

</p>
</li>
</ul>
</div>

</td><td>
nameが配列の場合

<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>name</p>
</li>
<li class="listitem">
<p>name, labelName</p>
</li>
</ol>
</div>
nameがBeanの場合

<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>name, property</p>
</li>
<li class="listitem">
<p>name, property, labelName, labelProperty</p>
</li>
</ol>
</div>

</td>
</tr>
<tr>
<td>filter</td><td>true（デフォルト）の場合、optionタグのvalue、ラベルの値がエスケープされる（タグが含まれる場合、&lt;や&gt;などに変換される）
falseの場合、そのまま出力される
</td><td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N148A9"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCでの対応" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>Struts1との対応</th>
</tr>
</thead>
<tbody>
<tr>
<td>items</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
Collection, Map, 配列の何れかを、Modelもしくはセッションスコープに格納
</p>
</li>
<li class="listitem">
<p>
Collection、配列にはBeanを格納。optionタグのvalue属性に対応するフィールド名をｉｔｅｍＶａｌｕｅ、ラベルに対応するフィールド名をitemLabelに設定
</p>
</li>
<li class="listitem">
<p>
Mapの場合は、keyがvalue属性、valueがLabel属性に自動的に設定される
</p>
</li>
</ul>
</div>

</td><td>タグhtml:optionsでcollectionを指定した場合（ただし、Iterator、Enumerationは除く）、もしくは、タグhtml:optionsCollectionでnameを指定した場合
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p>
移植サンプルは
<span class="command"><strong><a class="command" href="#strutsHtmlTagPortingSample">htmlタグの移植検討詳細</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.19." id="category_374"></a>
<h3 class="title">6.1.4.19.Struts独自タグhtml:optionsCollectionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlOptionsCollection"></a>
</p>
<div class="table">
<a name="N148DC"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts1のoptionタグ詳細</b>
</p>
<div class="table-contents">
<table summary="Struts1のoptionタグ詳細" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>組み合わせパターン</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
要素にBeanを持つCollection, Map, Iterator, Enumeration、配列、もしくはフィールドにBeanの配列やコレクションを持つBean名を指定
</p>
</li>
<li class="listitem">
<p>
Collection, Map, Iterator, Enumerationの何れかの実装クラスの場合、nameは何れかのスコープに登録されていれば良い
</p>
</li>
<li class="listitem">
<p>
BeanはPOJO、ActionForm（DynaActionForm）のどちらでも良い
</p>
</li>
<li class="listitem">
<p>
各要素が特定のgetter（getValue(), getLavel()）を持つ場合は、value属性、label属性を省略する事ができる（getValue()のみある場合にvalue属性のみ省略、getLabel()のみある場合はlabel属性のみ省略、という事も可能）
</p>
</li>
<li class="listitem">
<p>
Beanの場合、property属性にコレクションを格納したフィールド名を指定する。name属性は省略可能。ただし、name属性が省略された場合は、ActionForm（DynaActionFormでも良い）が指定されたものとみなされる
この場合、タグhtml:selectのproperty属性を含むActionFormに、タグhtml:optionsCollectionのpropertyが含まれていなければならない（struts-config.xmlのタグactionに指定されたname属性値が使われるわけではない）
</p>
</li>
</ul>
</div>

</td><td>
組み合わせパターン
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>name</p>
</li>
<li class="listitem">
<p>name, value</p>
</li>
<li class="listitem">
<p>name, label</p>
</li>
<li class="listitem">
<p>name, value, label</p>
</li>
<li class="listitem">
<p>name, property</p>
</li>
<li class="listitem">
<p>name, property, value</p>
</li>
<li class="listitem">
<p>name, property, label</p>
</li>
<li class="listitem">
<p>name, property, value, label</p>
</li>
</ol>
</div>


</td>
</tr>
<tr>
<td>filter</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
配列（要素はString）、もしくはフィールドにCollectionや配列を持つBean名を指定する
</p>
</li>
<li class="listitem">
<p>
BeanはPOJO、ActionForm（DynaActionForm）のどちらでも良い
</p>
</li>
<li class="listitem">
<p>
配列の場合は、各要素がoptionタグのvalue属性に設定される。同時にlabelNameを指定しなかった場合は、各要素がラベルとしても使用される
</p>
</li>
<li class="listitem">
<p>
Bean名の場合、property属性を必ず指定する。property属性にはコレクションを格納したBeanのフィールド名を指定する。同時にlabelNameを指定しなかった場合は、property属性で指定されたフィールドに格納された値がラベルとして使用される
</p>
</li>
</ul>
</div>

</td><td class="auto-generated">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N14930"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCでの対応" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>Struts1との対応</th>
</tr>
</thead>
<tbody>
<tr>
<td>items</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
Collection, Map, 配列の何れかを、Modelもしくはセッションスコープに格納
</p>
</li>
<li class="listitem">
<p>
Collection、配列にはBeanを格納。optionタグのvalue属性に対応するフィールド名をitemValue、ラベルに対応するフィールド名をitemLabelに設定
</p>
</li>
<li class="listitem">
<p>
Mapの場合は、keyがvalue属性、valueがLabel属性に自動的に設定される
</p>
</li>
</ul>
</div>

</td><td>タグhtml:optionsでcollectionを指定した場合（ただし、Iterator、Enumerationは除く）、もしくは、タグhtml:optionsCollectionでnameを指定した場合
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
</div>
<br>
<br>
<a name="tubame_6.1.4.20." id="category_375"></a>
<h3 class="title">6.1.4.20.Struts独自タグhtml:paramの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlParam"></a>html:paramはSpringMVCのspring:paramが対応する</p>
<p>

</p>
<div class="table">
<a name="N14960"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:paramの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:paramの属性詳細" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>属性利用サンプル</th><th>生成されるHTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td><td>クエリパラメータ名を指定する（必須）</td><td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr>
<td>value</td><td>クエリパラメータの値を指定する。指定は必須ではない</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N14983"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:rewrite action="/foo"&gt;
	&lt;html:param name="a" value="b"/&gt;
	&lt;html:param name="c"/&gt;
	&lt;html:param name="d"&gt;e&lt;/html:param&gt;
&lt;/html:rewrite&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>

</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>生成されたHTML</p>
<div class="figure">
<a name="N14992"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
/&lt;コンテキスト&gt;/&lt;モジュール&gt;/foo.do?a=b&amp;c=&amp;d=e
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
<div class="table">
<a name="N1499C"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCのspring:paramでの対応</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのspring:paramでの対応" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><th>タグ利用サンプル</th><th>生成されるHTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td><td>クエリストリングに追加する変数名を指定する</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>JSP</p>
<div class="figure">
<a name="N149B8"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;spring:url value="bar"&gt;
  &lt;spring:param name="arg0"&gt;
    foo
  &lt;/spring:param&gt;
&lt;/spring:url&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>

</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>生成されたHTML</p>
<div class="figure">
<a name="N149C7"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
/&lt;現在のコンテキスト&gt;/bar?arg0=foo
</pre>
</div>
</div>
<br class="figure-break">
</li>
</ul>
</div>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.21." id="category_376"></a>
<h3 class="title">6.1.4.21.Struts独自タグhtml:passwordの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlPassword"></a>html:passwordはSpringMVCのform:passwordが対応する</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.22." id="category_377"></a>
<h3 class="title">6.1.4.22.Struts独自タグhtml:radioの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlRadio"></a>html:radioはSpringMVCのform:radiobuttonが対応する</p>
<div class="table">
<a name="N149EB"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;html:radioの属性詳細</b>
</p>
<div class="table-contents">
<table summary="html:radioの属性詳細" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><td class="auto-generated">&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td>property</td><td>選択値を格納するBeanのプロパティ名</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>idName</td><td>生成される&lt;input
type="radio"&gt;のvalue属性値を保持するBean名を指定する（必須ではない。詳細はvalue属性を参照）
</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>value</td><td>
&lt;input type="radio"&gt;のvalue属性値。idNameの指定有無により意味が異なる
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>idNameが指定されていない場合</p>
<p>valueに指定された値が、そのまま生成されたHTMLのvalue属性値に設定される</p>
</li>
<li class="listitem">
<p>idNameが指定されている場合</p>
<p>idNameに指定されたBeanのプロパティ名として使用され、取得された値が生成されたHTMLのvalue属性値に設定される
</p>
</li>
</ol>
</div>


</td><td class="auto-generated">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N14A13"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;SpringMVCのform:radiobutton属性詳細(一部抜粋)</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのform:radiobutton属性詳細(一部抜粋)" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><td class="auto-generated">&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td>path</td><td>選択値を格納するBeanのプロパティ名</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>value</td><td>&lt;input type="radio"&gt;のvalue属性値
</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>label</td><td>
&lt;input type="radio"&gt;の直後に&lt;label&gt;で囲まれて表示される文字列
</td><td class="auto-generated">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="table">
<a name="N14A2F"></a>
<p class="title">
<b>Table&nbsp;3.&nbsp;SpringMVCのform:radiobuttons属性詳細(一部抜粋)</b>
</p>
<div class="table-contents">
<table summary="SpringMVCのform:radiobuttons属性詳細(一部抜粋)" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>属性</th><th>説明</th><td class="auto-generated">&nbsp;</td>
</tr>
</thead>
<tbody>
<tr>
<td>items</td><td>Collection, Map, 配列の何れかを、Modelもしくはセッションスコープに格納
Collection、配列にはBeanを格納。&lt;option&gt;のvalue属性に対応するフィールド名をｉｔｅｍＶａｌｕｅ、ラベルに対応するフィールド名をitemLabelに設定
Mapの場合は、keyがvalue属性、valueがLabel属性に自動的に設定される</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>value</td><td>&lt;input type="radio"&gt;のvalue属性値
</td><td class="auto-generated">&nbsp;</td>
</tr>
<tr>
<td>label</td><td>
&lt;input type="radio"&gt;の直後に&lt;label&gt;で囲まれて表示される文字列
</td><td class="auto-generated">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p>
移植サンプルは<span class="command"><strong><a class="command" href="#strutsHtmlTagPortingSample">htmlタグの移植検討詳細</a></strong></span>を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.23." id="category_378"></a>
<h3 class="title">6.1.4.23.Struts独自タグhtml:resetの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlReset"></a>html:resetと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.24." id="category_379"></a>
<h3 class="title">6.1.4.24.Struts独自タグhtml:rewriteの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlRewrite"></a>html:rewriteと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.25." id="category_380"></a>
<h3 class="title">6.1.4.25.Struts独自タグhtml:selectの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlSelect"></a>html:selectはSpringMVCのform:selectが対応する</p>
<p>
移植サンプルは<span class="command"><strong>htmlタグの移植検討詳細</strong></span>を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.26." id="category_381"></a>
<h3 class="title">6.1.4.26.Struts独自タグhtml:submitの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlSubmit"></a>html:submitと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.27." id="category_382"></a>
<h3 class="title">6.1.4.27.Struts独自タグhtml:textの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlText"></a>html:textはSpringMVCのform:inputが対応する</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.28." id="category_383"></a>
<h3 class="title">6.1.4.28.Struts独自タグhtml:textareaの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlTextarea"></a>html:textareaはSpringMVCのform:inputが対応する</p>
</div>
<br>
<br>
<a name="tubame_6.1.4.29." id="category_384"></a>
<h3 class="title">6.1.4.29.Struts独自タグhtml:xhtmlの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlXhtml"></a>html:xhtmlと同等な機能を提供するタグは、JSTL及びSpringMVCでは存在しない</p>
</div>
<br>
<br>
<a name="tubame_6.1.5." id="category_385"></a>
<h3 class="title">6.1.5.html-elタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.1." id="category_386"></a>
<h3 class="title">6.1.5.1.Struts独自タグhtml-el:baseの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlBase">「html:base」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.2." id="category_387"></a>
<h3 class="title">6.1.5.2.Struts独自タグhtml-el:buttonの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlButton">「html:button」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.3." id="category_388"></a>
<h3 class="title">6.1.5.3.Struts独自タグhtml-el:cancelの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlCancel">「html:cancel」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.4." id="category_389"></a>
<h3 class="title">6.1.5.4.Struts独自タグhtml-el:checkboxの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlCheckbox">「html:checkbox」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.5." id="category_390"></a>
<h3 class="title">6.1.5.5.Struts独自タグhtml-el:errorsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlErrors">「html:errors」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.6." id="category_391"></a>
<h3 class="title">6.1.5.6.Struts独自タグhtml-el:fileの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlFile">「html:file」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.7." id="category_392"></a>
<h3 class="title">6.1.5.7.Struts独自タグhtml-el:formの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlForm">「html:form」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.8." id="category_393"></a>
<h3 class="title">6.1.5.8.Struts独自タグhtml-el:frameの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong>「html:frame」</strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.9." id="category_394"></a>
<h3 class="title">6.1.5.9.Struts独自タグhtml-el:hiddenの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlHidden">「html:hidden」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.10." id="category_395"></a>
<h3 class="title">6.1.5.10.Struts独自タグhtml-el:htmlの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlHtml">「html:html」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.11." id="category_396"></a>
<h3 class="title">6.1.5.11.Struts独自タグhtml-el:imageの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlImage">「html:image」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.12." id="category_397"></a>
<h3 class="title">6.1.5.12.Struts独自タグhtml-el:imgの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlImg">「html:img」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.13." id="category_398"></a>
<h3 class="title">6.1.5.13.Struts独自タグhtml-el:javascriptの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlJavaScript">「html:javascript」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.14." id="category_399"></a>
<h3 class="title">6.1.5.14.Struts独自タグhtml-el:linkの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlLink">「html:link」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.15." id="category_400"></a>
<h3 class="title">6.1.5.15.Struts独自タグhtml-el:messagesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlMessages">「html:messages」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.16." id="category_401"></a>
<h3 class="title">6.1.5.16.Struts独自タグhtml-el:multiboxの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlMultibox">「html:multibox」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.17." id="category_402"></a>
<h3 class="title">6.1.5.17.Struts独自タグhtml-el:optionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlOption">「html:option」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.18." id="category_403"></a>
<h3 class="title">6.1.5.18.Struts独自タグhtml-el:optionsの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlOptions">「html:options」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.19." id="category_404"></a>
<h3 class="title">6.1.5.19.Struts独自タグhtml-el:optionsCollectionの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlOptionsCollection">「html:optionsCollection」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.20." id="category_405"></a>
<h3 class="title">6.1.5.20.Struts独自タグhtml-el:paramの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlParam">「html:param」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.21." id="category_406"></a>
<h3 class="title">6.1.5.21.Struts独自タグhtml-el:passwordの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlPassword">「html:password」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.22." id="category_407"></a>
<h3 class="title">6.1.5.22.Struts独自タグhtml-el:radioの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlRadio">「html:radio」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.23." id="category_408"></a>
<h3 class="title">6.1.5.23.Struts独自タグhtml-el:resetの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlReset">「html:reset」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.24." id="category_409"></a>
<h3 class="title">6.1.5.24.Struts独自タグhtml-el:rewriteの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlRewrite">「html:rewrite」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.25." id="category_410"></a>
<h3 class="title">6.1.5.25.Struts独自タグhtml-el:selectの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlSelect">「html:select」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.26." id="category_411"></a>
<h3 class="title">6.1.5.26.Struts独自タグhtml-el:submitの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlSubmit">「html:submit」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.27." id="category_412"></a>
<h3 class="title">6.1.5.27.Struts独自タグhtml-el:textの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlText">「html:text」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.28." id="category_413"></a>
<h3 class="title">6.1.5.28.Struts独自タグhtml-el:textareaの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlTextarea">「html:textarea」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.5.29." id="category_414"></a>
<h3 class="title">6.1.5.29.Struts独自タグhtml-el:xhtmlの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのhtmlタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsHtmlXhtml">「html:xhtml」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6." id="category_415"></a>
<h3 class="title">6.1.6.logicタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<div class="table">
<a name="strutsLogicTag"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応</b>
</p>
<div class="table-contents">
<table summary="Struts1のlogicタグとの対応" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Struts1 Tag</th><th>JSTL Tag</th><th>JSP Tag</th><th>SpringMVC Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td>empty</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>equal</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>forward</td><td>無し</td><td>jsp:forward</td><td>無し</td>
</tr>
<tr>
<td>greaterEqual</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>greaterThan</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>iterate</td><td>c:forEach</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>lessEqual</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>lessThan</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>match</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>messagesNotPresent</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>messagesPresent</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>notEmpty</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>notEqual</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>notMatch</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>notPresent</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>present</td><td>c:if, c:when, EL</td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>redirect</td><td>c:redirect</td><td>無し</td><td>無し</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
</div>
<br>
<br>
<a name="tubame_6.1.6.1." id="category_416"></a>
<h3 class="title">6.1.6.1.Struts独自タグlogic:emptyの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
logic:emptyと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC
Tagでは存在しない。




</p>
<div class="table">
<a name="N14D4F"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>空値チェック</td><td>

<pre class="programlisting">
&lt;logic:empty name="foo1"&gt;Empty!&lt;/logic:empty&gt;
</pre>

</td><td>

<pre class="programlisting">
${empty foo1 ? "Empty!" : ""}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:if test="${empty foo1}"&gt;Empty!&lt;/c:if&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
<p>
Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、
<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.2." id="category_417"></a>
<h3 class="title">6.1.6.2.Struts独自タグlogic:equalの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>logic:equalと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.3." id="category_418"></a>
<h3 class="title">6.1.6.3.Struts独自タグlogic:forwardの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<div class="table">
<a name="strutsLogicForward"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>JSP</th>
</tr>
</thead>
<tbody>
<tr>
<td>forward</td><td>

<pre class="programlisting">
&lt;logic:forward name="success" /&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;jsp:forward page="/WEB-INF/success.jsp" /&gt;
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p>
Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、
<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>
を参照
</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.4." id="category_419"></a>
<h3 class="title">6.1.6.4.Struts独自タグlogic:greaterEqualの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
logic:greaterEqualと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない
</p>
<div class="table">
<a name="N14DE9"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>大小比較</td><td>

<pre class="programlisting">
&lt;logic:greaterEqual name="age" value="30"&gt;
Over 30
&lt;/logic:greaterEqual&gt;
&lt;logic:lessThan name="age" value="30"&gt;
Less than 30
&lt;/logic:lessThan&gt;
</pre>

</td><td>

<pre class="programlisting">
${age &gt;= 30 ? "Over 30" : "Less than 30"}
</pre>

</td><td>

<pre class="programlisting">
&lt;c:choose&gt;
&lt;c:when test="${age &gt;= 30}"&gt;Over 30&lt;/c:when&gt;
&lt;c:otherwise&gt;Less than 30&lt;/c:otherwise&gt;
&lt;/c:choose&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.5." id="category_420"></a>
<h3 class="title">6.1.6.5.Struts独自タグlogic:greaterThanの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>logic:greaterThanと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.6." id="category_421"></a>
<h3 class="title">6.1.6.6.Struts独自タグlogic:iterateの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicIterate"></a>logic:iterateと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.7." id="category_422"></a>
<h3 class="title">6.1.6.7.Struts独自タグlogic:lessEqualの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>logic:lessEqualと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.8." id="category_423"></a>
<h3 class="title">6.1.6.8.Struts独自タグlogic:lessThanの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>logic:lessThanと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.9." id="category_424"></a>
<h3 class="title">6.1.6.9.Struts独自タグlogic:matchの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicMatch"></a>
logic:matchと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない
</p>
<div class="table">
<a name="N14E84"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>ABCがどこかにあればマッチ</td><td>

<pre class="programlisting">
&lt;logic:match name="foo" value="ABC"&gt;
Match!
&lt;/logic:match&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
${fn:contains(foo,"ABC") ? "Match!" : ""}&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;c:if test="${fn:contains(foo,'ABC')}"&gt;Match!&lt;/c:if&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
<tr>
<td>ABCが先頭にあればマッチ</td><td>

<pre class="programlisting">
&lt;logic:match name="foo" location="start" value="ABC"&gt;
Match!
&lt;/logic:match&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
${fn:startsWith(foo,"ABC") ? "Match!" : ""}&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;c:if test="${fn:startsWith(foo,'ABC')}"&gt;Match!&lt;/c:if&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
<tr>
<td>ABCが末尾にあればマッチ</td><td>

<pre class="programlisting">
&lt;logic:match name="foo" location="end" value="ABC"&gt;
Match!
&lt;/logic:match&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
${fn:endsWith(foo,"ABC") ? "Match!" : ""}&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;c:if test="${fn:endsWith(foo,'ABC')}"&gt;Match!&lt;/c:if&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.10." id="category_425"></a>
<h3 class="title">6.1.6.10.Struts独自タグlogic:messagesNotPresentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicMessagesNotPresent"></a>logic:messagesNotPresentと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.11." id="category_426"></a>
<h3 class="title">6.1.6.11.Struts独自タグlogic:messagesPresentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicMessagesPresent"></a>
logic:messagesPresentと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない
</p>
<div class="table">
<a name="N14F3F"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>メッセージの存在確認</td><td>

<pre class="programlisting">
&lt;logic:messagesPresent property="username"&gt;
Error!
&lt;/logic:messagesPresent&gt;
&lt;logic:messagesPresent&gt;
Error!!
&lt;/logic:messagesPresent&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td><td>

<pre class="programlisting">
&lt;spring:bind path="username"&gt;
${status.error ? "Error!" : ""}&lt;p&gt;
&lt;/spring:bind&gt;
&lt;spring:bind path="*"&gt;
${status.error ? "Error!!" : ""}&lt;p&gt;
&lt;/spring:bind&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.12." id="category_427"></a>
<h3 class="title">6.1.6.12.Struts独自タグlogic:notEmptyの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>logic:notEmptyと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.13." id="category_428"></a>
<h3 class="title">6.1.6.13.Struts独自タグlogic:notEqualの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>logic:notEqualと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.14." id="category_429"></a>
<h3 class="title">6.1.6.14.Struts独自タグlogic:notMatchの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicNotMatch"></a>logic:notMatchと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.15." id="category_430"></a>
<h3 class="title">6.1.6.15.Struts独自タグlogic:notPresentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicNotPresent"></a>logic:notPresentと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.16." id="category_431"></a>
<h3 class="title">6.1.6.16.Struts独自タグlogic:presentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicPresent"></a>
logic:presentと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない
</p>
<div class="table">
<a name="N14FDB"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Tag Sample</b>
</p>
<div class="table-contents">
<table summary="Tag Sample" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Title</th><th>Struts1</th><th>EL</th><th>JSTL</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>存在チェック</td><td>

<pre class="programlisting">
&lt;logic:present name="foo1"&gt;Present&lt;/logic:present&gt;
</pre>

</td><td>

<pre class="programlisting">
${foo1 != null ? "Present" : ""}&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
&lt;c:if test="${foo1 != null}"&gt;Present&lt;/c:if&gt;&lt;p&gt;
</pre>

</td><td>

<pre class="programlisting">
-
</pre>

</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.6.17." id="category_432"></a>
<h3 class="title">6.1.6.17.Struts独自タグlogic:redirectの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsLogicRedirect"></a>logic:redirectと同等な機能を提供するタグは、JSTL Tagにて対応可能だが、JSP Tag及びSpringMVC Tagでは存在しない</p>
<p>Struts1のlogicタグとJSTL及びJSP、SpringMVCのタグの対応については、<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">「Struts1のlogicタグとの対応」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7." id="category_433"></a>
<h3 class="title">6.1.7.logic-leタグ</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibの<span class="command"><strong><a class="command" href="#strutsLogicTag" title="Table&nbsp;1.&nbsp;Struts1のlogicタグとの対応">logicタグ</a></strong></span>の該当するものと同様の対処を行う</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.1." id="category_434"></a>
<h3 class="title">6.1.7.1.Struts独自タグlogic-el:forwardの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicForward" title="Table&nbsp;1.&nbsp;Tag Sample">「logic:forward」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.2." id="category_435"></a>
<h3 class="title">6.1.7.2.Struts独自タグlogic-el:iterateの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicIterate">「logic:iterate」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.3." id="category_436"></a>
<h3 class="title">6.1.7.3.Struts独自タグlogic-el:matchの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicMatch">「logic:match」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.4." id="category_437"></a>
<h3 class="title">6.1.7.4.Struts独自タグlogic-el:messagesNotPresentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicMessagesNotPresent">「logic:messagesNotPresent」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.5." id="category_438"></a>
<h3 class="title">6.1.7.5.Struts独自タグlogic-el:messagesPresentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicMessagesPresent">「logic:messagesPresent」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.6." id="category_439"></a>
<h3 class="title">6.1.7.6.Struts独自タグlogic-el:notMatchの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicNotMatch">「logic:notMatch」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.7." id="category_440"></a>
<h3 class="title">6.1.7.7.Struts独自タグlogic-el:notPresentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicNotPresent">「logic:notPresent」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.8." id="category_441"></a>
<h3 class="title">6.1.7.8.Struts独自タグlogic-el:presentの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicPresent">「logic:present」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.7.9." id="category_442"></a>
<h3 class="title">6.1.7.9.Struts独自タグlogic-el:redirectの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts Taglibのlogicタグの該当するものと同様の対処を行う。詳細は<span class="command"><strong><a class="command" href="#strutsLogicRedirect">「logic:redirect」</a></strong></span>を参照</p>
</div>
<br>
<br>
<a name="tubame_6.1.8." id="category_443"></a>
<h3 class="title">6.1.8.Struts独自タグnestedタグの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>netstedタグに相当するタグは存在しないため、nestedの元となっているbean/html/logicタグに基づきマイグレーションを検討する</p>
</div>
<br>
<br>
<a name="tubame_6.2." id="category_444"></a>
<h3 class="title">6.2.入力値検証機能の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCではValidationを、org.springframework.validation.Validator
を実装した独自Validatorで行うか、もしくは、Bean
Validation（JSR-303/349。JSR-349対応はSpringMVC 4.0以降）を使って行う。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/validation.html#validation-beanvalidation" target="_top">http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/validation.html#validation-beanvalidation</a></strong></span>

</p>
</li>
</ul>
</div>
<p>

Struts1で独自ロジックを用いた検証を行っている場合はorg.springframework.validation.Validatorを実装、struts
validatorを利用している場合はBean Validationを利用する。

</p>
<p>Struts1 ValidatorとBean Validationの比較については、<span class="command"><strong><a class="command" href="#diffValidator">「validator比較」</a></strong></span>を参照。
</p>
<p>
サンプルの移行例を示す

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Controllerクラス</p>
<div class="figure">
<a name="N15100"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Controllerクラス例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
@RequestMapping("/user")
public class ExtraTest2 {

    @RequestMapping(value = { "/login", "/locale" }, method = RequestMethod.GET)
    public String execute(Model model) {
        if (!model.containsAttribute("userinfo")) {
            model.addAttribute("userinfo", new UserInfo());
        }
        return "login";
    }

    @RequestMapping(value = "/validateUser", method = RequestMethod.POST)
    public ModelAndView validate(@Valid @ModelAttribute("userinfo") UserInfo userinfo,
            BindingResult bindingResult) {

        if (bindingResult.hasErrors()) {
            ModelAndView mav = new ModelAndView("login");
            mav.getModel().putAll(bindingResult.getModel());
            return mav;
        }
        return new ModelAndView("welcome");
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>Bean</p>
<div class="figure">
<a name="N1510D"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Bean例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class UserInfo {
    @NotEmpty private String username;
    @NotEmpty private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>JSPファイル（login.jsp）</p>
<div class="figure">
<a name="N1511A"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;JSP例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %&gt;
&lt;%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %&gt;
&lt;html&gt;
&lt;body&gt;
&lt;h1&gt;SpringMVC localization example&lt;/h1&gt;
&lt;form:form modelAttribute="userinfo" action="${appUrl}/user/validateUser"&gt;
    &lt;form:errors path="username" cssClass="errors"/&gt;&lt;p&gt;
    &lt;form:label path="username"&gt;&lt;spring:message code="global.username"/&gt;&lt;/form:label&gt;
    &lt;form:input path="username" cssErrorClass="input_error"/&gt;&lt;p&gt;
    &lt;form:errors path="password" cssClass="errors"/&gt;&lt;p&gt;
    &lt;form:label path="password"&gt;&lt;spring:message code="global.password"/&gt;&lt;/form:label&gt;
    &lt;form:password path="password" cssErrorClass="input_error"/&gt;&lt;p&gt;
    &lt;input type="submit" name="submit" value="&lt;spring:message code="global.submit"/&gt;"/&gt;
&lt;/form:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<br class="figure-break">
</li>
<li class="listitem">
<p>servlet-context.xml</p>
<p>
Bean
Validationを利用する場合は、アノテーション単位でメッセージが定義されている。デフォルトのメッセージにはプロパティ名が含まれないため、どのパラメータに関連するメッセージなのかを特定することが難しい。パラメータ名を表示するには、デフォルトのメッセージを上書きするリソースファイルを定義する必要がある。
メッセージリソースファイルは名前が「ValidationMessages」固定となっている。ファイルの配置は、設定ファイルで変更することが可能である（bean/property/list/valueタグ）。
</p>
<div class="figure">
<a name="N15129"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;例</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;bean id="messageSource"
 class="org.springframework.context.support.ReloadableResourceBundleMessageSource"&gt;
    &lt;property name="basenames"&gt;
        &lt;list&gt;
            &lt;value&gt;classpath:i18n/validation/ValidationMessages&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="fallbackToSystemLocale" value="false"/&gt;
&lt;/bean&gt;
&lt;bean id="validator"
 class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"&gt;
    &lt;property name="validationMessageSource"&gt;&lt;ref bean="messageSource" /&gt;&lt;/property&gt;
&lt;/bean&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</li>
<li class="listitem">
<p>メッセージリソース（ValidationMessages.properties）</p>
<p>
下記の例では、{0}の部分にパラメータ名が挿入される。この場合、@NotEmptyを使うすべてのプロパティに適用される。

</p>
<div class="figure">
<a name="N15139"></a>
<p class="title">
<b>Figure&nbsp;5.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
NotEmpty = {0} is required
</pre>
</div>
</div>
<p>
<br class="figure-break">
特定のプロパティに制限する場合は、アノテーション名.プロパティ名で記述する。
</p>
<div class="figure">
<a name="N15142"></a>
<p class="title">
<b>Figure&nbsp;6.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
NotEmpty.username = Username is required
</pre>
</div>
</div>
<p>
<br class="figure-break">
また、特定のフォームのプロパティに制限する場合は、アノテーション名.フォーム名.プロパティ名の形式で記述する。
</p>
<div class="figure">
<a name="N1514B"></a>
<p class="title">
<b>Figure&nbsp;7.&nbsp;</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
NotEmpty.userinfo.username = Username is required!
</pre>
</div>
</div>
<p>
<br class="figure-break">
独自の検証ロジックを使用する場合は、以下の修正を行う。
Beanでプロパティに指定されたアノテーションを削除する（上記例では「@NotEmpty」が指定されているので、これを削除する）。
上記のControllerクラスを以下のように修正する（太字部分を追加、validateメソッドの引数UserInfoから@Validを削除）。


</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>Controllerクラス</p>
<pre class="programlisting">
@Controller
@RequestMapping("/user")
public class ExtraTest2 {
    @Resource
    UserInfoValidator validate;
    // 中略
    @RequestMapping(value = "/validateUser", method = RequestMethod.POST)
    public ModelAndView validate(@ModelAttribute("userinfo") UserInfo userinfo,
            BindingResult bindingResult) {
        validate.validate(userinfo, bindingResult);
        if (bindingResult.hasErrors()) {
            ModelAndView mav = new ModelAndView("login");
        // 中略
    }
}
</pre>
</li>
</ul>
</div>
<p>

あわせて、上記Controllerクラスで利用しているUserInfoValidatorクラスを作成する。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<p>UserInfoValidator</p>
<pre class="programlisting">
@Component
public class UserInfoValidator implements Validator {
    @Override
    public boolean supports(Class&lt;?&gt; clazz) {
        return UserInfo.class.isAssignableFrom(clazz);
    }
    @Override
    public void validate(Object target, Errors errors) {
        UserInfo userinfo = (UserInfo)target;
        if("".equals(userinfo.getUsername())){
            errors.rejectValue("username", "required.username");
        }
        
        if("".equals(userinfo.getPassword())){
            errors.rejectValue("password", "required.password");
        }
    }
}
</pre>
</li>
</ul>
</div>
<p>

ここで利用しているメッセージリソースは、ValidationMessagesに含まれていなくても良い。
</p>
</li>
</ul>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_6.2.1." id="category_445"></a>
<h3 class="title">6.2.1.Struts Validator</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<div class="table">
<a name="N15177"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Validator</b>
</p>
<div class="table-contents">
<table summary="Validator" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Struts1</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>required</td><td>@NotEmpty</td>
</tr>
<tr>
<td>validwhen</td><td>無し</td>
</tr>
<tr>
<td>minlength</td><td>@Range, @Size, @Length, @DecimalMin</td>
</tr>
<tr>
<td>maxlength</td><td>@Range, @Size, @Length, @DecimalMax</td>
</tr>
<tr>
<td>mask</td><td>@pattern</td>
</tr>
<tr>
<td>byte</td><td>データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>short</td><td>データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>integer</td><td>データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>long</td><td>データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>float</td><td>データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>double</td><td>データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>date</td><td>@Future, @Past</td>
</tr>
<tr>
<td>intRange</td><td>@Range, @Max, @Min, @DecimalMax, @DecimalMin</td>
</tr>
<tr>
<td>longRange</td><td>@Range, @Max, @Min, @DecimalMax, @DecimalMin</td>
</tr>
<tr>
<td>floatRange</td><td>無し</td>
</tr>
<tr>
<td>doubleRange</td><td>無し</td>
</tr>
<tr>
<td>creditCard</td><td>@CreditCardNumber</td>
</tr>
<tr>
<td>email</td><td>@Email</td>
</tr>
<tr>
<td>url</td><td>@URL</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
</div>
<br>
<br>
<a name="tubame_6.2.1.1." id="category_446"></a>
<h3 class="title">6.2.1.1.Struts Validatorの設定移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>commons-validatorを利用しているので、validation.xmlの内容を調査し、移行先が用意している検証機能への移行を検討する</p>
</div>
<br>
<br>
<a name="tubame_6.2.1.2." id="category_447"></a>
<h3 class="title">6.2.1.2.XDocletによるStruts Validatorの設定移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>XDocletでStruts Validatorの設定が可能である。</p>
<p>＠struts.validatorアノテーションがコメント中に記載されている場合、validation.xmlの内容が自動生成されるため、Struts Validatorの設定と同様の移行を検討する</p>
</div>
<br>
<br>
<a name="tubame_6.2.2." id="category_448"></a>
<h3 class="title">6.2.2.クライアントサイドの入力値検証機能移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Bean Validationではクライアントでの入力値検証機能は提供されていないため、移行元がクライアントでの入力値検証を行っている場合は、サーバ側での検証に移行する。</p>
</div>
<br>
<br>
<a name="tubame_6.3." id="category_449"></a>
<h3 class="title">6.3.テンプレートエンジンの移行</h3>
<br>
<br>
<a name="tubame_6.3.1." id="category_450"></a>
<h3 class="title">6.3.1.テンプレートエンジンStruts-Tilesの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1におけるTilesはStruts-Tilesと呼ばれ、Struts1の画面定義、レイアウトの作成、動的ページの生成などに利用されている。</p>
<p>設定は、WEB-INF/tiles-defs.xmlや&lt;tiles:xxx&gt;タグにより行う。</p>
<p>移行先ではTiles2やTiles3などの、Strutsから切り離され、単独のプロダクトとなったバージョン（Apache Tiles）を利用することとなる。Struts-TilesとApache Tilesとの互換性については、十分調査のうえ、移行先で利用する。</p>
<p></p>
<p></p>
<p>SpringMVC3.2.ｘまでは、Struts-Tiles、Tiles2/3がサポートされていた（Struts-Tilesはspring-strutsパッケージに含まれている）が、SpringMVC4.0ではStruts関連パッケージが削除されたためStruts-Tilesのサポートもなくなっている。このため、SpringMVC4.0ではStruts-Tilesをそのまま利用することはできない。</p>
<p></p>
</div>
<br>
<br>
<a name="tubame_6.3.2." id="category_451"></a>
<h3 class="title">6.3.2.テンプレートエンジンVelocityの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Apache Velocityは、Javaベースの汎用テンプレートエンジンで、HTML生成だけでなく、XMLやSQLなどテキストファイルならどのようなものにも適用が可能となっている。</p>
<p>Velocityでは、テンプレートとなるファイルの拡張子を通常「.vm」として作成する。また、設定ファイルとしては、WEB-INF/velocity-toolbox.xml、WEB-INF/velocity.propertiesを使用する。</p>
<p>VelocityはStrutsへの依存はないため、移行元のアプリケーションで利用しているバージョンと移行先で利用する予定のバージョンとの間での互換性を考えれば良い。Velocityは最新版が1.7（2010/11/29リリース）である。</p>
<p>バージョン間の差異については、以下のURLを参照。</p>
<p>

<span class="command"><strong><a class="command" href="http://velocity.apache.org/engine/devel/changes-report.html" target="_top">http://velocity.apache.org/engine/devel/changes-report.html</a></strong></span>

</p>
<p>

<span class="command"><strong><a class="command" href="http://velocity.apache.org/engine/devel/upgrading.html" target="_top">http://velocity.apache.org/engine/devel/upgrading.html</a></strong></span>

</p>
</div>
<br>
<br>
<a name="tubame_6.3.2.1." id="category_675"></a>
<h3 class="title">6.3.2.1.VelocityTools</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
			VelocityはStrut1とのインテグレーションとして、<span class="command"><strong><a class="command" href="http://velocity.apache.org/tools/devel/struts/" target="_top">VelocityTools
			</a></strong></span>を提供している。テンプレートファイルで以下の変数を利用している場合は、SpringMVCでの対応方法を別途検討する必要がある。

			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>$text</p>
</li>
<li class="listitem">
<p>$errors</p>
</li>
<li class="listitem">
<p>$form</p>
</li>
<li class="listitem">
<p>$link</p>
</li>
<li class="listitem">
<p>$messages</p>
</li>
<li class="listitem">
<p>$validator</p>
</li>
</ul>
</div>
<p>
		
</p>
</div>
<br>
<br>
<a name="tubame_6.3.3." id="category_452"></a>
<h3 class="title">6.3.3.テンプレートエンジンFreeMarkerの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>FreeMarkerはApache Velocityと同様のJavaベースのテンプレートエンジンである。開発はThe Visigoth Software Societyにより行われている。機能的にも、Velocityと同様に、HTMLだけでなく、XMLやRTF、Javaコードなどのテキストファイルの生成を行うことができる。</p>
<p>FreeMarkerでは、テンプレートとなるファイルの拡張子を通常「.ftl」として作成する。</p>
<p>FreeMarkerはStrutsへの依存は無いため、移行元のアプリケーションで利用しているバージョンと移行先で利用する予定のバージョンとの間での互換性を考えれば良い。FreeMarkerは最新版が2.3.20（2013/06/27リリース）である。</p>
<p>バージョン間の差異については、以下のURLを参照。</p>
<p>

<span class="command"><strong><a class="command" href="http://freemarker.org/freemarkerdownload.html" target="_top">http://freemarker.org/freemarkerdownload.html</a></strong></span>

</p>
<p>

<span class="command"><strong><a class="command" href="http://freemarker.org/docs/app_versions.html" target="_top">http://freemarker.org/docs/app_versions.html</a></strong></span>

</p>
</div>
<br>
<br>
<a name="tubame_6.4." id="category_453"></a>
<h3 class="title">6.4.その他</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCではEL式の利用は問題ないため、ここでは検索は行わない</p>
</div>
<br>
<br>
<a name="tubame_7."></a>
<h2 class="title">7.Struts1固有機能の移行</h2>
<br>
<a name="tubame_7.1." id="category_503"></a>
<h3 class="title">7.1.Struts1固有機能の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1.3.x固有であるDynaActionFormやLazy ActionFormの利用有無を確認のうえ、あらためてPOJOとして実装することを検討する。</p>
</div>
<br>
<br>
<a name="tubame_7.1.1." id="category_504"></a>
<h3 class="title">7.1.1.メッセージリソース設定の移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCでは、web.xml、ApplicationContext.xml（web.xmlのcontext-paramで設定。アプリケーション全体の設定を記述する）、servlet-context.xml（web.xmlのDispatcherServletを定義したservletタグの子要素であるinit-paramタグで設定）などを使って設定を行う。
</p>
<p>web.xmlに設定ファイルを記載するのではなく、WebApplicationInitializeインタフェースを実装したクラスを作成し、コード中で設定ファイルを指定することも可能である

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/web/WebApplicationInitializer.html" target="_top">http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/web/WebApplicationInitializer.html</a></strong></span>

</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_7.1.2." id="category_505"></a>
<h3 class="title">7.1.2.DynaActionForm/Lazy ActionFormの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1のDynaActionForm/Lazy ActionFormについては、SpringMVCでは相当する機能がないため、POJOを実装するか、もしくはプロパティ数が少なければ@RequestParamで直接受け取る。</p>
<p>@RequestParamを使用した場合は、入力値検証機能は利用できないため、独自に入力値を検証するロジックを作成する必要がある。</p>
</div>
<br>
<br>
<a name="tubame_7.1.3." id="category_506"></a>
<h3 class="title">7.1.3.Commandの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>SpringMVCでは、Struts1でのCommandパイプライン相当のものとして、DispatcherServletから呼び出されるInterceptorがある。</p>
<p>Struts1では、Actionの実行も含めてリクエスト処理の流れに沿ってCommandが実行されていくのに対して、SpringMVCのInterceptorはInterceptorでは、リクエストの前（preHandle()）、リクエストの後（postHandle()）、リクエスト処理完了後（afterCompletion()）に実行されるという違いがある。</p>
<p>下記表に、Struts1のCommandとSpringMVCのInterceptorの比較を示す。</p>
<p></p>
<div class="table">
<a name="N155F3"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Validator</b>
</p>
<div class="table-contents">
<table summary="Validator" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>Struts1</th><th>SpringMVC</th>
</tr>
</thead>
<tbody>
<tr>
<td>SelectLocale</td><td>LocaleChangeInterceptor</td>
</tr>
<tr>
<td>SetOriginalURI</td><td>無し</td>
</tr>
<tr>
<td>RequestNoCache</td><td>WebContentInterceptor</td>
</tr>
<tr>
<td>RemoveCachedMessages</td><td>無し</td>
</tr>
<tr>
<td>SetContentType</td><td>Interceptorではなく、ContentNegotiationManagerを使用する
http://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/mvc.html#mvc-config-content-negotiation</td>
</tr>
<tr>
<td>SelectAction</td><td>無し</td>
</tr>
<tr>
<td>AuthorizeAction</td><td>UserRoleAuthorizationInterceptor</td>
</tr>
<tr>
<td>CreateActionForm</td><td>無し</td>
</tr>
<tr>
<td>PopulateActionForm</td><td>無し</td>
</tr>
<tr>
<td>ValidateActionForm</td><td>無し</td>
</tr>
<tr>
<td>SelectInput</td><td>Interceptorではなく、自画面遷移する実装が必要</td>
</tr>
<tr>
<td>ExecuteCommand</td><td>無し</td>
</tr>
<tr>
<td>SelectForward</td><td>無し</td>
</tr>
<tr>
<td>SelectInclude</td><td>無し</td>
</tr>
<tr>
<td>PerformInclude</td><td>無し</td>
</tr>
<tr>
<td>CreateAction</td><td>無し</td>
</tr>
<tr>
<td>ExecuteAction</td><td>無し</td>
</tr>
<tr>
<td>ExecuteForwardCommand</td><td>無し</td>
</tr>
<tr>
<td>PerformForward</td><td>無し</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="figure">
<a name="N1565F"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;CommandとInterceptor（SpringMVC）の実行イメージ</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<img src="images/image3.png" alt="This image does not a meaning in the image"></div>
</div>
</div>
<br class="figure-break">
</div>
<br>
<br>
<a name="tubame_7.1.4." id="category_507"></a>
<h3 class="title">7.1.4.プラグインの移行</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1のプラグインのうち、初期化に関してはorg.sprintframework.web.servlet.DispatcherServletのサブクラスを作成し、initFrameworkServlet ()に実装することで対応する。</p>
<p>destroy()に関してはinit()のようなメソッド呼び出しは存在しないが、destroy()メソッドはfinal宣言されていないため、オーバーライドは可能となっている（init()メソッドはfinal宣言されている）。</p>
</div>
<br>
<br>
<a name="tubame_7.1.5." id="category_678"></a>
<h3 class="title">7.1.5.Strutsのセッション IDの払い出し</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
			RequestProcessor#processLocale にて引数なしのHttpServletRequest#getSession()
			が呼ばれるため、
			Action クラスが呼び出される前にセッション ID が払い出される。このため、アクション内で以下のような実装な場合がある場合、

			</p>
<div class="figure">
<a name="N16782"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Actionクラス</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
					
public class SessionAction extends Action {
 
  @Override
  public ActionForward execute(ActionMapping mapping, ActionForm form,
                               HttpServletRequest request, HttpServletResponse response) {
 
    HttpSession session = request.getSession(false);
    String sessionId = session.getId();
    request.setAttribute("sessionId", sessionId);
    System.out.println(sessionId);
 
    return mapping.findForward("session");
  }
}
				</pre>
</div>
</div>
<p>
<br class="figure-break">
			すでにStrutsの実装でセッションが払い出せれているため、最初のリクエストでも、nullを返さず、セッションを取得する。
			SpringMVCの実装では、通常セッションは払い出されないため、nullを返す。
			通常はログインが成功したタイミングでセッションIDを払い出すが、Strutsでは最初にアクセスした場合に、セッションIDが払い出されるため、
			現行アプリケーションが意図しないセッションのライフサイクルになっている場合、セッションのライフサイクルが正しくなるように
			修正を行う必要がある。
			
			</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>移行後の環境でHttpServletRequest#getSession(false)でnullを返すことが許容できない場合は、HttpServletRequest#getSession(true)で、セッションIDが払い出されていない場合でもSessionを取得することは可能である
			
			</p>
</td>
</tr>
</table>
</div>
<p>

		
</p>
</div>
<br>
<br>
<a name="tubame_8."></a>
<h2 class="title">8.付録</h2>
<br>
<a name="tubame_8.1." id="category_672"></a>
<h3 class="title">8.1.Struts1.x間の差分</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="struts1_diff"></a>Struts1.xバージョン間の差分の詳細については、以下のURLを参照する。</p>
<p>

<span class="command"><strong><a class="command" href="http://wiki.apache.org/struts/StrutsUpgrade" target="_top">http://wiki.apache.org/struts/StrutsUpgrade</a></strong></span>

</p>
<p>以下に主な変更点のみ記載する。</p>
</div>
<br>
<br>
<a name="tubame_8.1.1." id="category_673"></a>
<h3 class="title">8.1.1.Struts1.1.xと1.2.xとの主な差分</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>commons-validatorが1.1.3となった</p>
</li>
<li class="listitem">
<p>struts-config.xmlのdtdバージョンが1.2となった</p>
</li>
<li class="listitem">
<p>ActionErrorは非推奨となった</p>
</li>
<li class="listitem">
<p>org.apache.struts.util.RequestUtils
とorg.apache.struts.util.ResponseUtilsの多くのメソッドが非推奨となった</p>
</li>
<li class="listitem">
<p>org.apache.commons.validator.ValidatorUtilはorg.apache.commons.validator.util.ValidatorUtilsで置き換えられた
</p>
</li>
<li class="listitem">
<p>web.xmlに設定していた多くの初期化パラメータが削除された</p>
</li>
<li class="listitem">
<p>&lt;html:form&gt;タグの幾つかの属性が非推奨となった</p>
</li>
<li class="listitem">
<p>Action.perform()はAction.execute()に変更された</p>
</li>
</ul>
</div>
</div>
<br>
<br>
<a name="tubame_8.1.2." id="category_674"></a>
<h3 class="title">8.1.2.Struts1.2.xと1.3.xとの主な差分</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Servlet2.3/JSP1.2が必須となった</p>
</li>
<li class="listitem">
<p>単一JARファイルでの提供から、コンポーネントごとのJARに分割された</p>
</li>
<li class="listitem">
<p>利用している外部JARのバージョンが上がった</p>
</li>
<li class="listitem">
<p>RequestProcessorのデフォルトがComposableRequestProcessorとなった
</p>
</li>
<li class="listitem">
<p>Tilesの利用方法が変更された</p>
</li>
<li class="listitem">
<p>struts-config.xmlのdtdバージョンが1.3となった</p>
</li>
<li class="listitem">
<p>上記に伴い、いくつかの要素が追加・削除された</p>
</li>
<li class="listitem">
<p>ActionError、DataSourceConfigが削除された</p>
</li>
<li class="listitem">
<p>TLDのURIが変更された</p>
</li>
</ul>
</div>
</div>
<br>
<br>
<a name="tubame_8.2." id="category_620"></a>
<h3 class="title">8.2.Actionクラスのメソッド一覧</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>


</p>
<div class="table">
<a name="strutsActionMethodList"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Actionクラスのメソッド一覧（publicメソッド）</b>
</p>
<div class="table-contents">
<table summary="Actionクラスのメソッド一覧（publicメソッド）" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>メソッド名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>getServlet()</td><td>関連づけられたServletのインスタンスを返す</td>
</tr>
<tr>
<td>setServlet(ActionServlet servlet)</td><td>渡されたservletがnullでない場合、関連づけられたServletのインスタンスを設定する</td>
</tr>
<tr>
<td>execute(ActionMapping mapping, ActionForm form,
ServletRequest request, ServletResponse response)
</td><td>指定された非HTTPリクエストを処理して、 対応する非HTTPレスポンスを生成する</td>
</tr>
<tr>
<td>execute(ActionMapping mapping, ActionForm form,
HttpServletRequest request, HttpServletResponse response)
</td><td>指定されたHTTPリクエストを処理して、 対応するHTTPレスポンスを生成する</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
<div class="table">
<a name="strutsActionProtectedMethodList"></a>
<p class="title">
<b>Table&nbsp;2.&nbsp;Actionクラスのメソッド一覧（protectedメソッド）</b>
</p>
<div class="table-contents">
<table summary="Actionクラスのメソッド一覧（protectedメソッド）" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>メソッド名</th><th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>addErrors(HttpServletRequest request,
ActionMessages errors)
</td><td>メッセージが必要な場合は、 &lt;html:errors&gt;タグが使用できるように適切なリクエスト属性に指定されたエラーキーを追加する</td>
</tr>
<tr>
<td>addMessages(HttpServletRequest request,
ActionMessages messages)
</td><td>メッセージが必要な場合は、 &lt;html:messages&gt;タグで使用できるように適切なリクエスト属性に指定されたメッセージキーを追加する</td>
</tr>
<tr>
<td>generateToken(HttpServletRequest request)</td><td>各トランザクションに対してリクエストを1回だけにするために使用する、 新しいトランザクショントークンを生成する</td>
</tr>
<tr>
<td>getErrors(HttpServletRequest request)</td><td>直前のアクションでリクエストに置かれた既存のエラーをすべて取り出す</td>
</tr>
<tr>
<td>getLocale(HttpServletRequest request)</td><td>ユーザが現在選択しているLocaleを返す</td>
</tr>
<tr>
<td>getMessages(HttpServletRequest request)</td><td>直前のアクションでリクエストに置かれた既存のメッセージをすべて取り出す</td>
</tr>
<tr>
<td>getResources(HttpServletRequest request)</td><td>現在のモジュールのデフォルトメッセージリソースを返す</td>
</tr>
<tr>
<td>getResources(HttpServletRequest request,
String key)
</td><td>現在のモジュールの指定されたメッセージリソースを返す</td>
</tr>
<tr>
<td>isCancelled(HttpServletRequest request)y</td><td>現在のフォームのキャンセルボタンが押された場合にtrueを返す</td>
</tr>
<tr>
<td>isTokenValid(HttpServletRequest request)</td><td>ユーザの現在のセッションにトランザクショントークンが保持され、 かつ、このアクションのリクエストパラメータとして送信された値がそのトークンとマッチする場合は、 trueを返す</td>
</tr>
<tr>
<td>isTokenValid(HttpServletRequest request, 
boolean reset)
</td><td>ユーザの現在のセッションにトランザクショントークンが保持され、 かつ、このアクションのリクエストパラメータとして送信された値がそのトークンとマッチする場合は、 trueを返す</td>
</tr>
<tr>
<td>resetToken(HttpServletRequest request)</td><td>ユーザのセッションに保持されているトランザクショントークンをリセットする</td>
</tr>
<tr>
<td>saveErrors(HttpServletRequest request,
ActionMessages errors)
</td><td>何らかのメッセージが必要な場合、 &lt;html:errors&gt;タグが利用できるように、 適切なリクエスト属性に指定されたエラーメッセージキーを保存する</td>
</tr>
<tr>
<td>saveErrors(HttpSession session,
ActionMessages errors)
</td><td>何らかのメッセージが必要な場合、 &lt;html:errors&gt;タグが利用できるように、 適切なセッション属性に指定されたエラーメッセージキーを保存する</td>
</tr>
<tr>
<td>saveMessages(HttpServletRequest request,
ActionMessages messages)
</td><td>適切なリクエスト属性の中に指定されたメッセージキーを保存する</td>
</tr>
<tr>
<td>saveMessages(HttpSession session,
ActionMessages messages)
</td><td>適切なセッション属性の中に指定されたメッセージキーを保存する</td>
</tr>
<tr>
<td>saveToken(HttpServletRequest request)</td><td>必要に応じて新たなセッションを生成し、 ユーザの現在のセッションに新しいトランザクショントークンを保存する</td>
</tr>
<tr>
<td>setLocale(HttpServletRequest request,
Locale locale)
</td><td>HttpSessionにユーザが現在選択したLocaleを設定する</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.3." id="category_615"></a>
<h3 class="title">8.3.Validator比較</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="diffValidator"></a>

</p>
<div class="table">
<a name="N15DA4"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Validator比較</b>
</p>
<div class="table-contents">
<table summary="Validator比較" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>required</td><td>required</td><td>@NotEmpty</td>
</tr>
<tr>
<td>validwhen</td><td>expression</td><td>無し</td>
</tr>
<tr>
<td>minlength</td><td>stringlength</td><td>@Range, @Size, @Length, @DecimalMin</td>
</tr>
<tr>
<td>maxlength</td><td>stringlength</td><td>@Range, @Size, @Length, @DecimalMax</td>
</tr>
<tr>
<td>byte</td><td>regex</td><td rowspan="5">データバインディング機能により変換が失敗した場合、エラーとなる</td>
</tr>
<tr>
<td>short</td><td>conversion</td>
</tr>
<tr>
<td>integer</td><td>conversion</td>
</tr>
<tr>
<td>float </td><td>conversion</td>
</tr>
<tr>
<td>double </td><td>conversion</td>
</tr>
<tr>
<td>date </td><td>date</td><td>無し</td>
</tr>
<tr>
<td>intRange </td><td>int</td><td>@Range, @Max, @Min, @DecimalMax, @DecimalMin</td>
</tr>
<tr>
<td>longRange </td><td>long</td><td>@Range, @Max, @Min, @DecimalMax, @DecimalMin</td>
</tr>
<tr>
<td>floatRange </td><td>無し</td><td>無し</td>
</tr>
<tr>
<td>doubleRange</td><td>double</td><td>無し</td>
</tr>
<tr>
<td>creditCard</td><td>無し</td><td>@CreditCardNumber</td>
</tr>
<tr>
<td>email</td><td>email</td><td>@Email</td>
</tr>
<tr>
<td>url</td><td>url</td><td>@URL</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.4." id="category_616"></a>
<h3 class="title">8.4.Struts1.xとSpringMVCのクラス対応</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>


</p>
<div class="table">
<a name="N15E28"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts1.xとSpringMVCのクラス対応表</b>
</p>
<div class="table-contents">
<table summary="Struts1.xとSpringMVCのクラス対応表" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>No.</th><th>オブジェクト名称</th><th>説明</th><th>Struts1との対応</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td><td>DispatcherServlet</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>HandlerMappingを介し、リクエスト(URL)に対して、Controllerへの振り分けを行う
</p>
</li>
<li class="listitem">
<p>インスタンスはアプリケーションに１つのみ生成される</p>
</li>
</ul>
</div>

</td><td>ActionServlet</td>
</tr>
<tr>
<td>2</td><td>HandlerMapping</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>リクエストURLとControllerとのマッピングを管理する</p>
</li>
<li class="listitem">
<p>SpringMVCでは、アノテーション「@RequestMapping」で定義する</p>
</li>
</ul>
</div>

</td><td>RequestProcessor</td>
</tr>
<tr>
<td>3</td><td>ViewResolver</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Controllerが返したView名から遷移先となるViewを決定する</p>
</li>
</ul>
</div>

</td><td>RequestProcessor</td>
</tr>
<tr>
<td>4</td><td>Model</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>データを保持するオブジェクト</p>
</li>
<li class="listitem">
<p>ControllerとView間でデータを受け渡すために使用する</p>
</li>
<li class="listitem">
<p>formの値を格納したものをFormオブジェクトと呼ばれる</p>
</li>
<li class="listitem">
<p>JavaBeanの形式で抽出したものを、SpringではCommandと呼ばれる</p>
</li>
</ul>
</div>

</td><td>ActionForm</td>
</tr>
<tr>
<td>5</td><td>View</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>プレゼンテーション層への出力データを設定する</p>
</li>
<li class="listitem">
<p>実体はJSP、Velocityなどの他に、JSON、Excel、PDFなどがある</p>
</li>
</ul>
</div>

</td><td>JSP</td>
</tr>
<tr>
<td>6</td><td>Controller</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>ビジネスロジックを呼び出し、処理の結果であるModelやViewを返す</p>
</li>
</ul>
</div>

</td><td>Action</td>
</tr>
<tr>
<td>7</td><td>Validator</td><td>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>入力値チェックを行い、エラーメッセージをModelとして返す</p>
</li>
<li class="listitem">
<p>アノテーションベースと独自実装の2種類がある</p>
</li>
</ul>
</div>

</td><td>ValidatorForm</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="table-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.5." id="category_617"></a>
<h3 class="title">8.5.自画面遷移</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>Struts1.xではファイルダウンロードなどで別画面に遷移したくない場合は、戻り値としてnullを返却する。ファイルダウンロードは「Struts Extras」で提供されているDownloadActionをextendsしたクラスを作成するが、DownloadActionが提供するexecute()メソッドでは、下記の通り戻り値としてnullを返却している。


</p>
<div class="figure">
<a name="N15EBD"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Action</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public ActionForward execute(ActionMapping mapping, ActionForm form,
    HttpServletRequest request, HttpServletResponse response)
    throws Exception {
    StreamInfo info = getStreamInfo(mapping, form, request, response);
    String contentType = info.getContentType();
    InputStream stream = info.getInputStream();

    try {
        response.setContentType(contentType);
        copy(stream, response.getOutputStream());
    } finally {
        if (stream != null) {
            stream.close();
        }
    }

    // Tell Struts that we are done with the response.
    return null;
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
<p>SpringMVCでは、別画面に遷移したくない場合はリクエスト処理メソッドの戻り値をvoid型にするか、もしくはResponseEntity&lt;?&gt;型にする。
以下ではResponseEntityを利用した例を記載する。

</p>
<div class="figure">
<a name="N15ECA"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;ResponseEntityを利用したController</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@RequestMapping(method = RequestMethod.POST)
public ResponseEntity&lt;String&gt; download() throws IOException {
    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(new MediaType("application", "octet-stream"));
    headers.set("Content-Disposition", "attachment; filename=fileABC.txt");
    String path = context.getRealPath("/WEB-INF/download.txt");
    Path src = Paths.get(path);
    String data;
    try (Stream&lt;String&gt; stream = Files.lines(src)) {
        data = stream.collect(Collectors.joining("\n"));
    }
    return new ResponseEntity&lt;String&gt;(data, headers, HttpStatus.OK);
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.6." id="category_619"></a>
<h3 class="title">8.6.認可処理</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>strutsでは&lt;action&gt;のroles属性に、当該actionへのアクセスを許可するroleを指定しておくと、HttpServletRequest#isUserInRole()でチェックが行われる。ログインユーザのroleがroles属性に含まれていない場合は、UnauthorizedActionExceptionが発生し500エラーが返る。

</p>
<div class="figure">
<a name="N15EE1"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;roles属性設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/France" name="France" type="org.apache.struts.actions.LocaleAction" roles="french"/&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">
上記のような設定を行うと、frenchロールであれば当該Actionを実行する事ができるが、それ以外のロールでは403エラーが返る。
</p>
<p>SpringMVCでは、UserRoleAuthorizationInterceptorを用いてユーザロールの確認を行う。以下に、設定例を示す。
</p>
<div class="figure">
<a name="N15EEE"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;roles属性設定</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;action path="/France" name="France" type="org.apache.struts.actions.LocaleAction" roles="french"/&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">
上記のような設定を行うと、frenchロールであれば当該pathに対応するControllerを実行することができるが、それ以外のロールでは403エラーが返る。
</p>
</div>
<br>
<br>
<a name="tubame_8.7." id="category_621"></a>
<h3 class="title">8.7.Struts1のhtmlタグ移行サンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="strutsHtmlTagPortingSample"></a>
以下にStruts1のhtmlタグの移植サンプルを示す。以下のタグを利用したケースについて示す。

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>html:option</p>
</li>
<li class="listitem">
<p>html:checkbox及びhtml:multibox</p>
</li>
<li class="listitem">
<p>html:radio</p>
</li>
<li class="listitem">
<p>html:messages</p>
</li>
</ul>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_8.7.1." id="category_622"></a>
<h3 class="title">8.7.1.html:options</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
struts1のhtml:optionsを利用したサンプル

</p>
<div class="figure">
<a name="N15FB8"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;html:optionsを利用したjsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;!-- struts1のhtml:optionsタグを利用したjsp--&gt;
&lt;html:form action="/result"&gt;
	&lt;html:select property="stringData" &gt;
		&lt;!-- P1 --&gt;
		&lt;html:options name="DynaArray" property="idData" labelName="DynaArray" labelProperty="nameData"/&gt;
		&lt;!-- P2 --&gt;
		&lt;html:options collection="listData" property="id" labelProperty="name"/&gt;
		&lt;!-- P3 --&gt;
		&lt;html:options name="idArray" labelName="nameArray"/&gt;
		&lt;!-- P4 --&gt;
		&lt;html:options collection="mapData" property="key" labelProperty="value"/&gt;
		&lt;!-- P5 --&gt;
		&lt;html:options collection="iterator" property="id" labelProperty="name"/&gt;
		&lt;!-- P6 --&gt;
		&lt;html:options collection="enum" property="id" labelProperty="name"/&gt;
		&lt;!-- P7 --&gt;
		&lt;html:options name="userData2" property="idArray" labelName="userData2" labelProperty="nameList"/&gt;
		&lt;!-- P8 --&gt;
		&lt;html:options collection="labelValueBean" property="value" labelProperty="label"/&gt;
		&lt;!-- P9 --&gt;
		&lt;html:options collection="arrayUserData" property="id" labelProperty="name"/&gt;
		&lt;!-- P10 --&gt;
		&lt;bean:define id="userDataList" name="userData3" property="userDataList"/&gt;
		&lt;html:options collection="userDataList" property="id" labelProperty="name"/&gt;
	&lt;/html:select&gt;
	&lt;html:submit/&gt;
&lt;/html:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N15FC3"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;html:optionsを利用したjspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;!-- struts1のhtml:optionsタグを利用したjspで生成されるhtml--&gt;
&lt;form name="HtmlForm" method="post" action="/ExtraTest/result.do"&gt;
	&lt;select name="stringData"&gt;
		&lt;!-- P1 --&gt;
		&lt;option value="00"&gt;地球&lt;/option&gt;
		&lt;!-- P2 --&gt;
		&lt;option value="01"&gt;北海道&lt;/option&gt;
		&lt;option value="02"&gt;東北&lt;/option&gt;
		&lt;option value="03"&gt;関東&lt;/option&gt;
		&lt;!-- P3 --&gt;
		&lt;option value="04"&gt;甲信越&lt;/option&gt;
		&lt;option value="05"&gt;中部&lt;/option&gt;
		&lt;option value="06"&gt;東海&lt;/option&gt;
		&lt;!-- P4 --&gt;
		&lt;option value="07"&gt;近畿&lt;/option&gt;
		&lt;option value="08"&gt;中国&lt;/option&gt;
		&lt;option value="09"&gt;四国&lt;/option&gt;
		&lt;!-- P5 --&gt;		
		&lt;option value="10"&gt;九州&lt;/option&gt;
		&lt;option value="11"&gt;沖縄&lt;/option&gt;
		&lt;option value="12" selected="selected"&gt;北陸&lt;/option&gt;
		&lt;!-- P6 --&gt;		
		&lt;option value="13"&gt;米国&lt;/option&gt;
		&lt;option value="14"&gt;英国&lt;/option&gt;
		&lt;option value="15"&gt;中国&lt;/option&gt;
		&lt;!-- P7 --&gt;
		&lt;option value="16"&gt;仏国&lt;/option&gt;
		&lt;!-- P8 --&gt;
		&lt;option value="17"&gt;伊国&lt;/option&gt;
		&lt;!-- P9 --&gt;
		&lt;option value="18"&gt;独国&lt;/option&gt;
		&lt;!-- P10 --&gt;
		&lt;option value="19"&gt;西国&lt;/option&gt;
		
	&lt;/select&gt;
	&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>上記jspでは以下のactionクラスを利用</p>
<div class="figure">
<a name="N15FD1"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Action</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class ExtraTest16 extends Action {
    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        
        // P1 DynaActionForm
        DynaActionForm dynaArray = (DynaActionForm) form;
        String[] dIds = {"00"};
        String[] dNames = {"地球"};
        dynaArray.set("idData", dIds);
        dynaArray.set("nameData", dNames);
        
        // P2 Listの要素がUserData
        List&lt;UserData&gt; list = Arrays.asList(new UserData("01", "北海道"),
                new UserData("02", "東北"), new UserData("03", "関東"));
        request.setAttribute("listData", list);
        
        // P3 valueとlabelを、それぞれ配列として保持
        String[] idArray = {"04", "05", "06"};
        String[] nameArray = {"甲信越", "中部", "東海"};
        request.setAttribute("idArray", idArray);
        request.setAttribute("nameArray", nameArray);
        
        // P4 Map
        Map&lt;String, String&gt; data = new HashMap&lt;String, String&gt;();
        data.put("07", "近畿");
        data.put("08", "中国");
        data.put("09", "四国");
        request.setAttribute("mapData", data);

        // P5 Iterator
        Iterator&lt;UserData&gt; iter = Arrays.asList(new UserData("10", "九州"),
                new UserData("11", "沖縄"), new UserData("12", "北陸")).iterator();
        request.setAttribute("iterator", iter);

        // P6 Enumeration
        Vector&lt;UserData&gt; vector = new Vector&lt;UserData&gt;();
        vector.add(new UserData("13", "米国"));
        vector.add(new UserData("14", "英国"));
        vector.add(new UserData("15", "中国"));
        request.setAttribute("enum", vector.elements());
        
        // P7 Beanのフィールドが配列、もしくは、コレクション
        UserData2 ud2 = new UserData2();
        String[] ids = {"16"};
        List&lt;String&gt; names = Arrays.asList("仏国");
        ud2.setIdArray(ids);
        ud2.setNameList(names);
        request.setAttribute("userData2", ud2);
        
        // P8 org.apache.struts.util.LabelValueBeanを利用
        List&lt;LabelValueBean&gt; lv = Arrays.asList(new LabelValueBean("伊国", "17"));
        request.setAttribute("labelValueBean", lv);
        
        // P9 UserDataの配列
        UserData[] udArray = {new UserData("18", "独国")};
        request.setAttribute("arrayUserData", udArray);
        
        // P10 BeanのフィールドがBeanのコレクション
        UserData3 ud3 = new UserData3();
        ud3.setUserDataList(Arrays.asList(new UserData("19", "西国")));
        mav.addObject("userData3", ud3);

        return mapping.findForward("success");
}
</pre>
</div>
</div>
<br class="figure-break">
</td>
</tr>
</table>
</div>
<p>

</p>
<p>
SpringMVCのタグを利用したサンプル

</p>
<div class="figure">
<a name="N15FDE"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;springMVCのタグを利用したjsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:form modelAttribute="selectedValue" action="${appUrl}/result"&gt;
	&lt;form:select path="stringData"&gt;
		&lt;!-- P1 --&gt;
		&lt;!-- DynaActionForm相当のBeanを作成 --&gt;
		&lt;!-- P2 --&gt;
		&lt;form:options items="${listData}" itemValue="id" itemLabel="name"/&gt;
		&lt;!-- P3 --&gt;
		&lt;c:forEach var="idx" begin="0" end="${fn:length(idArray) - 1}" step="1"&gt;
		&lt;form:option value="${idArray[idx]}" label="${nameArray[idx]}"/&gt;
		&lt;/c:forEach&gt;
		&lt;!-- P4 --&gt;
		&lt;form:options items="${mapData}"/&gt;
		&lt;!-- P5 --&gt;
		&lt;c:forEach var="iter" items="${iterator}"&gt;
		&lt;form:option value="${iter.id}" label="${iter.name}"/&gt;
		&lt;/c:forEach&gt;
		&lt;!-- P6 --&gt;
		&lt;c:forEach var="elem" items="${vector}"&gt;
		&lt;form:option value="${elem.id}" label="${elem.name}"/&gt;
		&lt;/c:forEach&gt;
		&lt;!-- P7 --&gt;
		&lt;c:forEach var="idx" begin="0" end="${fn:length(userData2.idArray) - 1}" step="1"&gt;
		&lt;form:option value="${userData2.idArray[idx]}" label="${userData2.nameList[idx]}"/&gt;
		&lt;/c:forEach&gt;
		&lt;!-- P8 --&gt;
		&lt;!-- LabelValueBean相当のBeanを作成 --&gt;
		&lt;!-- P9 --&gt;
		&lt;form:options items="${arrayUserData}" itemValue="id" itemLabel="name"/&gt;
		&lt;!-- P10 --&gt;
		&lt;form:options items="${userData3.userDataList}" itemValue="id" itemLabel="name"/&gt;
	&lt;/form:select&gt;
	&lt;input type="submit"&gt;
&lt;/form:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N15FE9"></a>
<p class="title">
<b>Figure&nbsp;5.&nbsp;springMVCのタグを利用したjspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;!-- springmvc対応 --&gt;
&lt;form id="selectedValue" action="/ExtraTest3/result" method="post"&gt;
	&lt;select id="stringData" name="stringData"&gt;
	
		&lt;!-- P1 --&gt;
		&lt;!-- DynaActionForm相当のBeanを作成!!!--&gt;
		&lt;!-- P2 --&gt;
		&lt;option value="01"&gt;北海道&lt;/option&gt;
		&lt;option value="02"&gt;東北&lt;/option&gt;
		&lt;option value="03"&gt;関東&lt;/option&gt;
		&lt;!-- P3 --&gt;
		&lt;option value="04"&gt;甲信越&lt;/option&gt;
		&lt;option value="05"&gt;中部&lt;/option&gt;
		&lt;option value="06"&gt;東海&lt;/option&gt;
		&lt;!-- P4 --&gt;
		&lt;option value="07"&gt;近畿&lt;/option&gt;
		&lt;option value="08"&gt;中国&lt;/option&gt;
		&lt;option value="09"&gt;四国&lt;/option&gt;
		&lt;!-- P5 --&gt;
		&lt;option value="10"&gt;九州&lt;/option&gt;
		&lt;option value="11"&gt;沖縄&lt;/option&gt;
		&lt;option value="12"&gt;北陸&lt;/option&gt;
		&lt;!-- P6 --&gt;
		&lt;option value="13"&gt;米国&lt;/option&gt;
		&lt;option value="14"&gt;英国&lt;/option&gt;
		&lt;option value="15"&gt;中国&lt;/option&gt;
		&lt;!-- P7 --&gt;
		&lt;option value="16"&gt;仏国&lt;/option&gt;
		&lt;!-- P8 --&gt;
		&lt;!-- LabelValueBean相当のBeanを作成!!! --&gt;
		&lt;!-- P9 --&gt;
		&lt;option value="18"&gt;独国&lt;/option&gt;
		&lt;!-- P10 --&gt;
		&lt;option value="19"&gt;西国&lt;/option&gt;
	
	&lt;/select&gt;
&lt;input type="submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>上記jspでは以下のControllerクラスを利用</p>
<div class="figure">
<a name="N15FF7"></a>
<p class="title">
<b>Figure&nbsp;6.&nbsp;Controller</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
    @RequestMapping("/test16")
    public ModelAndView execute() {
        
        ModelAndView mav = new ModelAndView("test16");
        SelectedValue selectedValue = new SelectedValue();
        mav.addObject("selectedValue", selectedValue);

        // P2 Listの要素がUserData
        List&lt;UserData&gt; list = Arrays.asList(new UserData("01", "北海道"),
                new UserData("02", "東北"), new UserData("03", "関東"));
        mav.addObject("listData", list);
        
        // P3 valueとlabelを、それぞれ配列として保持
        String[] idArray = {"04", "05", "06"};
        String[] nameArray = {"甲信越", "中部", "東海"};
        mav.addObject("idArray", idArray);
        mav.addObject("nameArray", nameArray);
        
        // P4 Map
        Map&lt;String, String&gt; data = new HashMap&lt;String, String&gt;();
        data.put("07", "近畿");
        data.put("08", "中国");
        data.put("09", "四国");
        mav.addObject("mapData", data);
        
        // P5 Iterator
        Iterator&lt;UserData&gt; iter = Arrays.asList(new UserData("10", "九州"),
                new UserData("11", "沖縄"), new UserData("12", "北陸")).iterator();
        mav.addObject("iterator", iter);

        // P6 Enumeration
        Vector&lt;UserData&gt; vector = new Vector&lt;UserData&gt;();
        vector.add(new UserData("13", "米国"));
        vector.add(new UserData("14", "英国"));
        vector.add(new UserData("15", "中国"));
        mav.addObject("vector", vector.elements());
        
        // P7 Beanのフィールドが配列、もしくは、コレクション
        UserData2 ud2 = new UserData2();
        String[] ids = {"16"};
        List&lt;String&gt; names = Arrays.asList("仏国");
        ud2.setIdArray(ids);
        ud2.setNameList(names);
        mav.addObject("userData2", ud2);

        // P9 UserDataの配列
        UserData[] udArray = {new UserData("18", "独国")};
        mav.addObject("arrayUserData", udArray);

        // P10 BeanのフィールドがBeanのコレクション
        UserData3 ud3 = new UserData3();
        ud3.setUserDataList(Arrays.asList(new UserData("19", "西国")));
        request.setAttribute("userData3", ud3);

        return mav;
}


</pre>
</div>
</div>
<br class="figure-break">
</td>
</tr>
</table>
</div>
<p>

</p>
</div>
<br>
<br>
<a name="tubame_8.7.2." id="category_623"></a>
<h3 class="title">8.7.2.html:checkbox及びhtml:multibox</h3>
<br>
<br>
<a name="tubame_8.7.2.1." id="category_624"></a>
<h3 class="title">8.7.2.1.strutsサンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
以下のケースを検討する

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>JSP（&lt;html:multibox&gt;で複数のチェックボックスを表示）</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;で複数のチェックボックスを表示）</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;でon/off用チェックボックスを表示）</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;でon/off用チェックボックスを複数表示）
</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;でListでデータを授受。List-backed ActionFormのサンプル）

</p>
</li>
</ol>
</div>
<p>


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>
以下のActionFormとActionを利用

</p>
<div class="figure">
<a name="N16022"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;ActionForm</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MultiBoxTest extends ActionForm {
    private static final long serialVersionUID = 1L;
    private String[] data;
    private Boolean checked;
    private Boolean[] checkedArray;
    private List&lt;String&gt; dataList;

    public String[] getData() {
        return data;
    }

    public void setData(String[] data) {
        this.data = data;
    }
    
    public Boolean getChecked() {
        return checked;
    }

    public void setChecked(Boolean checked) {
        this.checked = checked;
    }
    
    public Boolean[] getCheckedArray() {
        return checkedArray;
    }

    public void setCheckedArray(Boolean[] checkedArray) {
        this.checkedArray = checkedArray;
    }

    public String getListData(int idx) {
        return dataList.get(idx);
    }

    public void setListData(int idx, String listData) {
        this.dataList.set(idx, listData);
    }

    public void reset(ActionMapping mapping, HttpServletRequest request) {
        data = null;
        checked = false;
        checkedArray = null;
        dataList = Arrays.asList("", "");
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
<div class="figure">
<a name="N1602D"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Action</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        return mapping.findForward("success");
     }
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</td>
</tr>
</table>
</div>
<p>



</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.1.1." id="category_625"></a>
<h3 class="title">8.7.2.1.1.JSPサンプル(html:multiboxで複数のチェックボックスを表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
struts1のhtml:multiboxを利用したサンプル
</p>
<div class="figure">
<a name="N16045"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/test14-action"&gt;
	&lt;html:multibox property="data" value="a"/&gt;&lt;bean:message key="global.check1"/&gt;&lt;br&gt;
	&lt;html:multibox property="data"&gt;&lt;bean:message key="global.check2"/&gt;&lt;/html:multibox&gt;&lt;bean:message key="global.check2"/&gt;&lt;br&gt;
	&lt;html:submit/&gt;
&lt;/html:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16050"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form id="mbt" method="post" action="/ExtraTest/test14-action.do"&gt;
	&lt;input type="checkbox" name="data" value="a" /&gt;check1&lt;br&gt;
	&lt;input type="checkbox" name="data" value="check2" /&gt;check2&lt;br&gt;
	&lt;input type="submit" value="Submit" /&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.1.2." id="category_626"></a>
<h3 class="title">8.7.2.1.2.JSPサンプル(html:checkboxで複数のチェックボックスを表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16067"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/test14-action"&gt;
	&lt;html:checkbox property="data" value="a"/&gt;&lt;bean:message key="global.check1"/&gt;&lt;br&gt;
	&lt;html:checkbox property="data"/&gt;&lt;bean:message key="global.check2"/&gt;&lt;br&gt;
	&lt;html:submit/&gt;
&lt;/html:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16072"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form name="mbt" method="post" action="/ExtraTest/test14-action.do"&gt;
	&lt;input type="checkbox" name="data" value="a"&gt;check1&lt;br&gt;
	&lt;input type="checkbox" name="data" value="on"&gt;check2&lt;br&gt;
	&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.1.3." id="category_627"></a>
<h3 class="title">8.7.2.1.3.JSPサンプル(html:checkboxでon/off用チェックボックスを表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
struts1のhtml:checkboxを利用したon/off用チェックボックスサンプル
</p>
<div class="figure">
<a name="N16089"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/test14-action"&gt;
	&lt;html:checkbox property="checked"/&gt;&lt;bean:message key="global.check1"/&gt;&lt;br&gt;
	&lt;html:submit/&gt;
&lt;/html:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16094"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form name="mbt" method="post" action="/ExtraTest/test14-action.do"&gt;
	&lt;input type="checkbox" name="checked" value="on"&gt;check1&lt;br&gt;
	&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.1.4." id="category_628"></a>
<h3 class="title">8.7.2.1.4.JSPサンプル(html:checkboxでon/off用チェックボックスを複数表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
struts1のhtml:checkboxを利用したon/off用チェックボックスサンプル(複数表示)
</p>
<div class="figure">
<a name="N160AB"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form name="mbt" method="post" action="/ExtraTest/test14-action.do"&gt;
	&lt;input type="checkbox" name="checkedArray" value="on"&gt;check1&lt;br&gt;
	&lt;input type="checkbox" name="checkedArray" value="on"&gt;check2&lt;br&gt;
	&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N160B6"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/test14-action"&gt;
	&lt;html:checkbox property="checkedArray"/&gt;&lt;bean:message key="global.check1"/&gt;&lt;br&gt;
	&lt;html:checkbox property="checkedArray"/&gt;&lt;bean:message key="global.check2"/&gt;&lt;br&gt;
	&lt;html:submit/&gt;
&lt;/html:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.1.5." id="category_629"></a>
<h3 class="title">8.7.2.1.5.JSPサンプル(html:checkboxでListでデータを授受。List-backed ActionFormのサンプル）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
struts1のhtml:checkboxでListデータを利用したサンプル
</p>
<div class="figure">
<a name="N160CD"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/test14-action"&gt;
&lt;c:forEach var="i" begin="0" end="1" step="1"&gt;
  &lt;html:checkbox property="listData[${i}]" value="${i+1}"/&gt;&lt;bean:message key="global.check${i+1}"/&gt;&lt;br&gt;
&lt;/c:forEach&gt;
&lt;html:submit/&gt;
&lt;/html:form&gt;

JSP(チェックされた値を表示）
&lt;c:forEach var="i" begin="0" end="1" step="1"&gt;
  &lt;bean:write name="mbt" property="listData[${i}]"/&gt;
&lt;/c:forEach&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N160D8"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form name="mbt" method="post" action="/ExtraTest/test14-action.do"&gt;
  &lt;input type="checkbox" name="org.apache.struts.taglib.html.BEAN[0].listData[0]" value="1"&gt;check1&lt;br&gt;
  &lt;input type="checkbox" name="org.apache.struts.taglib.html.BEAN[1].listData[1]" value="2"&gt;check2&lt;br&gt;
&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.2." id="category_630"></a>
<h3 class="title">8.7.2.2.SpringMVCサンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
以下のケースをSpringMVCで検討する

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>JSP（&lt;html:multibox&gt;で複数のチェックボックスを表示）</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;でon/off用チェックボックスを表示）</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;でon/off用チェックボックスを複数表示）
</p>
</li>
<li class="listitem">
<p>JSP（&lt;html:checkbox&gt;でListでデータを授受。List-backed ActionFormのサンプル）

</p>
</li>
</ol>
</div>
<p>


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>
以下のBeanとControllerを利用

</p>
<div class="figure">
<a name="N16100"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Bean</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class MultiBoxTest {
    private String[] data;
    private Boolean checked;
    private Boolean[] checkedArray;
    private List&lt;String&gt; checkedList = new ArrayList&lt;String&gt;();

    public String[] getData() {
        return data;
    }

    public void setData(String[] data) {
        this.data = data;
    }

    public Boolean getChecked() {
        return checked;
    }

    public void setChecked(Boolean checked) {
        this.checked = checked;
    }

    public Boolean[] getCheckedArray() {
        return checkedArray;
    }

    public void setCheckedArray(Boolean[] checkedArray) {
        this.checkedArray = checkedArray;
    }

    public List&lt;String&gt; getCheckedList() {
        return checkedList;
    }

    public void setCheckedList(List&lt;String&gt; checkedList) {
        this.checkedList = checkedList;
    }

}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
<div class="figure">
<a name="N1610B"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Controller</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
@Controller
public class ExtraTest14 {
    @RequestMapping("/result14")
    public String result(@ModelAttribute("multiBoxTest") MultiBoxTest multiBoxTest) {
        return "result14";
    }
    
    @RequestMapping("/test14")
    public ModelAndView execute14() {
        ModelAndView mav = new ModelAndView("test14");
        mav.addObject("multiBoxTest", new MultiBoxTest());
        return mav;
    }

    @RequestMapping("/test14-2")
    public ModelAndView execute14_2() {
        ModelAndView mav = new ModelAndView("test14-2");
        mav.addObject("multiBoxTest", new MultiBoxTest());
        return mav;
    }

    @RequestMapping("/test14-3")
    public ModelAndView execute14_3() {
        ModelAndView mav = new ModelAndView("test14-3");
        mav.addObject("multiBoxTest", new MultiBoxTest());
        return mav;
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</td>
</tr>
</table>
</div>
<p>



</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.2.1." id="category_631"></a>
<h3 class="title">8.7.2.2.1.JSPサンプル(html:multiboxで複数のチェックボックスを表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCのform:checkboxを利用したサンプル
</p>
<div class="figure">
<a name="N16123"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:form modelAttribute="multiBoxTest" action="${appUrl}/result14"&gt;
	&lt;spring:message code='global.check1' var="message1"/&gt;
	&lt;spring:message code='global.check2' var="message2"/&gt;
	&lt;form:checkbox path="data" label="${message1}" value="a"/&gt;&lt;br&gt;
	&lt;form:checkbox path="data" label="${message2}" value="b"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form:form&gt;

注） Struts1のようにvalueの指定あり、なしを混在させることは出来ない
     （Model側でString[]で受けているため）
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N1612E"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form id="multiBoxTest" action="/ExtraTest3/result14" method="post"&gt;
	&lt;input id="data1" name="data" type="checkbox" value="a"/&gt;&lt;label for="data1"&gt;check1&lt;/label&gt;&lt;input type="hidden" name="_data" value="on"/&gt;&lt;br&gt;
	&lt;input id="data2" name="data" type="checkbox" value="b"/&gt;&lt;label for="data2"&gt;check2&lt;/label&gt;&lt;input type="hidden" name="_data" value="on"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.2.2." id="category_632"></a>
<h3 class="title">8.7.2.2.2.JSPサンプル(html:checkboxでon/off用チェックボックスを表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCのform:checkboxを利用したon/off用チェックボックスサンプル
</p>
<div class="figure">
<a name="N16145"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form id="multiBoxTest" action="/ExtraTest3/result14" method="post"&gt;
	&lt;input id="checked1" name="checked" type="checkbox" value="true"/&gt;&lt;label for="checked1"&gt;check1&lt;/label&gt;&lt;input type="hidden" name="_checked" value="on"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16150"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:form modelAttribute="multiBoxTest" action="${appUrl}/result14"&gt;
	&lt;spring:message code='global.check1' var="message1"/&gt;
	&lt;form:checkbox path="checked" label="${message1}"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;	&lt;spring:message code='global.check1' var="message1"/&gt;
	&lt;form:checkbox path="checked" label="${message1}"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.2.3." id="category_633"></a>
<h3 class="title">8.7.2.2.3.JSPサンプル(html:checkboxでon/off用チェックボックスを複数表示）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCのform:checkboxを利用したon/off用チェックボックスサンプル(複数表示)
</p>
<div class="figure">
<a name="N16167"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:form modelAttribute="multiBoxTest" action="${appUrl}/result14"&gt;
	&lt;spring:message code='global.check1' var="message1"/&gt;
	&lt;spring:message code='global.check2' var="message2"/&gt;
	&lt;form:checkbox path="checkedArray" label="${message1}" value="on"/&gt;&lt;br&gt;
	&lt;form:checkbox path="checkedArray" label="${message2}" value="on"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form:form&gt;

豕ｨ?ｼ隠oolean縺ｮ驟榊?励〒蜿励?繧句?ｴ蜷医?ヾtruts1縺ｮ繧医≧縺ｫvalue辟｡縺励&darr;縺吶ｋ縺薙&rarr;縺ｯ縺ｧ縺阪&uarr;縺?
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16172"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form id="multiBoxTest" action="/ExtraTest3/result14" method="post"&gt;
	&lt;input id="checkedArray1" name="checkedArray" type="checkbox" value="on"/&gt;&lt;label for="checkedArray1"&gt;check1&lt;/label&gt;&lt;input type="hidden" name="_checkedArray" value="on"/&gt;&lt;br&gt;
	&lt;input id="checkedArray2" name="checkedArray" type="checkbox" value="on"/&gt;&lt;label for="checkedArray2"&gt;check2&lt;/label&gt;&lt;input type="hidden" name="_checkedArray" value="on"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.2.2.4." id="category_634"></a>
<h3 class="title">8.7.2.2.4.JSPサンプル(html:checkboxでListでデータを授受。List-backed ActionFormのサンプル）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
SpringMVCのform:checkboxでListデータを利用したサンプル
</p>
<div class="figure">
<a name="N16189"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;jsp</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:form modelAttribute="multiBoxTest" action="${appUrl}/result14"&gt;
	&lt;spring:message code='global.check1' var="message1"/&gt;
	&lt;spring:message code='global.check2' var="message2"/&gt;
	&lt;form:checkbox path="checkedList" label="${message1}" value="on"/&gt;&lt;br&gt;
	&lt;form:checkbox path="checkedList" label="${message2}" value="on"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16194"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form id="multiBoxTest" action="/ExtraTest3/result14" method="post"&gt;
	&lt;input id="checkedList1" name="checkedList" type="checkbox" value="on"/&gt;&lt;label for="checkedList1"&gt;check1&lt;/label&gt;&lt;input type="hidden" name="_checkedList" value="on"/&gt;&lt;br&gt;
	&lt;input id="checkedList2" name="checkedList" type="checkbox" value="on"/&gt;&lt;label for="checkedList2"&gt;check2&lt;/label&gt;&lt;input type="hidden" name="_checkedList" value="on"/&gt;&lt;br&gt;
	&lt;input type="submit"&gt;
&lt;/form&gt;

</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.3." id="category_635"></a>
<h3 class="title">8.7.3.html:radio</h3>
<br>
<br>
<a name="tubame_8.7.3.1." id="category_636"></a>
<h3 class="title">8.7.3.1.strutsサンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
以下のStrutsのhtml:radioを利用した以下のケースを検討する

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</p>
</li>
<li class="listitem">
<p>JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</p>
</li>
<li class="listitem">
<p>JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)）</p>
</li>
</ol>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.1.1." id="category_637"></a>
<h3 class="title">8.7.3.1.1.JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N161C2"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:radio property="stringData" value="aaa"/&gt;Check1&lt;br&gt;
&lt;html:radio property="stringData" value="bbb"/&gt;Check2&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N161CD"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;JSPで生成されたHTML</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;input type="radio" name="stringData" value="aaa"&gt;Check1&lt;br&gt;
&lt;input type="radio" name="stringData" value="bbb"&gt;Check2&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.1.2." id="category_638"></a>
<h3 class="title">8.7.3.1.2.JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N161E4"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;logic:iterate id="radioValue" name="RadioValue"&gt;
	&lt;html:radio idName="radioValue" value="idValue" property="stringData"/&gt;CheckX&lt;br&gt;
&lt;/logic:iterate&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N161EF"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;input type="radio" name="stringData" value="ccc"&gt;CheckX&lt;br&gt;
&lt;input type="radio" name="stringData" value="ddd"&gt;CheckX&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>上記で利用するBeanとAction</p>
<div class="figure">
<a name="N161FD"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Bean</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class RadioValue {
    private String idValue;
    
    public RadioValue(String idValue) {
        this.idValue = idValue;
    }

    public String getIdValue() {
        return idValue;
    }

    public void setIdValue(String idValue) {
        this.idValue = idValue;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
<div class="figure">
<a name="N16207"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;Action</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;logic:iterate id="mapValue" name="MapValue"&gt;
	&lt;html:radio idName="mapValue" value="key" property="stringData"/&gt;
	&lt;bean:write name="mapValue" property="value"/&gt;&lt;br&gt;
&lt;/logic:iterate&gt;
</pre>
</div>
</div>
<br class="figure-break">
</td>
</tr>
</table>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.1.3." id="category_639"></a>
<h3 class="title">8.7.3.1.3.JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N1621E"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
List&lt;RadioValue&gt; radioValues = Arrays.asList(new RadioValue("ccc"), new RadioValue("ddd"));
request.setAttribute("RadioValue", radioValues);
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16229"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;input type="radio" name="stringData" value="eee"&gt;CheckY&lt;br&gt;
&lt;input type="radio" name="stringData" value="fff"&gt;CheckZ&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>上記で利用するAction</p>
<div class="figure">
<a name="N16237"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Action</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
Map&lt;String, String&gt; valueMap = new HashMap&lt;String, String&gt;();
valueMap.put("eee", "CheckY");
valueMap.put("fff", "CheckZ");
request.setAttribute("MapValue", valueMap);
</pre>
</div>
</div>
<br class="figure-break">
</td>
</tr>
</table>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.2." id="category_640"></a>
<h3 class="title">8.7.3.2.SpringMVCサンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
以下のケースをSpringMVCで検討する

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</p>
</li>
<li class="listitem">
<p>JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</p>
</li>
<li class="listitem">
<p>JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)）</p>
</li>
</ol>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.2.1." id="category_641"></a>
<h3 class="title">8.7.3.2.1.JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16265"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル(ActionでRadioボタンのラベル、値を定義しない場合）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:radiobutton path="stringData" value="aaa"/&gt;Check1&lt;br&gt;
&lt;form:radiobutton path="stringData" value="bbb"/&gt;Check2&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16270"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;JSPで生成されたHTML</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;input id="stringData1" name="stringData"type="radio" value="aaa"/&gt;Check1&lt;br&gt; 
&lt;input id="stringData2" name="stringData" type="radio" value="bbb"/&gt;Check2&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.2.2." id="category_642"></a>
<h3 class="title">8.7.3.2.2.JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16287"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル(ActionでRadioボタンの値を定義する場合-ListにBeanを格納)</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;c:forEach var="radioValue" items="${RadioValue}"&gt;
	&lt;form:radiobutton path="stringData" value="${radioValue.idValue}"/&gt;CheckX&lt;br&gt;
&lt;/c:forEach&gt;

注）この例のようにBeanでRadioボタンのvalueしか保持していない場合、
&lt;form:radiobuttons&gt;を使用すると、LabelにBeanのクラス名が表示されてしまう。
JSP例
&lt;form:radiobuttons path="stringData" items="${RadioValue}" itemValue="idValue" /&gt;&lt;br&gt;

生成されたHTML
&lt;span&gt;
	&lt;input id="stringData5" name="stringData" type="radio" value="ccc"/&gt;
	&lt;label for="stringData5"&gt;org.sample.springmvc.extra.RadioValue@1addee2&lt;/label&gt;
&lt;/span&gt;
&lt;span&gt;
	&lt;input id="stringData6" name="stringData" type="radio" value="ddd"/&gt;
	&lt;label for="stringData6"&gt;org.sample.springmvc.extra.RadioValue@1ae101a&lt;/label&gt;
&lt;/span&gt;
&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16292"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;input id="stringData3" name="stringData" type="radio" value="ccc"/&gt;CheckX&lt;br&gt;
&lt;input id="stringData4" name="stringData" type="radio" value="ddd"/&gt;CheckX&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>上記で利用するBeanとController</p>
<div class="figure">
<a name="N162A0"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Bean</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class RadioValue {
    private String idValue;
    
    public RadioValue(String idValue) {
        this.idValue = idValue;
    }

    public String getIdValue() {
        return idValue;
    }

    public void setIdValue(String idValue) {
        this.idValue = idValue;
    }
}
</pre>
</div>
</div>
<br class="figure-break">
<div class="figure">
<a name="N162AA"></a>
<p class="title">
<b>Figure&nbsp;4.&nbsp;Controller</b>
</p>
<div class="figure-contents">
<pre class="programlisting">

        List&lt;RadioValue&gt; radioValues = Arrays.asList(new RadioValue("ccc"), new RadioValue("ddd"));
        mav.addObject("RadioValue", radioValues);
</pre>
</div>
</div>
<br class="figure-break">
</td>
</tr>
</table>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.3.2.3." id="category_643"></a>
<h3 class="title">8.7.3.2.3.JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N162C1"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル(ActionでRadioボタンの値を定義する場合-Mapに格納)</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:radiobuttons path="stringData" items="${MapValue}" delimiter="&lt;br&gt;"/&gt;&lt;br&gt;

注） &lt;form:radiobutton&gt;で同様の事を実現する場合は、以下のように記述する。
&lt;c:forEach var="entry" items="${MapValue}"&gt;
&lt;form:radiobutton path="stringData" value="${entry.key}" label="${entry.value}"/&gt;&lt;br&gt;
&lt;/c:forEach&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N162CC"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;jspで生成されるhtml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;span&gt;&lt;input id="stringData7" name="stringData" type="radio" value="eee"/&gt;&lt;label for="stringData7"&gt;CheckY&lt;/label&gt;&lt;/span&gt;
&lt;span&gt;&lt;br&gt;&lt;input id="stringData8" name="stringData" type="radio" value="fff"/&gt;&lt;label for="stringData8"&gt;CheckZ&lt;/label&gt;&lt;/span&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>上記で利用するController</p>
<div class="figure">
<a name="N162DA"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;Controller</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
Map&lt;String, String&gt; valueMap = new HashMap&lt;String, String&gt;();
valueMap.put("eee", "CheckY");
valueMap.put("fff", "CheckZ");
mav.addObject("MapValue", valueMap);
</pre>
</div>
</div>
<br class="figure-break">
</td>
</tr>
</table>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.4." id="category_644"></a>
<h3 class="title">8.7.4.html:messages</h3>
<br>
<br>
<a name="tubame_8.7.4.1." id="category_645"></a>
<h3 class="title">8.7.4.1.strutsサンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
以下のStrutsのhtml:messagesを利用した以下のケースを検討する

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>JSPサンプル-Action#saveMessagesで保存したメッセージを表示する場合</p>
</li>
<li class="listitem">
<p>JSPサンプル-OverrideしたsaveMessagesで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）
</p>
</li>
<li class="listitem">
<p>JSPサンプル-Action#saveErrorsで保存したメッセージを表示する場合</p>
</li>
<li class="listitem">
<p>JSPサンプル-OverrideしたsaveErrorsで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）
</p>
</li>
<li class="listitem">
<p>JSPサンプル-Action#saveMessagesで保存したメッセージキーに対応するメッセージを表示する
</p>
</li>
<li class="listitem">
<p>JSPサンプル-メッセージの存在チェック
</p>
</li>
<li class="listitem">
<p>JSPサンプル-struts-validator使用時にメッセージを出力する
</p>
</li>
</ol>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.1." id="category_646"></a>
<h3 class="title">8.7.4.1.1.JSPサンプル-Action#saveMessagesで保存したメッセージを表示する場合</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16314"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-Action#saveMessagesで保存したメッセージを表示する場合</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:messages id="msg1" message="true" property="key1"&gt;
  &lt;bean:write name="msg1"/&gt;
&lt;/html:messages&gt;

※&lt;html:messages&gt;のmessage属性にtrueを設定する必要がある
&rArr;message="true"の場合、Globals.MESSAGE_KEYをキーとしてActionMessagesを取得する
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N1631F"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
ActionMessages messages1 = new ActionMessages();
ActionMessage message1 = new ActionMessage("メッセージ1", false);
messages1.add("key1", message1);
super.saveMessages(request, messages1);
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.2." id="category_647"></a>
<h3 class="title">8.7.4.1.2.JSPサンプル-OverrideしたsaveMessagesで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16336"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-OverrideしたsaveMessagesで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:messages id="msg2" name="local.key" message="false" property="key2"&gt;
  &lt;bean:write name="msg2"/&gt;
&lt;/html:messages&gt;

※&lt;html:messages&gt;のmessage属性にtrue以外の値を設定（もしくはmessage属性を指定しない）し、name属性にリクエスト属性に登録する際に設定したキーを指定する必要がある
&rArr; message="false" &amp;&amp; name == null の場合は、Globals.ERROR_KEYをキーとしてActionMessagesを取得する（下記(3)を参照）
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16341"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
    ActionMessages messages2 = new ActionMessages();
    // ActionMessageに直接メッセージを格納する場合は、コンストラクタの第二引数にfalseを設定する
    ActionMessage message2 = new ActionMessage("メッセージ2", false);
    messages2.add("key2", message2);
    saveMessages(request, messages2);

@Override
protected void saveMessages(HttpServletRequest request, ActionMessages messages) {
    // Remove any messages attribute if none are required
    if ((messages == null) || messages.isEmpty()) {
        request.removeAttribute("local.key");

        return;
    }

    // Save the messages we need
    request.setAttribute("local.key", messages);
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.3." id="category_648"></a>
<h3 class="title">8.7.4.1.3.JSPサンプル-Action#saveErrorsで保存したメッセージを表示する場合</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16358"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-Action#saveErrorsで保存したメッセージを表示する場合</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:messages id="msg3" message="false" property="key3"&gt;
  &lt;bean:write name="msg3"/&gt;&lt;br&gt;
&lt;/html:messages&gt;

※&lt;html:errors&gt;を使用する場合は、以下のように記述する
&lt;html:errors property="key3"/&gt;&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16363"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
    ActionMessages messages4 = new ActionMessages();
    ActionMessage message4 = new ActionMessage("メッセージ4", false);
    messages4.add("key4", message4);
    saveErrors(request, messages4);

@Override
protected void saveErrors(HttpServletRequest request, ActionMessages errors) {
    // Remove any error messages attribute if none are required
    if ((errors == null) || errors.isEmpty()) {
        request.removeAttribute("local.error.key");

        return;
    }

    // Save the error messages we need
    request.setAttribute("local.error.key", errors);
}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.4." id="category_649"></a>
<h3 class="title">8.7.4.1.4.JSPサンプル-OverrideしたsaveErrorsで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N1637A"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-OverrideしたsaveErrorsで保存したメッセージを表示する場合（リクエスト属性のキーを変更したい場合）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:messages id="msg5" message="true" property="key5"&gt;
  &lt;bean:write name="msg5"/&gt;&lt;br&gt;
&lt;/html:messages&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16385"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:messages id="msg7" message="true" property="key7"&gt;
  &lt;bean:write name="msg7"/&gt;&lt;br&gt;
&lt;/html:messages&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.5." id="category_650"></a>
<h3 class="title">8.7.4.1.5.JSPサンプル-Action#saveMessagesで保存したメッセージキーに対応するメッセージを表示する</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N1639C"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-Action#saveMessagesで保存したメッセージキーに対応するメッセージを表示する</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
ActionMessages messages5 = new ActionMessages();
ActionMessage message5 = new ActionMessage("global.test15");
messages5.add("key5", message5);
super.addMessages(request, messages5);
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N163A7"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
ActionMessages messages7 = new ActionMessages();
String[] args = {"World", "!"};
ActionMessage message7 = new ActionMessage("global.message.with.args", args);
messages7.add("key7", message7);
super.addMessages(request, messages7);
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.6." id="category_651"></a>
<h3 class="title">8.7.4.1.6.JSPサンプル-メッセージの存在チェック</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N163BE"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-メッセージの存在チェック</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;logic:messagesPresent&gt;を使用する。
属性値であるmessage, name, propertyは&lt;html:messages&gt;に指定するものと同じものを指定すると、メッセージを特定する事ができる。

	・&lt;logic:messagesPresent/&gt;
	　Globals.ERROR_KEYをキーとして格納されたActionMessagesにメッセージが格納されている場合にtrueとなる
	・&lt;logic:messagesPresent message="true"/&gt;
	　Globals.MESSAGE_KEYをキーとして格納されたActionMessagesにメッセージが格納されている場合にtrueとなる
	・&lt;logic:messagesPresent name="local.key"/&gt;
	　"local.key"をキーとして格納されたActionMessagesにメッセージが格納されている場合にtrueとなる
	・&lt;logic:messagesPresent property="key3"/&gt;
	　Globals.ERROR_KEYをキーとして格納されたActionMessagesに、key3をキーとしたメッセージが格納されている場合にtrueとなる
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.1.7." id="category_652"></a>
<h3 class="title">8.7.4.1.7.JSPサンプル-struts-validator使用時にメッセージを出力する</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N163D5"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-struts-validator使用時にメッセージを出力する</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;html:form action="/validateUser.do"&gt;
    &lt;html:errors property="username"/&gt;&lt;p&gt;
    &lt;bean:message key="global.username"/&gt;
    &lt;html:text property="username"/&gt;&lt;p&gt;
    &lt;html:errors property="password"/&gt;&lt;p&gt;
    &lt;bean:message key="global.password"/&gt;
    &lt;html:password property="password"/&gt;&lt;p&gt;
    &lt;html:submit&gt;&lt;bean:message key="global.submit"/&gt;&lt;/html:submit&gt;
&lt;/html:form&gt;

※ValidatoForm#validation
ValidateActionForm#executeの実行時に呼び出され、ActionErrorsが存在する場合はActionContext#saveErrorsでメッセージが保存される
この場合のActionContextはServletActionContextが利用され、RequestスコープにGlobals.ERROR_KEYをキーとして保存される
これにより、&lt;html:errors&gt;でエラーメッセージが表示される
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N163E0"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class UserInfo extends ValidatorForm {
    private String username;
    private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N163EB"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;設定ファイル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;formset&gt;
    &lt;form name="userinfo"&gt;
        &lt;field property="username" depends="required"&gt;
            &lt;msg name="required" key="username.required" bundle="validate"/&gt;
        &lt;/field&gt;
        &lt;field property="password" depends="required"&gt;
            &lt;msg name="required" key="password.required" bundle="validate"/&gt;
        &lt;/field&gt;
    &lt;/form&gt;
&lt;/formset&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2." id="category_653"></a>
<h3 class="title">8.7.4.2.SpringMVCサンプル</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
以下のケースをSpringMVCで検討する

</p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>JSPサンプル-リクエストスコープにメッセージを格納（その１）</p>
</li>
<li class="listitem">
<p>JSPサンプル-リクエストスコープにメッセージを格納（その２）
</p>
</li>
<li class="listitem">
<p>JSPサンプル-Action#saveErrorsで保存したメッセージを表示する場合</p>
</li>
<li class="listitem">
<p>JSPサンプル-リクエストスコープに保存されたメッセージキーが引数を取る場合
</p>
</li>
<li class="listitem">
<p>JSPサンプル-メッセージの存在チェック
</p>
</li>
<li class="listitem">
<p>Bean Validation使用時にメッセージを出力する
</p>
</li>
</ol>
</div>
<p>


</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2.1." id="category_654"></a>
<h3 class="title">8.7.4.2.1.JSPサンプル-リクエストスコープにメッセージを格納（その１）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16422"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-リクエストスコープにメッセージを格納（その１）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
${key1} 
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N1642D"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public ModelAndView  setup(WebRequest request) {
    request.setAttribute("key1", "メッセージ1", WebRequest.SCOPE_REQUEST);
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2.2." id="category_655"></a>
<h3 class="title">8.7.4.2.2.JSPサンプル-リクエストスコープにメッセージを格納（その２）</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16444"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-リクエストスコープにメッセージを格納（その２）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
ModelAndView mav = new ModelAndView("test15");
mav.addObject("key2", "メッセージ2");
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N1644F"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
${key2}
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2.3." id="category_656"></a>
<h3 class="title">8.7.4.2.3.JSPサンプル-リクエストスコープに保存されたメッセージキーに対応するメッセージを表示する場合</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16466"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-リクエストスコープに保存されたメッセージキーに対応するメッセージを表示する場合</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;spring:message code="${key4}"/&gt;&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16471"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
request.setAttribute("key4", "global.message", WebRequest.SCOPE_REQUEST);
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2.4." id="category_657"></a>
<h3 class="title">8.7.4.2.4.JSPサンプル-リクエストスコープに保存されたメッセージキーが引数を取る場合</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N16488"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-リクエストスコープに保存されたメッセージキーが引数を取る場合</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;spring:message code="${key6}" arguments="${args}"/&gt;&lt;br&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16493"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
request.setAttribute("key6", "global.message.with.args", WebRequest.SCOPE_REQUEST);
String[] args = {"World", "!"};
request.setAttribute("args", Arrays.stream(args).collect(Collectors.joining(",")), WebRequest.SCOPE_REQUEST);
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2.5." id="category_658"></a>
<h3 class="title">8.7.4.2.5.JSPサンプル-メッセージの存在チェック</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N164AA"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;JSPサンプル-メッセージの存在チェック</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;c:if test="${key1 != null}"&gt;
  &lt;div&gt;${key1}&lt;/div&gt;
&lt;/c:if&gt;

・Validationエラーメッセージの存在有無チェック
Struts1において、Validationエラーメッセージの存在有無チェックの結果、表示形式を変えている場合、例えば、
	&lt;logic:messagesPresent&gt; 
	    &lt;div class="warning"&gt;
	        &lt;html:messages id="error"&gt;
	            &lt;c:out value="${error}" escapeXml="false"/&gt;&lt;br/&gt;
	        &lt;/html:messages&gt;
	    &lt;/div&gt;
	&lt;/logic:messagesPresent&gt;
のような場合は、
	&lt;form:errors cssClass="warning" path="*" htmlEscape="false" element="div"/&gt;&lt;br&gt;
とすることで、同等の効果を得ることができる。

メッセージの有無により処理を振り分けるなどを行いたい場合は、
	&lt;spring:bind path="*"&gt;
	    ${status.error ? "Error!!" : ""}&lt;p&gt;
	&lt;/spring:bind&gt;
のように、&lt;spring:bind&gt;を用いてstatusにエラー情報をバインドする。
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
</div>
<br>
<br>
<a name="tubame_8.7.4.2.6." id="category_659"></a>
<h3 class="title">8.7.4.2.6.Bean Validation使用時にメッセージを出力する</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>

</p>
<div class="figure">
<a name="N164C1"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Bean Validation使用時にメッセージを出力する</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;form:form modelAttribute="userinfo" action="${appUrl}/user/validateUser"&gt;
    &lt;form:errors path="username" cssClass="errors"/&gt;&lt;p&gt;
    &lt;form:label path="username"&gt;&lt;spring:message code="global.username"/&gt;&lt;/form:label&gt;
    &lt;form:input path="username" cssErrorClass="input_error"/&gt;&lt;p&gt;
    &lt;form:errors path="password" cssClass="errors"/&gt;&lt;p&gt;
    &lt;form:label path="password"&gt;&lt;spring:message code="global.password"/&gt;&lt;/form:label&gt;
    &lt;form:password path="password" cssErrorClass="input_error"/&gt;&lt;p&gt;
    &lt;input type="submit" name="submit" value="&lt;spring:message code="global.submit"/&gt;"/&gt;
&lt;/form:form&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N164CC"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;Java</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class UserInfo {
    @NotEmpty private String username;
    @NotEmpty private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N164D7"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;設定ファイル</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;bean id="messageSource"
 class="org.springframework.context.support.ReloadableResourceBundleMessageSource"&gt;
    &lt;property name="basenames"&gt;
        &lt;list&gt;
            &lt;value&gt;classpath:i18n/validation/ValidationMessages&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="fallbackToSystemLocale" value="false"/&gt;
&lt;/bean&gt;
&lt;bean id="validator"
 class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"&gt;
    &lt;property name="validationMessageSource"&gt;&lt;ref bean="messageSource" /&gt;&lt;/property&gt;
&lt;/bean&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.8." id="category_660"></a>
<h3 class="title">8.8.Struts1のDownloadAction</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>			以下では、DownloadActionの実装例を示す。

</p>
<div class="figure">
<a name="N164EE"></a>
<p class="title">
<b>Figure&nbsp;1.&nbsp;Actionクラス</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
public class ExtraTest1 extends DownloadAction {
    @Override
    protected int getBufferSize() {
        return 1024;
    }
    
    @Override
    protected StreamInfo getStreamInfo(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        String path = servlet.getServletContext().getRealPath("/WEB-INF/download.txt");
        StreamInfo streamInfo = new FileStreamInfo("application/octet-stream", Paths.get(path).toFile());
        response.setHeader("Content-disposition", "attachment; filename="
                + "fileABC.txt");
        return streamInfo;
    }
}
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N164F9"></a>
<p class="title">
<b>Figure&nbsp;2.&nbsp;JSPファイル（test1.jsp）</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;%@ page language="java" contentType="text/html;charset=utf-8" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;h1&gt;Struts 1 download file example&lt;/h1&gt;
        &lt;h4&gt;Download file - &lt;html:link action="/download"&gt;fileABC.txt&lt;/html:link&gt;&lt;/h4&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">


</p>
<div class="figure">
<a name="N16504"></a>
<p class="title">
<b>Figure&nbsp;3.&nbsp;struts-config.xml</b>
</p>
<div class="figure-contents">
<pre class="programlisting">
&lt;struts-config&gt;
    &lt;action-mappings&gt;
        &lt;action path="/test1" forward="/WEB-INF/test1.jsp"/&gt;
        &lt;action path="/download" type="org.sample.struts1.extra.ExtraTest1"/&gt;
    &lt;/action-mappings&gt;
	
    &lt;message-resources parameter="global"/&gt;
&lt;/struts-config&gt;
</pre>
</div>
</div>
<p>
<br class="figure-break">

</p>
</div>
<br>
<br>
<a name="tubame_8.9." id="category_671"></a>
<h3 class="title">8.9.フレームワーク比較【参考】</h3>
<br>
<div class="section">
<div class="titlepage"></div>
<p>
<a name="frameworkList"></a>Struts 1の代替フレームワークとして、OSS製品のフレームワークを挙げ比較を行い、代替として適切と思われるフレームワークを選択する。
</p>
<div class="table">
<a name="N165BF"></a>
<p class="title">
<b>Table&nbsp;1.&nbsp;Struts 1の代替フレームワーク比較</b>
</p>
<div class="table-contents">
<table summary="Struts 1の代替フレームワーク比較" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th>SpginMVC</th><th>実績</th><th>将来性</th><th>メンテナンス性</th><th>性能</th><th>セキュリティ</th><th>試験容易性</th><th>学習コスト</th><th>移行ノウハウ</th><th>JavaEEとの親和性</th><th>総合</th>
</tr>
</thead>
<tbody>
<tr>
<td>SpginMVC</td><td>◎</td><td>〇</td><td>△</td><td>〇</td><td>◎</td><td>〇</td><td>〇</td><td>◎</td><td>〇</td><td>◎</td>
</tr>
<tr>
<td>Struts2</td><td>〇</td><td>△</td><td>△</td><td>△</td><td>△</td><td>〇</td><td>〇</td><td>◎</td><td>〇</td><td>〇</td>
</tr>
<tr>
<td>Grails</td><td>△</td><td>〇</td><td>〇</td><td>〇</td><td>△</td><td>◎</td><td>△</td><td>〇</td><td>〇</td><td>〇</td>
</tr>
<tr>
<td>Play! Framework</td><td>△</td><td>〇</td><td>〇</td><td>◎</td><td>〇</td><td>◎</td><td>△</td><td>&times;</td><td>&times;</td><td>△</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th>
</tr>
<tr>
<td valign="top" align="left">
<p>
上記は、下記サイトを参考に作成したものである

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://zeroturnaround.com/rebellabs/the-2014-decision-makers-guide-to-java-web-frameworks/" target="_top">http://zeroturnaround.com/rebellabs/the-2014-decision-makers-guide-to-java-web-frameworks/</a></strong></span>

</p>
</li>
<li class="listitem">
<p>

<span class="command"><strong><a class="command" href="http://zeroturnaround.com/rebellabs/the-curious-coders-java-web-frameworks-comparison-spring-mvc-grails-vaadin-gwt-wicket-play-struts-and-jsf/" target="_top">http://zeroturnaround.com/rebellabs/the-curious-coders-java-web-frameworks-comparison-spring-mvc-grails-vaadin-gwt-wicket-play-struts-and-jsf/</a></strong></span>

</p>
</li>
</ul>
</div>
<p>

</p>
</td>
</tr>
</table>
</div>
</div>
<br>
<br>
</BODY>
</HTML>
